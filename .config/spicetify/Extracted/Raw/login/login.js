(()=>{var e,t={9639:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},3222:(e,t,s)=>{"use strict";var n=s(7995),o=s(2033),r=s(7533),i=s(1105);(0,i.JP)({name:"enableNothing",description:"Property to that does nothing.",default:!1});const a=(0,i.JP)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var l=s(4637);const c=()=>(0,l.jsx)("div",{"data-testid":"new-login",children:(0,l.jsx)("h1",{children:"Millions of songs. Free on Spotify"})});var d=s(9496),u=s(9639),g=s.n(u);let p=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});var h=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}(h||{}),f=function(e){return e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other",e}(f||{});let m={};const w=e=>"ar"===e?"ar-u-nu-latn":e;function _(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const x=new class{_relativeTimeFormat=null;_dateTimeFormats=new Map;constructor(){this._dictionary={},this._locale=p.en,this._urlLocale=p.en}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));let s=this._dateTimeFormats.get(t);return void 0===s&&(s=new Intl.DateTimeFormat(w(this._locale),e),this._dateTimeFormats.set(t,s)),s}getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat(this._locale)),this._relativeTimeFormat}getDictionary(){return this._dictionary}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e,this._dateTimeFormats.clear(),this._relativeTimeFormat=null}setUrlLocale(e){this._urlLocale=e}getLocale(){return this._locale}getUrlLocale(){return this._urlLocale}getSmartlingLocale(){const e=this._locale;return g()[e]||e}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._locale)}get(e,...t){const s=e in this._dictionary?this._dictionary[e]:e;let n="";if("string"!=typeof s){const e=t[0],o=((e,t)=>{try{return(m[e]||(m[e]=new Intl.PluralRules(e))).select(t)}catch{return f.OTHER}})(this._locale,parseInt(e,10)),r=s[o];void 0!==r?n=r:s.other&&(n=s.other)}else n=s;if(/%\d%/.test(n)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const o={},r={};t.forEach(((e,t)=>{const s="object"!=typeof e||null===e||(0,d.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of s)(0,d.isValidElement)(t)?r[e]=t:void 0!==t&&(o[e]=t)})),n=n.replace(_(Object.keys(o)),((e,t)=>{const s=t.slice(1,-1),n=o[s];return"number"==typeof n?this.formatNumber(n):n}));const i=Object.keys(r);return i.length?(0,d.createElement)(d.Fragment,null,n.split(_(i)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),s=r[t];return(0,d.cloneElement)(s,{key:s.key??t})}return e})).filter((e=>""!==e))):n}getSeparator(){switch(this._locale){case p.ar:return h.AR;case p.fa:return h.FA;default:return h.EN}}formatNumber(e,t){return e.toLocaleString(w(this._locale),t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const s=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(s).format(e)}formatRelativeDate(e,t=null){const s=new Date(Date.now());e=new Date(e);const n=this.getRelativeTimeFormat(),o=e.getTime()-s.getTime(),r=Math.abs(o)<2592e6;if(null!==n&&r){const{weeks:e,days:t,hours:s,minutes:r,seconds:a}=(i=o,{seconds:Math.round(i/1e3),minutes:Math.round(i/1e3/60),hours:Math.round(i/1e3/60/60),days:Math.round(i/1e3/60/60/24),weeks:Math.round(i/1e3/60/60/24/7)});return Math.abs(t)>=7?n.format(e,"weeks"):Math.abs(s)>=24?n.format(t,"days"):Math.abs(r)>=60?n.format(s,"hours"):Math.abs(a)>=60?n.format(r,"minutes"):n.format(a,"seconds")}var i;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=p.en,m={}}};var y=s(5530),k=s.n(y);var v=s(2988),b=s(7030),S=s(3030),N=s(952);const E="https://www.spotify.com/redirect/account-page/",O="showSettings",C={id:"UnknownLoginErrorMessage"},j={id:"DefaultErrorMessage",replace:[O]},A={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[O]},400:C,401:C,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:C,405:C,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[E]},408:{id:"RegionMismatchMessage",replace:[E,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:C,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:C,415:C,416:C,417:{id:"FacebookCredentialsMisusedMessage"},418:C,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},M={1:C,2:C,3:{id:"BadCredentialsMessage"},4:C,5:C,6:C,7:C,8:C,9:C},R={1:{silent:!0},2:C,3:C,4:{id:"SessionExpiredMessage"},5:j};const I="H5vfurs7KNEs9Io5DUA7",T="qfBRU_bttJde7gy46oAB",P="ypTrzM1PtlrZp04qs6Eq",F="oHZmDpK0SrWDaXhPjUtC",L="lAHowB9HYfAUrg9UaSde";var D=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(D||{});const U=function({logger:e,showSettings:t}){const[n,o]=(0,d.useState)(""),[r,i]=(0,d.useState)(!1),[a,c]=(0,d.useState)(!1),u=(0,d.useRef)(0);(0,d.useEffect)((()=>{e.logPageView({page:"auth-on-web"})}),[e]);const g=async t=>{const n=++u.current,r=k().create().toString();c(t),o(""),i(!0),e.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:r});try{await(a={name:"login-accounts",args:[{method:"login-accounts",enableSignup:t,actionHash:r}]},s.g&&"function"==typeof s.g._getSpotifyModule?new Promise(((e,t)=>{s.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(a),{onSuccess:e,onFailure:t})})):null),e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"},{flush:!1}),await e.finalFlush(),location.href="spotify:app:xpui"}catch(s){const r="string"==typeof s?JSON.parse(s):s;if(n!==u.current)return void e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:r?.errorReference});i(!1);let a=function(e,t,s){if(0===t)return!1;if(!e&&!t)return!1;let n=A;switch(e){case"session":n=M;break;case"desktop_login_accounts":n=R}const o=n[t]||j;if(o.silent)return!1;const r=o.replace||[];let i="";switch(o.id){case"UnknownLoginErrorMessage":i=x.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":i=x.get("desktop.login.DefaultErrorMessage",r[0]);break;case"SessionTerminatedMessage":i=x.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":i=x.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":i=x.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":i=x.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":i=x.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":i=x.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":i=x.get("desktop.login.ErrorProxyAuthRequired",r[0]);break;case"CriticalUpdate":i=x.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":i=x.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":i=x.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":i=x.get("desktop.login.MissingUserInfoMessage",r[0]);break;case"RegionMismatchMessage":i=x.get("desktop.login.RegionMismatchMessage",r[0],r[1]);break;case"PremiumUsersOnlyMessage":i=x.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":i=x.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":i=x.get("desktop.login.ClientUpdateFail",r[0]);break;case"FbUserNotFoundSignUp":i=x.get("desktop.login.FbUserNotFoundSignUp",r[0])}return s?`${i}<br>${x.get("desktop.login.errorCode",s)}`:i}(r.errorCategory,r.errorCode,r.errorReference);"desktop_login_accounts"===r.errorCategory&&r.errorCode===D.OPERATION_TIMED_OUT&&(a=t?x.get("desktop-auth.login.signup-time-out"):x.get("desktop-auth.login.login-time-out")),o(a||""),e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:r?.errorReference})}var a};return(0,l.jsx)("main",{"data-testid":"login",children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:I,children:a?x.get("desktop-auth.login.go-to-browser-signup"):x.get("desktop-auth.login.go-to-browser-login")}),(0,l.jsxs)("button",{className:P,onClick:()=>{i(!1),e.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},children:[(0,l.jsx)(v.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:x.get("desktop-auth.login.not-seeing-browser")})," ",(0,l.jsx)(v.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:x.get("desktop-auth.login.try-again")})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(v.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:I,children:[x.get("desktop-auth.login.millions-of-songs"),(0,l.jsx)("br",{}),x.get("desktop-auth.login.free-on-spotify")]}),n&&(0,l.jsxs)("div",{className:F,role:"alert",onClick:e=>{if(e.currentTarget.getAttribute("data-action")){"showSettings"===e.currentTarget.getAttribute("data-action")&&t()}},"aria-live":"assertive",children:[(0,l.jsx)(b.l,{className:L}),(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:n}})]}),(0,l.jsx)(S.D,{onClick:()=>{g(!1)},iconTrailing:N.T,"data-testid":"login-button",children:x.get("desktop-auth.login.log-in-with-browser")}),(0,l.jsxs)("button",{className:T,onClick:()=>{g(!0)},children:[(0,l.jsx)(v.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:x.get("desktop-auth.login.new-to-spotify")}),(0,l.jsx)(v.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:x.get("desktop-auth.login.sign-up-with-browser")}),(0,l.jsx)(N.T,{iconSize:16,semanticColor:"textBase"})]})]})})};var B=s(4875),W=s.n(B);const z=2,H=3,K=4,G={"auto-detect":{label:()=>x.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>x.get("desktop.settings.proxy.noproxy")},http:{label:()=>x.get("desktop.settings.proxy.http")},socks4:{label:()=>x.get("desktop.settings.proxy.socks4")},socks5:{label:()=>x.get("desktop.settings.proxy.socks5")}},V=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var J=s(8015);const q="mpdBa62OP4Fr5wvCsa89",Z="acVhMt5pELcXQyLaaPuV",$="AavUTirpKSAHapguSAy0",X="SkbGMKYv49KtJNB5XxdX",Q="qfjicQPaTTPrLWJWRxMQ",Y=({id:e,type:t,placeHolder:s,inputRef:n,handleOnChange:o})=>(0,l.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:X,placeholder:s,ref:n,onChange:o}),ee=({children:e,label:t})=>(0,l.jsx)(J.c,{label:t,className:Q,children:e});var te=s(2842),se=s.n(te);function ne(){return"Safari"===se().parse(window.navigator.userAgent).browser.name}const oe="zrvvPyoxE6wQNqnu0yWA",re="jmu6DFPvhxRl0wSfmv2O",ie=({value:e,id:t,children:s,disabled:n,onSelect:o,className:r,dir:i})=>(0,l.jsx)("span",{className:r,children:(0,l.jsx)("select",{className:W()(oe,{[re]:ne()}),value:e?.toString(),id:t,disabled:n,onBlur:()=>{},onChange:e=>{o(e.target.value)},dir:i,children:s})}),ae=(0,d.createContext)(void 0),le=({children:e})=>{const[t,s]=(0,d.useState)(!1),[n,o]=(0,d.useState)(new Set),r=(0,d.useCallback)(((e,t)=>{o((s=>{if(s.has(e)===t)return s;const n=new Set(s);return t?n.add(e):n.delete(e),n}))}),[]),i=n.size>0;return(0,l.jsx)(ae.Provider,{value:{sectionMatch:t,setSectionMatch:s,sectionContainsMatch:i,setSectionFilterMatchQueryValue:r},children:e})},ce=()=>{const e=(0,d.useContext)(ae);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e};(0,s(5650).Ue)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,s)=>{e({lastFilterState:t,lastFilteredUri:s})}})));const de=(0,d.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""});s(1665);const ue=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),ge=/\p{White_Space}/u,pe=/\p{P}/u,he=/\p{sc=Han}/u;function fe(e){return null!==e&&ge.test(e)}function me(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||fe(e))}function we(e){return null!==e&&pe.test(e)}function _e(e){return null!==e&&he.test(e)}class xe{constructor(e,t,s){if(t<0||s<0||t+s>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=s,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new xe(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const s=this.offset+e,n=t-e;return new xe(this.data,s,n)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function ye(e){let t;do{t=e.nextCodePoint()}while(null!==t&&fe(t)||we(t));return t}function ke(e,t){let s=ye(e),n=ye(t);if(null===n)return{offset:0,length:0};const o=e.offset+e.position-1;let r=e.offset+e.position;for(;;){if(null===s&&null===n)return{offset:o,length:r-o};if(null===n)return{offset:o,length:r-o};if(null===s)return null;if(0!==ue.compare(s,n))return null;r=e.offset+e.position,s=ye(e),n=ye(t)}}function ve(e,t){let s,n,o;do{n=e.position,s=e.nextCodePoint()}while(null!==s&&fe(s));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(s)){const t=s;n=e.position;do{o=e.position,s=e.nextCodePoint()}while(null!==s&&s!==t);return null===s&&n===o?null:e.slice(n,o)}do{if(o=e.position,t?.segmentCJKUnifieIdeographs&&_e(s))break;s=e.nextCodePoint()}while(null!==s&&!me(s));return null===s&&n===o?null:e.slice(n,o)}function be(e){return ve(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Se(e){return ve(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Ne(e,t){const s=[];for(let n=Se(e);null!==n;n=Se(e)){let o=ke(n,t.slice());null===o?(o=ke(e.slice(n.offset),t.slice()),null===o||s.push(o)):s.push(o)}return s}function Ee(e,t){return e.offset===t.offset&&e.length===t.length}const Oe=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const s=xe.from(e),n=[];for(let e=be(s);null!==e;e=be(s)){const s=[];for(let n=0;n<t.length;++n){const o=t[n],r=Ne(xe.from(o),e);for(const e of r)s.push({text:o,range:e})}if(0===s.length)return null;n.push(...s.filter(((e,t,s)=>e.range.length>0&&s.findIndex((t=>Ee(e.range,t.range)))===t)))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e,Ce={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function je({children:e,filterMatchQuery:t}){const{filter:s}=(0,d.useContext)(de),{setSectionMatch:n,sectionContainsMatch:o}=ce(),r=Oe(s,t);(0,d.useEffect)((()=>{n(r)}),[r,n]);const i=!r&&!o;return(0,l.jsx)("div",{className:W()(Ce.section,{[Ce.hidden]:i}),children:e})}function Ae(e){return(0,l.jsx)(le,{children:(0,l.jsx)(je,{...e})})}var Me=s(9237),Re=s.n(Me);const Ie={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function Te({searchWords:e,textToHighlight:t,...s}){return 0===e.length||e.every((e=>!e))?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(Re(),{highlightClassName:Ie.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...s})}function Pe({children:e,className:t,semanticColor:s="textBase"}){const{filter:n}=(0,d.useContext)(de);return(0,l.jsx)(v.D,{as:"h2",variant:"cello",semanticColor:s,className:t,children:(0,l.jsx)(Te,{searchWords:[n],textToHighlight:e})})}var Fe=s(2028);const Le="gvcgOXnAiNKEe_z92_lw";function De({onClick:e}){return(0,l.jsx)(Fe.P,{className:Le,onClick:e,children:x.get("settings.restartApp")})}const Ue=(e,t,s)=>{let n=`${e}:${t}`;switch(s){case z:n+="@http";break;case H:n+="@socks4";break;case K:n+="@socks5"}return n},Be=({addr:e,mode:t="0",pass:s,user:n,setValue:o,restartContainer:r,fullWidth:i})=>{const a=(0,d.useRef)(null),c=(0,d.useRef)(null),u=(0,d.useRef)(null),g=(0,d.useRef)(null),p=Number(t),[h,f]=(0,d.useState)(""),[m,w]=(0,d.useState)(""),[_,y]=(0,d.useState)(!1);(0,d.useEffect)((()=>{const[t,s]=e?.split(/[:@]+/)||["",""];f(t),w(s),a.current&&(a.current.value=t),c.current&&(c.current.value=s)}),[e]),(0,d.useEffect)((()=>{g.current&&s&&(g.current.value=s.toString())}),[s]),(0,d.useEffect)((()=>{u.current&&n&&(u.current.value=n.toString())}),[n]);const k=(0,d.useCallback)((({target:e})=>{const t=Ue(e.value,m,p);f(e.value),o("network.proxy.addr",t),y(!0)}),[p,m,o]),v=(0,d.useCallback)((({target:e})=>{const t=Ue(h,e.value,p);w(e.value),o("network.proxy.addr",t),y(!0)}),[p,h,o]),b=(0,d.useCallback)((({target:e})=>{o("network.proxy.user",e.value),y(!0)}),[o]),S=(0,d.useCallback)((({target:e})=>{o("network.proxy.pass",e.value),y(!0)}),[o]),N=0!==p&&1!==p,E=p!==H;return(0,l.jsxs)(Ae,{filterMatchQuery:x.get("desktop.settings.proxy.title"),children:[(0,l.jsx)(Pe,{children:x.get("desktop.settings.proxy.title")}),(0,l.jsxs)("div",{className:W()(Z,i?$:null),children:[(0,l.jsx)(ee,{label:x.get("desktop.settings.proxy.type"),children:(0,l.jsx)(ie,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);o("network.proxy.mode",t),y(!0)},children:V.map((({enumKey:e,enumValue:t})=>(0,l.jsx)("option",{value:t,"data-testid":e,children:G[e]?G[e].label():""},e)))})}),N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:q,children:[(0,l.jsx)(ee,{label:x.get("desktop.settings.proxy.host"),children:(0,l.jsx)(Y,{id:"network.proxy.host",handleOnChange:k,placeHolder:x.get("desktop.settings.proxy.host"),inputRef:a})}),(0,l.jsx)(ee,{label:x.get("desktop.settings.proxy.port"),children:(0,l.jsx)(Y,{id:"network.proxy.port",type:"number",handleOnChange:v,placeHolder:x.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,l.jsxs)("div",{className:E?q:void 0,children:[(0,l.jsx)(ee,{label:x.get("desktop.settings.proxy.user"),children:(0,l.jsx)(Y,{id:"network.proxy.user",handleOnChange:b,placeHolder:x.get("desktop.settings.proxy.user"),inputRef:u})}),E?(0,l.jsx)(ee,{label:x.get("desktop.settings.proxy.pass"),children:(0,l.jsx)(Y,{id:"network.proxy.pass",handleOnChange:S,placeHolder:x.get("desktop.settings.proxy.pass"),type:"password",inputRef:g})}):null]})]}):null,_&&(0,l.jsx)("div",{children:(0,l.jsx)(De,{onClick:r})})]})]})},We="sp://proxy/v1/";function ze(){const[e,t]=(0,d.useState)(null);(0,d.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:We}),persistent:!1,onSuccess:s=>{const n=JSON.parse(s);200!==n.status&&t(new Error(`Failed to fetch proxy settings (status code: ${n.status})`));const o=JSON.parse(n.body);e({mode:o["network.proxy.mode"],address:o["network.proxy.addr"],username:o["network.proxy.user"],password:o["network.proxy.pass"]})},onFailure:(e,s)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,d.useCallback)((e=>{(async function(e){return new Promise(((t,s)=>{const n={"network.proxy.mode":e.mode};[z,H,K].includes(e.mode)&&(n["network.proxy.addr"]=e.address,n["network.proxy.user"]=e.username),[z,K].includes(e.mode)&&(n["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:We,body:JSON.stringify(n)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{s(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function He(){return(0,d.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,s)=>{t(e)}})}))}()),[])}const Ke="BuzoTjBZd1UqCn6DmFJr",Ge="HKamyJi9H31s99erfVyG";function Ve(){return(0,l.jsxs)("div",{className:Ge,children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,l.jsx)("circle",{className:Ke,cx:"-140",cy:"50",r:"32"}),(0,l.jsx)("circle",{className:Ke,cx:"0",cy:"50",r:"32"}),(0,l.jsx)("circle",{className:Ke,cx:"140",cy:"50",r:"32"})]}),(0,l.jsx)("span",{className:"hidden-visually",children:x.get("page.loading")})]})}const Je=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const qe=()=>{const{settings:e,updateSettings:t}=ze(),s=He(),n=(0,d.useCallback)(((s,n)=>{if(null!==e&&function(e){return!!Je.includes(e)}(s)){const o=e;switch(s){case"network.proxy.mode":o.mode=n;break;case"network.proxy.addr":o.address=n;break;case"network.proxy.user":o.username=n;break;case"network.proxy.pass":o.password=n}t(o)}return Promise.resolve()}),[e,t]);return(0,l.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,l.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:x.get("desktop.login.PreferencesLink")}),null!==e?(0,l.jsx)(Be,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:n,restartContainer:s,fullWidth:!0}):(0,l.jsx)(Ve,{})]})},Ze=({mode:e,showLogin:t,showSettings:s,logger:n})=>(0,l.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,l.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{n.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:x.get("desktop.login.Back")}):(0,l.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{n.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),s()},"data-ta-id":"login-footer-settings",children:x.get("desktop.login.PreferencesLink")})}),$e=()=>(0,l.jsxs)("header",{className:"Header",children:[(0,l.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,l.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var Xe=s(4444),Qe=s(6994);const Ye=({initialMode:e="login",logger:t})=>{const[s,n]=(0,d.useState)(e),o=function(e){const t=(0,d.useRef)();return(0,d.useEffect)((()=>{t.current=e}),[e]),t.current}(s);(0,d.useEffect)((()=>{!async function(){new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:'{"type":"view_loaded", "name":"/loginUI"}'}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,s)=>{t(e)}})}))}()}),[]),(0,d.useEffect)((()=>{"login"===s?t.logPageView({page:"login"}):"settings"===s&&t.logPageView({page:"login/settings"})}),[s,t]);const r=o?`__${s} __${o}-to-${s}`:"",i=()=>n("settings");return(0,l.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":s,children:[(0,l.jsxs)("div",{className:"fakeWebPlayer",children:[(0,l.jsx)("aside",{}),(0,l.jsxs)("footer",{children:[(0,l.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,l.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,l.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,l.jsx)("main",{children:(0,l.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,l.jsx)("div",{className:`App__content ${r}`,children:(0,l.jsx)(Qe.Z,{mode:"in-out",children:(0,l.jsx)(Xe.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,l.jsxs)("div",{className:`App__modal ${r}`,children:[(0,l.jsx)($e,{}),"settings"===s?(0,l.jsx)(qe,{}):(0,l.jsx)(U,{showSettings:i,logger:t}),(0,l.jsx)(Ze,{mode:s,showLogin:()=>n("login"),showSettings:i,logger:t})]})},r)})})]},"main1")},et=({initialMode:e,logger:t})=>{const s=(0,r.W6)(a);return(0,l.jsx)(l.Fragment,{children:s?(0,l.jsx)(c,{}):(0,l.jsx)(Ye,{initialMode:e,logger:t})})};var tt=s(3357);var st=s(2166);const nt=(e,t)=>{const s=e.event_sender_context_information;return[(0,st.UY)({version_code:s.client_version_int,version_string:s.client_version_string}),(0,st.jx)(t),(0,st.IE)(s.installation_id),(0,st.CF)({device_id:s.device_id,device_manufacturer:s.device_manufacturer,device_model:s.device_model,os_version:s.os_version,platform_type:s.platform_type})]};var ot=s(1039);let rt=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),it=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const at={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function lt(e,t){var s;s=Object.values(at),document.documentElement.classList.remove(...s);const n=[];"Microsoft Edge"===se().parse(window.navigator.userAgent).browser.name?n.push(at.BROWSER_EDGE):ne()&&n.push(at.BROWSER_SAFARI),t===it.macOS?n.push(at.OS_MACOS):t===it.Windows?n.push(at.OS_WINDOWS):t===it.Linux?n.push(at.OS_LINUX):t===it.ChromeOS&&n.push(at.OS_CHROMEOS),e===rt.Desktop?n.push(at.CONTAINER_DESKTOP):e===rt.PWA?n.push(at.CONTAINER_PWA):e===rt.Web&&n.push(at.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(n)}var ct=s(3314),dt=s(5222);const ut=/Spotify\/(?<version>.+)\s/;function gt(){if(!!window.navigator.userAgent.match(ut))return rt.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,s="Windows"in window;return e&&(t||s)?rt.PWA:rt.Web}const pt=/Spotify\/(?<version>.+)\s/;function ht(){const e=window.navigator.userAgent.match(pt);return e?.groups?.version||"unknown"}var ft=s(6333);const mt=k().create().toString(),wt="has-used-app",_t=!window.localStorage.getItem(wt);_t&&window.localStorage.setItem(wt,"true");const xt=window.localStorage,yt=()=>{const e=xt.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class kt{constructor(e){this._eventSender=e}logPageView({page:e}){this.logAction({page:e,action_type:"pageview",action_intent:""})}logAction({page:e,action_type:t,action_intent:s,item_id:n,action_hash:o},r){this._eventSender.send((0,ft.e)({action_type:t,action_intent:s,action_page:e,action_item_id:n,action_hash:o,device_is_new_install:_t,device_locale:window.__spotify.locale,device_referrer:yt(),ab_flags:"",session_id:mt}),r)}async finalFlush(){await this._eventSender.finalFlush()}}(0,ot.hb)(),async function(){for(const e of[window.__spotify.locale,p.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return x.setLocale(e),void x.setDictionary(t)}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){lt(gt(),function(){const e=se().parse(window.navigator.userAgent).os.name;return"macOS"===e?it.macOS:"Windows"===e?it.Windows:"Linux"===e?it.Linux:"Chrome OS"===e?it.ChromeOS:it.Other}());const e=function(){const e=(0,tt.qy)({providers:{endpoints:(0,tt.uG)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",s=((e,t,s,n,o,r)=>(0,st.mi)({transport:t,suppressPersist:!1,context:nt(e,s),storagePrefix:o,ownerProvider:n,useOptimizedESS2NA:r}))(window.__spotify,e,t,(()=>null),`${t}-loginui`,!1),i=new kt(s),a=window.__spotify&&window.__spotify.locale;a&&document.documentElement.setAttribute("lang",a);const c=ct.L.addMiddleware(dt._);n.render((0,l.jsx)(o.zj,{children:(0,l.jsx)(r.nD,{resolver:c,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:e,eventSender:s,version:ht(),installationId:window.__spotify.event_sender_context_information?.installation_id},children:(0,l.jsx)(d.Suspense,{fallback:null,children:(0,l.jsx)(et,{logger:i})})})}),document.getElementById("main")),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,ot.wm)("UI init phase is done for login")}))}},s={};function n(e){var o=s[e];if(void 0!==o)return o.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,e=[],n.O=(t,s,o,r)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,o,r]=e[d],a=!0,l=0;l<s.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(a=!1,r<i&&(i=r));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,o,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={535:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var o,r,[i,a,l]=s,c=0;if(i.some((t=>0!==e[t]))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var d=l(n)}for(t&&t(s);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},s=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0;var o=n.O(void 0,[569],(()=>n(3222)));o=n.O(o)})();
//# sourceMappingURL=login.js.map