"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{25847:(e,t,a)=>{a.d(t,{Z:()=>j});var n=a(50959),s=a(69736),i=a(60702),o=a(60046),r=a(56146),c=a(5863);const l="MUiWCNTfb6FcSwVPvQ1V",d="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",g="NXn5KjeUOjLGlAfS1Gao",u="N0wgFMDDvCiby4QB5kLJ",v="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",p="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var y=a(11527);const j=(0,n.memo)((e=>{const{uri:t,title:a,imageUrl:n,date:j,location:f,firstParty:N,onClick:k}=e,_=(0,c.CH)(j);return(0,y.jsxs)(o.Link,{to:t,className:l,"data-testid":"concert-card",onClick:k,children:[n&&(0,y.jsx)(r.Z,{children:(0,y.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${n})`}})}),(0,y.jsx)("time",{className:d,dateTime:j,children:(0,y.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:(0,c.jx)(_)})}),(0,y.jsxs)("div",{className:m,dir:"auto",children:[(0,y.jsx)(s.x,{as:"p",className:p,variant:"bodySmall",children:[(0,c.FO)(_),(0,c.hK)(_)].join(" • ")}),(0,y.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:g,children:a}),(0,y.jsxs)("div",{className:u,children:[N&&(0,y.jsx)("span",{className:h,children:(0,y.jsx)(i.V,{size:"small"})}),(0,y.jsx)(s.x,{as:"span",className:v,variant:"bodySmall","data-testid":"location-name",children:f})]})]})]})}))},88993:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(50959),s=a(11317),i=a(85648),o=a(50554),r=a(43827),c=a(25847),l=a(11527);const d=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:d,location:m}=t,g=t.artists[0];return(0,l.jsx)(c.Z,{uri:(0,s.g3)(t.id).toURI(),title:(0,r.ij)(t),imageUrl:g.imageUri,date:t.startDate.localDate,location:a?d:[d,m].join(i.ag.getSeparator()),firstParty:(0,o.$R)(t),onClick:n})}))},50554:(e,t,a)=>{a.d(t,{$R:()=>c,DF:()=>g,Vv:()=>d,ie:()=>u,k9:()=>r,pm:()=>m,sk:()=>l,yI:()=>i});a(46758),a(39301);var n=a(44242),s=a(16012);const i=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},o=10;function r(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,o),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,o);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},g=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.K)(e.from,t.from)&&(0,n.K)(e.to,t.to)),u=e=>(0,s.c)(e,{representation:"date"})},59242:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ra});var n=a(50959),s=a(35869),i=a(75802),o=a(36275),r=a(39505),c=a(44614),l=a(55004),d=a(92537),m=a(68007),g=a(41423),u=a(24936),v=a(10226),h=a(34410),p=a(85648),x=a(37335),y=a(97922),j=a(81639),f=a(16118),N=a(87350),k=a(80626),_=a(47895),b=(a(86277),a(44242)),S=a(69736),C=a(6370),D=a(31848),I=a(66197),F=a(41038),L=a(38024),w=a(91643),U=a(70930),E=a(42240),M=a(90657),P=a(60702),O=a(7863),B=a(21705),W=a(40537),A=a(60046),H=a(50554),R=a(5863),T=a(43827);const G="cELOd04or4B6BbTbNWA7",z="CHJYbX33oDik9u4n4ohH",$="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",K="UUTvdEOH2v_rejoXdl9Z",q="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",Q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var ie=a(11527);const oe=(0,n.memo)((e=>{const{concert:t,position:a,modalSpec:s}=e,{id:i,venue:o,location:r}=t,c=t.startDate.localDate,l=(0,R.CH)(c),d="ONLINE"===t.category,m=(0,n.useMemo)((()=>s?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[s,a,t]),g=(0,k.$P)();return(0,ie.jsxs)(A.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${i}`}))},children:[(0,ie.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,ie.jsx)(S.x,{as:"div",variant:"marginalBold",className:Q,children:(0,R.jw)(l)}),(0,ie.jsx)(S.x,{as:"div",variant:"bodyMediumBold",className:Y,children:(0,R.wf)(l)})]}),(0,ie.jsxs)("div",{className:ee,children:[(0,ie.jsx)(S.x,{as:"div",variant:"bodySmallBold",className:te,"data-testid":"event-title",children:(0,T.Yl)(t)}),(0,ie.jsx)(M.T,{children:(0,R.jx)(l)}),(0,ie.jsxs)(S.x,{as:"div",variant:"bodySmall",className:ae,children:[(0,R.FO)(l)," • ",(0,R.hK)(l)]}),(0,ie.jsx)("span",{className:se,children:(0,H.$R)(t)&&(0,ie.jsx)(P.V,{size:"small"})}),(0,ie.jsx)(S.x,{as:"div",variant:"bodySmall",className:ne,"data-testid":"event-venue",children:d?o:[o,r].join(p.ag.getSeparator())})]})]},t.id)})),re=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:i}=e,o=t?.concerts[0]?.concert,r=o?.artists[0],c=(0,n.useMemo)((()=>i?.groupedEventModalFactory({uri:r?.uri||""})),[i,r]),l=(0,k.$P)(),d=(0,k.Wi)(c);if(!t||!o||!r)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,ie.jsx)(W.Z,{contentLabel:p.ag.get("live_events.label"),isOpen:!0,className:G,onRequestClose:m,children:(0,ie.jsxs)("section",{className:z,ref:d,children:[(0,ie.jsx)("div",{className:$,children:(0,ie.jsx)(ce,{"aria-label":p.ag.get("close"),iconOnly:O.k,size:"small",onClick:m})}),(0,ie.jsxs)("div",{className:V,children:[(0,ie.jsx)(B.E,{height:"48",width:"48",className:K,src:r.imageUri}),(0,ie.jsxs)("div",{className:q,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:Z,"data-testid":"event-venue",children:r.name}),(0,ie.jsx)(S.x,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:`${p.ag.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,ie.jsx)(oe,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ce=(0,E.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(41194),de=a(43007),me=a(70207),ge=a(13188),ue=a(70867);const ve=async()=>(await(0,ue.rD)(ge.b.getInstance())).body,he=6e5,pe=e=>(0,le.a)({queryKey:["concerts",e],queryFn:()=>(async e=>(await(0,ue.$0)(ge.b.getInstance(),e)).body)(e.geonameId),staleTime:he,placeholderData:de.Wk}),xe=e=>(0,me.N)({queryKey:["concerts","all",e],queryFn:({pageParam:t})=>(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,ue.ij)(ge.b.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(t,e),staleTime:he,initialPageParam:1,placeholderData:de.Wk,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}),ye=e=>(0,le.a)({queryKey:["concerts","popular",{geonameId:e}],queryFn:()=>(async e=>(await(0,ue.YA)(ge.b.getInstance(),void 0,e)).body)(e),staleTime:he,placeholderData:de.Wk}),je=/^(\d+)/,fe=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},Ne=e=>{const t=(()=>{const{location:e}=(0,i.UO)(),[,t]=e?.match(je)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,o.lr)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:{type:"foryou",geonameId:t}};var ke=a(92598),_e=a(13734),be=a(37001);const Se="MVPegsivznZB6gdkcnkH",Ce="MlK79hskRbFrN2OBjMkl",De="VxaXFH9Uq1NU0LtsVhIu",Ie="UDVDNa40iTSPS9uHCG7Q",Fe="vktIWsUczavLRrl4SkRt",Le="Y1JeRPqrmHKXI1KcstYN",we="ofURwIKv0qEXJGTraIis",Ue="fN_lJHkYih9H3j9YSEzS",Ee="LOJZO2MnGW5dCIawF767",Me="tyc7QRlEJigVFIAeLGOB",Pe="PoljWhTLU3MKqIx2gSPY",Oe="ajxCNAuBJSgYfKUUBWBT",Be="WR2h2Li5XTrBn_Rdme_k",We="WNhsvOyu4doInF525pLE",Ae="qSR4imCvzdznIQ4F2kBO",He="BCDMgFFqzEyzC1UqkW3t",Re="jFxUCv1gagc6erXmpgYw",Te="XOS1JS9iDK8dgeF3GeL5",Ge="LNAJMvRlTPqWsmZvV7Kg",ze="jP10ZUl0Jn2Ijue3fZux",$e="ncN9bwTgIRk6xruAt5T8",Ve="hKG8XDR5S00bjBAibgbI",Ke="XMhrCtHCVSPsNW67vM1m",qe="vT0t_YE1HgmbnHLLhJD9",Ze=(0,n.memo)((e=>{const{geonameId:t,locationName:a,spec:s}=e,[i,o]=(0,n.useState)(!1),r=(0,k.Wi)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{o(!0)},t=()=>{o(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=c,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[c]),(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("div",{className:Ve,ref:r,children:[i&&(0,ie.jsx)(B.E,{src:c,className:Ke,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_find_tickets",a)}),(0,ie.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_view_details")})]})]})})}));var Je=a(76795),Xe=(a(4461),a(3533)),Qe=a(44246);const Ye="eFIu3aQJuKmf6H4Lb18K",et="LPNL3DZ89Iisp8TMArD3",tt="moVCbo9Ao5YJ5PsH4Qdz",at="URXDMjhb8pQWIDaBrCPC",nt="a3oYct1knu9af60A0v6g",st="qbIrubbolsixlgVkhO5r",it="xHihsEV_0W6kpm0wHsXA",ot="T8po_YH39Q9dhAsLAhec",rt={formatCaption:e=>p.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p.ag.formatDate(e,{weekday:"short"})},ct=(0,n.memo)((e=>{const{onDone:t,onClose:a,spec:s}=e,[i,o]=(0,n.useState)(e.dateRange),r=(0,Qe.S)(),c=(0,k.Wi)(s),l=(0,k.$P)(),d=new Date,g=(0,H.Vv)(d),u=(0,H.pm)(d),v=(0,H.DF)(i,g),h=(0,H.DF)(i,u);return(0,ie.jsx)("div",{ref:c,children:(0,ie.jsx)(W.Z,{isOpen:!0,children:(0,ie.jsxs)("section",{className:Ye,children:[(0,ie.jsx)(m.o,{className:et,iconOnly:O.k,size:"small",onClick:a,"aria-label":p.ag.get("close_button_action")}),(0,ie.jsxs)("div",{className:tt,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",children:p.ag.get("live_events.date_picker_dialog_title")}),(0,ie.jsxs)("div",{className:at,children:[(0,ie.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:v,onClick:()=>{o(v?void 0:g),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p.ag.get("live_events.this_weekend_preset")}),(0,ie.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{o(h?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,ie.jsx)(Je._W,{mode:"range",selected:i,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:rt,dir:r?"rtl":"ltr",modifiersClassNames:{today:st}}),(0,ie.jsxs)("div",{className:it,children:[(0,ie.jsx)(m.o,{className:ot,size:"small",onClick:()=>{o(void 0)},disabled:!i?.from,children:p.ag.get("live_events.date_picker_dialog_clear")}),(0,ie.jsx)(Xe.D,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:a}=i;t({from:e,to:a||e})}else t()},children:p.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var lt=a(11317),dt=a(88993),mt=a(56146);const gt="pU4WoqT8T6PmtjPbFtK0",ut="FC5Y_KFJ9rJyTpydqtOW",vt="AAYLcavkBdCuebn9AQxT",ht="lYHCmxpdReachiOORWGo",pt="JtKEdtTtcK7s6EpGecaC",xt="XuH9DoZCf0aVJ2BxQkTB",yt="myHDa69cI5CHC8fhIhkG",jt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),i=(0,R.CH)(t.openingDate),o=(0,R.CH)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,ie.jsxs)(m.o,{onClick:s,className:gt,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,ie.jsx)(mt.Z,{children:(0,ie.jsx)("div",{role:"img",className:yt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,ie.jsx)("time",{className:ut,dateTime:i.toISOString(),children:(0,ie.jsx)(S.x,{as:"p",variant:"bodySmallBold",children:(0,R.Bc)(i,o)})}),(0,ie.jsxs)("div",{className:vt,dir:"auto",children:[(0,ie.jsx)(S.x,{as:"h2",variant:"bodyMediumBold",className:ht,children:(0,T.ij)(r)}),(0,ie.jsxs)("div",{className:pt,children:[(0,H.sk)(t)&&(0,ie.jsx)("span",{className:xt,children:(0,ie.jsx)(P.V,{size:"small"})}),(0,ie.jsx)(S.x,{as:"span",variant:"bodySmall","data-testid":"concerts-count",children:p.ag.get("concerts.count",t.concerts.length)})]})]})]})})),ft=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,lt.g3)(o.id).toURI(),l=(0,k.$P)(),d=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,k.Wi)(d),g=e=>{i(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(jt,{event:t,onClick:g})});return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(dt.Z,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),Nt="yLIDHkmBrjsAVNMCcFM_",kt="qr_9NXyk7D0t6wclM5R0",_t="mDxkFuOd3TBAQI2gXatq",bt="AQ8ZFs5U45GPiyJnqEvt",St="E8DcbdVmmoGfC8R8S1Vw",Ct="wzS5PwxEhferQEdjumt0",Dt="E0zwnbwA3HzqNi2BV4eq",It=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),i=(0,R.CH)(t.openingDate),o=(0,R.CH)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,ie.jsxs)("div",{className:Ct,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,ie.jsx)(B.E,{src:c?.imageUri,alt:"",role:"presentation",className:Nt}),(0,ie.jsxs)("div",{className:kt,children:[(0,ie.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(r)}),(0,ie.jsx)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:(0,R.Bc)(i,o)}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,H.sk)(t)&&(0,ie.jsx)(P.V,{size:"small",className:Dt}),p.ag.get("concerts.count",t.concerts.length)]})]})]})})),Ft=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:s,location:i}=t,o=t.artists[0],r=(0,R.CH)(t.startDate.localDate);return(0,ie.jsxs)(A.Link,{to:`/concert/${t?.id}`,className:Ct,"data-testid":"concert-row",onClick:n,children:[(0,ie.jsx)(B.E,{src:o?.imageUri,alt:"",role:"presentation",className:Nt}),(0,ie.jsxs)("div",{className:kt,children:[(0,ie.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(t)}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:[(0,R.xE)(r)," • ",(0,R.hK)(r)]}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,H.$R)(t)&&(0,ie.jsx)(P.V,{size:"small",className:Dt}),a?s:[s,i].join(p.ag.getSeparator())]})]})]})})),Lt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,lt.g3)(o.id).toURI(),l=(0,k.$P)(),d=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,k.Wi)(d),g=e=>{i(e)};if(t.concerts.length>1)return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(It,{event:t,onClick:g})});return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(Ft,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})})),wt=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:i,onOpenGroupedEvent:o,layout:r}=e,c=(0,n.useMemo)((()=>i?.eventSectionFactory({identifier:"all",position:1})),[i]),l=(0,k.Wi)(c);return s?(0,ie.jsx)(w.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,ie.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,ie.jsx)("div",{ref:l,children:t.map((e=>(0,ie.jsxs)("div",{className:We,children:["grid"===r&&(0,ie.jsx)(U.P,{total:e.events.length,title:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(ft,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:o},a?.id)}))}),"list"===r&&(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(Lt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:o},a?.id)}))]})]},e.date)))}):null})),Ut={month:"short",day:"numeric"},Et=e=>{if((0,b.K)(e.from,e.to))return p.ag.formatDate(e.from,Ut);return`${p.ag.formatDate(e.from,Ut)} - ${p.ag.formatDate(e.to,Ut)}`},Mt=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:r}=e,c=(()=>{const[e]=(0,o.lr)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=fe(t),s=fe(a);return n&&s&&{from:n,to:s}})(),l=(0,i.s0)(),[,d]=(0,o.lr)(),[m]=(0,o.lr)(),[g,u]=(0,n.useState)(),[v,h]=(0,n.useState)(!1),x=(0,_e.o)(),y=(0,n.useMemo)((()=>a?.headerFactory()),[a]),j=(0,n.useMemo)((()=>a?.datePickerModalFactory()),[a]),f=(0,n.useMemo)((()=>a?.cityInfoFactory()),[a]),N=(0,k.$P)(),{data:_,isLoading:b,hasNextPage:L,isFetchingNextPage:w,fetchNextPage:U}=xe({geonameId:t,startDate:c&&(0,H.ie)(c.from),endDate:c&&(0,H.ie)(c.to)}),E=(0,n.useMemo)((()=>(0,H.k9)(_?.pages??[])),[_?.pages]),M=_?.pages[0]?.userLocation;(0,n.useEffect)((()=>{M&&r?.(M)}),[M,r]);const P=M||p.ag.get("concerts.default_location"),O=(0,H.Vv)(new Date),B=(0,H.pm)(new Date),W=(0,n.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,H.ie)(e.from),t.endDate=(0,H.ie)(e.to),j)){const e=new URLSearchParams(t).toString();N.logInteraction(j.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}h(!1),d(t),j&&N.logInteraction(j.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[d,j,N]),A=(0,n.useCallback)((e=>{const t={filter:"all"};(0,H.DF)(c,e)||(t.startDate=(0,H.ie)(e.from),t.endDate=(0,H.ie)(e.to)),d(t)}),[c,d]);return(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${P}`}),(0,ie.jsxs)("div",{className:Re,children:[(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{x({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:(0,H.yI)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:P,headerSpec:y}),(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(C.P,{className:He,iconLeading:D.a,onClick:()=>{h(!0),y&&N.logInteraction(y.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Et(c):p.ag.get("live_events.date_picker_button_text")}),v&&(0,ie.jsx)(ct,{onClose:()=>{h(!1),j&&N.logInteraction(j.closeButtonFactory().hitUiHide())},onDone:W,dateRange:c,spec:j}),(0,ie.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,H.DF)(c,O),onClick:()=>{if(A(O),y){const e={startDate:(0,H.ie)(O.from),endDate:(0,H.ie)(O.to)},t=new URLSearchParams(e).toString();N.logInteraction(y.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.this_weekend_preset")}),(0,ie.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,H.DF)(c,B),onClick:()=>{if(A(B),y){const e={startDate:(0,H.ie)(B.from),endDate:(0,H.ie)(B.to)},t=new URLSearchParams(e).toString();N.logInteraction(y.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,ie.jsx)(wt,{isLoading:b,locationName:P,eventGroups:E,onOpenGroupedEvent:e=>{u(e);const t=e.concerts[0]?.concert.artistUris[0];x({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:a,layout:s}),L&&(0,ie.jsx)("div",{className:Ae,children:(0,ie.jsx)(C.P,{disabled:w,onClick:()=>{U()},children:p.ag.get("concerts.load_more")})}),(0,ie.jsx)(re,{event:g,locationName:P,feedSpec:a,onClose:()=>u(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),_&&_.pages[0]&&_.pages[0].userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:_.pages[0].userLocationGeonameId,locationName:P,spec:f})]})}));var Pt=a(22553),Ot=a(8509),Bt=a(82187),Wt=a.n(Bt),At=a(24422),Ht=a(17676),Rt=a(45438);const Tt=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:i,feedSpec:o,onOpenGroupedEvent:r,layout:c}=e,l=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:a,position:s})),[o,a,s]),d=(0,k.Wi)(l),m=(0,v.W6)(Ht.WDb);return 0===i.length?null:(0,ie.jsxs)("div",{className:Se,ref:d,children:["grid"===c&&(0,ie.jsx)(Rt.JL,{value:"headered-grid",index:s,children:(0,ie.jsx)(U.P,{total:i.length,title:t,gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,className:Wt()({[At.Z.titleSpacing]:m}),children:i.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(ft,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))})}),"list"===c&&(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:t}),i.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(Lt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))]})]})})),Gt=(0,n.memo)((e=>{const{spec:t,layout:a,onLocationNameChange:s}=e,[r,c]=(0,n.useState)(),[l]=(0,o.lr)(),d=ye(e.geonameId),m=d.data?.userLocation||p.ag.get("concerts.default_location"),g=(0,n.useMemo)((()=>t?.headerFactory()),[t]),u=(0,i.s0)();return(0,n.useEffect)((()=>{d.data?.userLocation&&s?.(d.data.userLocation)}),[d.data?.userLocation,s]),(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${m}`}),(0,ie.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{(0,Pt._)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&u({pathname:(0,H.yI)(e.geonameId,e.location),search:`?${l.toString()}`})},locationStr:m,headerSpec:g})}),(0,ie.jsxs)("div",{className:Ge,children:[(0,ie.jsx)(S.x,{variant:"titleSmall",semanticColor:"textBase",children:p.ag.get("live_events.for_you_anonymous_heading")}),(0,ie.jsx)(S.x,{variant:"bodyMedium",className:ze,semanticColor:"textSubdued",children:p.ag.get("live_events.for_you_anonymous_subheading")}),(0,ie.jsx)(Xe.D,{colorSet:"invertedLight",className:$e,onClick:()=>(0,Ot.L6)(),children:p.ag.get("live_events.sign_up_free")})]}),d.data&&(0,ie.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",m),identifier:"popular",position:0,events:d.data.events,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Pt._)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,ie.jsx)(re,{event:r,locationName:m,feedSpec:t,onClose:()=>c(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),d.data&&d.data.userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:d.data.userLocationGeonameId,locationName:m})]})}));a(46758),a(27082);const zt=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:i,onOpenGroupedEvent:o}=e;if(t)return(0,ie.jsx)(w.h,{hasError:!1,errorMessage:""});if(0===a.length)return(0,ie.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const r=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Tt,{title:p.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:r.online,onOpenGroupedEvent:o,feedSpec:s,layout:i}),(0,ie.jsx)(Tt,{title:p.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:r.recommended,onOpenGroupedEvent:o,feedSpec:s,layout:i}),(0,ie.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",n),identifier:"popular",position:2,events:r.popular,onOpenGroupedEvent:o,feedSpec:s,layout:i})]})}));var $t=a(50540),Vt=a(80515),Kt=a(1740),qt=a(58912),Zt=a(20069);const Jt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"promoCardPlaylist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playlistInfo"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playlistInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"}}]}}]},Xt="Cot6ZntaldMo77XCx1dt",Qt="vfWT92cAm89qtD3Lwfrc",Yt="XyJgy3JOLfeFBo2CiltA",ea="UI2hGxMrqbScQtyg3FzT",ta="mnwdEtmP084CWa7aUEzN",aa=()=>{const e=(0,$t.g)(),t=(0,n.useContext)(Kt.ZF),{data:a}=(0,le.a)({queryKey:["cny-resolve"],queryFn:()=>t.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you"),enabled:!e,staleTime:1/0}),{data:s}=(i={uri:a},o={enabled:!!a},(0,Zt.a)(Jt,i,o));var i,o;if("Playlist"===s?.playlistV2.__typename)return s.playlistV2},na=(0,n.memo)((e=>{const t=aa();if(!t)return null;const a=(0,qt.X)(t.images.items[0]?.sources,{desiredSize:88});return(0,ie.jsxs)(A.default,{to:t.uri,className:Xt,children:[(0,ie.jsx)(Vt.E,{src:a?.url,loading:"lazy",alt:"",ariaHidden:!0,className:Qt}),(0,ie.jsxs)("div",{className:Yt,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:ea,children:t.name}),(0,ie.jsx)(S.x,{as:"p",variant:"bodySmall",className:ta,children:t.description})]})]})})),sa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:o}=e,r=(0,i.s0)(),[c,l]=(0,n.useState)(),d=(0,_e.o)(),m=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:g,isLoading:u}=pe({geonameId:t});(0,n.useEffect)((()=>{g?.userLocation&&o?.(g.userLocation)}),[g?.userLocation,o]);const h=(0,v.W6)(Ht.yJ3,{loadingValue:!1}),x=g?.userLocation||p.ag.get("concerts.default_location");return(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${x}`}),(0,ie.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,H.yI)(e.geonameId,e.location))},locationStr:x,headerSpec:m})}),h&&(0,ie.jsx)("div",{className:qe,children:(0,ie.jsx)(na,{})}),(0,ie.jsx)(zt,{isLoading:u,events:g?.events||[],locationName:x,spec:a,onOpenGroupedEvent:e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,ie.jsx)(re,{event:c,locationName:x,feedSpec:a,onClose:()=>l(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),g&&g.userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:g.userLocationGeonameId,locationName:x})]})})),ia=(0,n.memo)((e=>{const{spec:t,layout:a}=e,[s,i]=(0,n.useState)(),o=(0,le.a)({queryKey:["savedConcerts"],queryFn:ve}),r=(0,_e.o)(),c=o.data?.userLocation,l=c||p.ag.get("concerts.default_location");return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("live_events.label")}`}),o.data?.events.length?(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(Tt,{title:p.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:o.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:a})}):(0,ie.jsxs)("div",{className:Ee,children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Oe,children:p.ag.get("concerts_interested_in_live_events")}),(0,ie.jsx)(S.x,{as:"p",className:Be,children:p.ag.get("concerts_no_events_description")}),(0,ie.jsx)(A.default,{to:"/concerts",className:Me,children:(0,ie.jsx)(C.P,{as:"span",className:Pe,children:p.ag.get("concerts_browse_more_events")})})]}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),(0,ie.jsx)(re,{event:s,locationName:l,feedSpec:t,onClose:()=>i(void 0)})]})})),oa=r.SHH,ra=()=>{const{isAnonymous:e}=(0,s.v9)(N.Gg),t=(0,i.TH)(),a=t.pathname+t.search,r=(0,k.$P)(),b=(0,v.W6)(_.tp),[S,C]=(0,n.useState)("grid"),{spec:D}=(0,k.fU)(h.y,{}),I=Ne({isAnonymous:e,isInterestedEnabled:b}),F=(0,n.useMemo)((()=>D.headerFactory().liveEventsNavbarFactory({uri:a,reason:I.type})),[D,I,a]),L=(0,k.Wi)(F),[w,U]=(0,n.useState)(),E=e=>{const a=`${t.pathname}?filter=${e}`,n=D.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});r.logInteraction(n)},M=()=>{const e=D.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:S,stateAfterToggle:"grid"===S?"list":"grid"});r.logInteraction(e),C("grid"===S?"list":"grid")},P=e&&w?p.ag.get("live_events.location_concert_tickets",w):p.ag.get("live_events.label");return(0,ie.jsxs)("section",{className:Ce,children:[(0,ie.jsxs)(y.gF,{size:y.fR.SMALL,backgroundColor:oa,children:[(0,ie.jsx)(y.sP,{children:(0,ie.jsx)(y.xd,{children:P})}),(0,ie.jsx)(j.W,{children:(0,ie.jsx)(f.i,{text:P})})]}),(0,ie.jsxs)("div",{className:De,children:[(0,ie.jsx)(x.I,{backgroundColor:oa}),(0,ie.jsxs)("div",{className:we,ref:L,children:[(0,ie.jsx)(c.l,{list:(0,ie.jsx)("nav",{"aria-label":"live events navbar",children:(0,ie.jsxs)(l.F,{children:[(0,ie.jsx)(d.c,{id:"for_you_link",label:p.ag.get("live_events.for_you_tab"),active:"foryou"===I.type,className:Ue,component:o.rU,onClick:()=>E("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,ie.jsx)(d.c,{id:"concerts_all_link",label:p.ag.get("live_events.all_events_tab"),active:"all"===I.type,className:Ue,component:o.rU,onClick:()=>E("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),!e&&b&&(0,ie.jsx)(d.c,{id:"concerts_interested_link",label:p.ag.get("concerts_interested"),active:"saved"===I.type,className:Ue,component:o.rU,onClick:()=>E("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),"grid"===S&&(0,ie.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_list_layout"),iconOnly:g.d,className:Le,onClick:M,size:"small"}),"list"===S&&(0,ie.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Le,onClick:M,size:"small"})]}),(0,ie.jsxs)("div",{className:Ie,children:[e&&"foryou"===I.type&&(0,ie.jsx)(Gt,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),!e&&"foryou"===I.type&&(0,ie.jsx)(sa,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"all"===I.type&&(0,ie.jsx)(Mt,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"saved"===I.type&&(0,ie.jsx)(ia,{spec:D,layout:S})]})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map