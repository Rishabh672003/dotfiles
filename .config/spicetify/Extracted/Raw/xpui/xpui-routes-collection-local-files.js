"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7379],{4107:(e,t,l)=>{l.d(t,{l:()=>C});var r=l(59496),a=l(13803),s=l(11836),i=l(91078),o=l(14922);const n={"custom-order":i.HI,title:{column:o.Q.TITLE,order:o.k.ASC},artist:{column:o.Q.TITLE,order:o.k.SECONDARY_ASC},"added-by":{column:o.Q.ADDED_BY,order:o.k.ASC},"added-at":{column:o.Q.ADDED_AT,order:o.k.ASC},duration:{column:o.Q.DURATION,order:o.k.ASC},album:{column:o.Q.ALBUM,order:o.k.ASC},"album-or-podcast":{column:o.Q.ALBUM_OR_PODCAST,order:o.k.ASC},"album-or-show":{column:o.Q.ALBUM_OR_SHOW,order:o.k.ASC}},c={title:o.Q.TITLE,artist:o.Q.TITLE,"added-by":o.Q.ADDED_BY,"added-at":o.Q.ADDED_AT,duration:o.Q.DURATION,album:o.Q.ALBUM,"album-or-podcast":o.Q.ALBUM_OR_PODCAST,"album-or-show":o.Q.ALBUM_OR_SHOW},u={[o.k.NONE]:o.k.NONE,[o.k.ASC]:o.k.DESC,[o.k.DESC]:o.k.ASC,[o.k.SECONDARY_ASC]:o.k.SECONDARY_DESC,[o.k.SECONDARY_DESC]:o.k.SECONDARY_ASC},d={[o.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[o.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[o.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[o.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[o.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[o.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[o.Q.EVENT_DATE]:null,[o.Q.EVENT_INFO]:null,[o.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[o.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[o.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[o.Q.PLAYS]:null,[o.Q.RELEASE_DATE]:null,[o.Q.ADD]:null,[o.Q.ACTIONS]:null,[o.Q.CONCERT_VENUE]:null,[o.Q.CONCERT_DATE]:null};var g=l(97024),m=l(39341),x=l(4637);function k(e){return!!e}const C=({columns:e,disabled:t,onSort:l,isBooklist:C=!1})=>{let h=[...e];C?h=i.i1:h.splice(2,0,g.QD.ARTIST);const{sortState:y,setSortState:A}=(0,r.useContext)(i.Gb),b=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e.order)?d[g.QD.ARTIST]:d[e.column]}(y),D=(0,r.useCallback)((e=>{l?.(),A(((e,t,l)=>e?t!==c[e]||"artist"===e&&[o.k.ASC,o.k.DESC].includes(l)||"title"===e&&[o.k.SECONDARY_ASC,o.k.SECONDARY_DESC].includes(l)?n[e]:{column:c[e],order:u[l]}:i.HI)(e,y.column,y.order))}),[l,A,y.column,y.order]),S=(0,r.useCallback)((()=>null!==y.column),[y.column]),f=h.map((e=>d[e])).filter(k);return(0,x.jsx)(s.A,{options:f,onSelect:D,selected:b,isSelectionChanged:S,sortOrder:y.order,heading:a.ag.get("drop_down.sort_by"),disabled:t})}},37938:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ee});var r=l(59496),a=l(9102),s=l(7962),i=l(30940),o=l(3332),n=l(13803),c=l(86287),u=l(70424),d=l(86857),g=l(92142),m=l(29360),x=l(99952),k=l(39341),C=l(19805),h=l(97024),y=l(91078),A=l(25494),b=l(68050),D=l(93041),S=l(21277),f=l(67674),p=l(30549),j=l(43840),E=l(80576),T=l(19045),v=l(4107);const Q="uCHqQ74vvHOnctGg0X0B",I="feuNq1FTxMbdeOTuFgpA";var _=l(4637);const P=r.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,p.fU)(E.createDesktopSearchBarEventFactory,{}),a=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),s=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),i=(0,r.useCallback)((()=>{l.logInteraction(t.sortButtonFactory().hitSort())}),[l,t]);return(0,_.jsxs)("div",{className:I,children:[(0,_.jsx)(r.Suspense,{fallback:null,children:(0,_.jsx)(T.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:s})}),(0,_.jsx)(v.l,{columns:y.MI,onSort:i})]})}));var R=l(6838),O=l(15494),N=l(32156),U=l(32681);const B=r.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:l,isActive:a,backgroundColor:s,spec:i,logger:o}){const c=(0,U.Q)(),u=(0,r.useMemo)((()=>i.shuffleButtonContainerFactory()),[i]),d=(0,R.j)(),g=(0,r.useCallback)((()=>{const e=(0,O.aK)({isPlaying:l,isActive:a,spec:i.playButtonFactory(),logger:o,uri:b.b});t({loggingParams:e})}),[a,l,o,i,t]);return(0,_.jsx)(j.o,{backgroundColor:s,children:(0,_.jsxs)(j.F,{children:[(0,_.jsx)(x.$,{size:d,onClick:g,isPlaying:l,uri:b.b}),c&&(0,_.jsx)(p.Nh,{spec:u,children:(0,_.jsx)(N.K,{entityName:n.ag.get("local-files"),contextUri:b.b,activationPlacement:"bottomEnd",size:d})}),(0,_.jsx)(p.Nh,{spec:i,children:(0,_.jsx)(P,{tracklistDomRef:e})})]})})}));var F=l(52974),L=l(27815),M=l(17294),w=l(99714),Y=l(76456),H=l(64807),z=l(13304),W=l(44852),K=l(18699),X=l(69481);const G=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:s,album:i,is19PlusOnly:o,isExplicit:c,isPlayable:u,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x}){const{spec:k}=(0,p.fU)(F.r,{data:{position:d,reason:"",uri:e}}),{filter:h}=(0,r.useContext)(C.fo),{isActive:y,isPlaying:A,triggerPlay:b,togglePlay:D}=x({uid:t,uri:e,index:d}),{badges:S,hasBadges:f}=(0,Y.r)({isExplicit:c}),j=s?.map((e=>e.name)).join(n.ag.getSeparator())||"";return(0,_.jsx)(w.ZP,{value:"row",index:d,children:(0,_.jsx)(L._,{menu:(0,_.jsx)(H.N,{uri:e,uid:t,contextUri:g}),children:(0,_.jsxs)(X.c,{uri:e,contextUri:g,isActive:y,index:d,onTriggerPlay:(e,t)=>{b({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:o,dragMetadata:{name:l,createdBy:j},spec:k,children:[(0,_.jsx)(W.Dd,{ariaColIndex:0,children:(0,_.jsx)(W.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",l,j),isPlaying:A,isActive:y,onClick:(e,t)=>{D({loggingParams:t})},spec:k,children:(0,_.jsx)(W.km,{children:d+1})})}),(0,_.jsxs)(W.vZ,{ariaColIndex:1,children:[(0,_.jsx)(W.lD,{src:m}),(0,_.jsxs)(W.vm,{children:[(0,_.jsx)(W.Wh,{titleText:l,children:(0,_.jsx)(z.o,{searchWords:[h],textToHighlight:l})}),f&&(0,_.jsx)(W.g3,{children:S.explicit?(0,_.jsx)(M.N,{}):null}),(0,_.jsx)(W.K9,{children:s&&(0,_.jsx)(K.o,{nonInteractive:!0,artists:s,filter:h})})]})]}),(0,_.jsx)(W.UA,{ariaColIndex:2,children:i?.name&&(0,_.jsx)(W.BM,{nonInteractive:!0,uri:i?.uri,name:i?.name,children:(0,_.jsx)(z.o,{searchWords:[h],textToHighlight:i?.name})})}),(0,_.jsxs)(W.mU,{ariaColIndex:3,children:[(0,_.jsx)(W.A$,{duration:a}),(0,_.jsx)(W.Zv,{menu:(0,_.jsx)(H.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",l,j),spec:k})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var V=l(59737);const Z=new Set(y.MI),$=r.memo((function({uri:e,tracks:t,columns:l,sortState:a,handleSort:s,usePlayContextItem:i,tracklistDomRef:o}){const c=(0,r.useRef)(null),u=(0,r.useCallback)(((t,l)=>{const r=(0,V.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,_.jsx)(G,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i},t.uid)}),[e,i]);return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(w.ZP,{value:"playlist-tracklist",children:(0,_.jsx)(h.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:Z,sortState:a,onSort:s,renderRow:u,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:c,outerDomRef:o},e)})})})),q=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],J=()=>{const{filter:e}=(0,r.useContext)(C.fo),{sortState:t,setSortState:l}=(0,r.useContext)(y.Gb),h=(0,r.useContext)(D.t),j=(0,S.I)(),E=(0,A.Y)(s.Fzl),T=(0,r.useRef)(null),{spec:v}=(0,p.fU)(o.G,{data:{uri:b.b}}),I=(0,r.useMemo)((()=>v.actionBarFactory()),[v]),P=(0,r.useMemo)((()=>v.tracklistFactory()),[v]),R=(0,p.$P)(),O=(0,r.useCallback)(((e,r)=>{l((0,k.VK)(e,t)),R.logInteraction(v.tracklistFactory().columnHeaderFactory({identifier:e,position:r||0}).hitSort())}),[l,t,R,v]),{data:N}=(0,a.useQuery)(["local-files",t,e],(()=>h.getTracks((0,k._j)(t),e)),{staleTime:0,cacheTime:3e5,keepPreviousData:!0,enabled:j}),{isActive:U,isPlaying:F,togglePlay:L,usePlayContextItem:M}=(0,f.n)({uri:b.b,pages:[{items:(N??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return N?e||N.length&&j?(0,_.jsxs)("div",{role:"presentation",className:Q,children:[(0,_.jsxs)(u.gF,{backgroundColor:E,children:[(0,_.jsxs)(d.W,{children:[(0,_.jsx)(x.$,{size:"medium",onClick:()=>L(),isPlaying:F,uri:b.b}),(0,_.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,_.jsxs)(u.sP,{children:[(0,_.jsx)(u.xd,{children:n.ag.get("local-files")}),(0,_.jsx)(u.T0,{children:n.ag.get("local-files.description")})]})]}),(0,_.jsx)(B,{togglePlay:L,isPlaying:F,isActive:U,backgroundColor:E,tracklistDomRef:T,spec:I,logger:R}),(0,_.jsx)("div",{className:"contentSpacing",children:(0,_.jsx)(p.Nh,{spec:P,children:(0,_.jsx)($,{tracks:N,uri:b.b,columns:q,handleSort:O,sortState:t,usePlayContextItem:M,tracklistDomRef:T})})})]}):(0,_.jsx)(c.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,_.jsx)(i.Y,{iconSize:64,"aria-hidden":"true"})}):(0,_.jsx)(m.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},ee=()=>(0,_.jsx)(y.kz,{uri:"spotify:internal:local-files",children:(0,_.jsx)(C.hz,{uri:"spotify:internal:local-files",children:(0,_.jsx)(J,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map