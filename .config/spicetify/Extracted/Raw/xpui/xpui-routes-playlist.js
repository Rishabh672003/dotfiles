"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{71251:(e,i,a)=>{a.d(i,{j:()=>d});var n=a(50959),t=a(22795),l=a(57562),s=a(13734),r=a(11527);const d=n.memo((function({uri:e,size:i=l.q.md,className:a,onClick:d,canDownload:o,condensedAll:c}){const[m,u]=(0,t.Z)(e),k=(0,s.o)(),p=(0,n.useCallback)((()=>{k({targetUri:e,intent:m?"unsave":"save",type:"click"}),u(!m)}),[k,e,m,u]);return(0,r.jsx)(l.o,{className:a,isFollowing:m,onFollow:p,onClick:d,uri:e,size:i,canDownload:o,condensedAll:c})}))},4576:(e,i,a)=>{a.d(i,{T:()=>u});var n=a(50959),t=a(82187),l=a.n(t),s=a(40763),r=a(85648),d=a(55842),o=a(74713);const c="pvGZ831aNzHTQMZ8CA_u";var m=a(11527);const u=(0,n.memo)((function({onClick:e=(()=>{}),size:i,className:a,uri:t,sharingInfo:u,interactionData:k,ariaLabel:p=r.ag.get("mwp.list.item.share"),condensedAll:v}){const{onCopyLink:y}=(0,o.y)({sharingInfo:u,uri:t,interactionData:k}),S=(0,n.useCallback)((()=>{y(),e()}),[e,y]);return(0,m.jsx)(d.E,{ariaLabel:p,size:i,onClick:S,className:l()(c,a),icon:s.M,condensedAll:v,condensed:!0})}))},28133:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>c,default:()=>c,useThisisPlaylistExtensionQuery:()=>k});var n=a(69736),t=a(6370),l=a(85648),s=a(60046),r=a(80626),d=a(97607),o=a(11527);const c=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:c,spec:m}=e,u=(0,r.$P)(),k=(0,r.Wi)(m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}));return i&&a&&c?(0,o.jsxs)("section",{ref:k,className:"contentSpacing",children:[(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,o.jsx)("div",{className:d.Z.cards,children:(0,o.jsxs)("div",{className:d.Z.tourCard,"data-testid":"on-tour-card",children:[(0,o.jsx)("img",{className:d.Z.cardImage,src:i,alt:""}),(0,o.jsxs)("div",{className:d.Z.cardContent,children:[(0,o.jsx)(n.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:d.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",className:d.Z.title,semanticColor:"textBase",children:a}),(0,o.jsx)(s.default,{to:c,className:d.Z.cardLink,children:(0,o.jsx)(t.P,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:c});u.logInteraction(e)},className:d.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(20069);const u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"concerts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConcertV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"startDateIsoString"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"city"}},{kind:"Field",name:{kind:"Name",value:"country"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},k=(e,i)=>(0,m.a)(u,e,i)},1716:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Ot});a(46758),a(53321),a(55115),a(86277),a(92372),a(70069),a(44227),a(91499),a(68856),a(18004),a(16527);var n=a(50959),t=a(35869),l=a(75802),s=a(69736),r=a(10226),d=a(11444),o=a(11317),c=a(85648),m=a(35360),u=(a(39301),a(4815)),k=a(11527);const p=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:r,advertiserName:d,creativeId:o,lineItemId:m})=>{const v=(0,t.I0)(),[y,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(v((0,u.Vw)()),v((0,u.kh)(p("event_viewed",o,m))),()=>{v((0,u.AG)())})),[v,o,m]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.x,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",d)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{v((0,u.kh)(p("event_clicked",o,m))),S(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:d,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),y&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,u.fd)(e))}),[i,e,a]),a?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...a})}):null},S=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,u.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,k.jsx)(y,{playlistUri:e}):null};var g=a(46771),h=a(41038),N=a(16145),x=a(3533),b=a(22795);const f="hOOwEKqNuXrNvOCB1SgZ",C="csEdkIN9z2LjJIuZraqz",F=({uri:e})=>{const[i,a]=(0,b.Z)(e),t=(0,l.s0)(),r=(0,n.useCallback)((()=>{a(!1),t("/",{replace:!0})}),[t,a]);return(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)(N.l,{size:"xxlarge"}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)(s.x,{as:"p",variant:"titleSmall",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("forbidden-page.description")})]}),i&&(0,k.jsx)(x.D,{colorSet:"invertedLight",onClick:r,children:c.ag.get("remove_from_your_library")})]})};var T=a(91643),j=a(50879),A=a(21536),I=a(65432),R=a(50216),E=a(56822),D=a(61046),L=a(28133),P=a(19848),_=a(17053),w=a(58301),U=a(52115),V=a(23055),M=a(82857);const O=e=>e.seoExperiment,B=(0,V.P1)(O,(e=>e?.uri)),Z=((0,V.P1)(O,(e=>e?.[M.p.TRACK])),(0,V.P1)(O,(e=>e?.[M.p.ALBUM])),(0,V.P1)(O,(e=>({...e?.[M.p.PLAYLISTV2],...e?.[M.p.PLAYLIST]}))));var K=a(13734),W=a(9443),z=a(1142),Q=a(48948),H=a(51450),J=a(50540),q=a(24071),G=a(95504),Y=a(17676),X=a(91530),$=a(87350);const ee=({context:e,shouldFire:i})=>{const a=(0,J.g)(),l=(0,t.v9)($.n5),s=(0,t.v9)(X.rZ),d=(0,r.W6)(Y.kye),o=(0,q.s4)(),c=(0,n.useCallback)((()=>{const i={category:"rpp_exposures",action:"playlist_page_visit",variant:d,label:"dwp",os:(0,G.y)(),context:e,country:l?s:"",sp_t:(0,H.vQ)("sp_t")};a?o.send((0,Q.k)(i)):o.send((0,z.x)(i))}),[d,e,l,s,a,o]);(0,n.useEffect)((()=>{i&&c()}),[c,i])};var ie=a(71318),ae=a(11090),ne=a(64222),te=a(2800),le=a(23255),se=a(20069),re=a(22527),de=a(1740),oe=a(91415),ce=a(71854),me=a(57158);var ue=a(73689),ke=a(39600),pe=a(29673),ve=a(80626),ye=a(47895),Se=a(40234);a(45205);let ge=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),he=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var Ne=a(12895),xe=a(75390);const be=[],fe=(e,i)=>{const a=[];let n=e,t=i;for(;n>0;){const i=Math.ceil(n/t);a.push({first:e-n,nrItems:i}),n-=i,t--}return a},Ce=e=>{const{itemsInNode:i,renderItem:a,renderPlaceholder:n,estimatedHeight:t,scrollNodeRef:l,nrRowsOverscan:s=10,nrInitialInView:r=0,firstIndex:d,heights:o,fanOut:c=2}=e,{ref:m,inView:u,entry:p}=(0,xe.YD)({root:l.current,rootMargin:s*t+"px 0px",initialInView:d<r}),v=`${d}-${i}`;o[v]??=t*i,p?.boundingClientRect?.height&&(o[v]=p.boundingClientRect.height);const y=o[v];return 0===i?null:u?1===i?(0,k.jsx)("div",{ref:m,role:"presentation",children:a(d,y)}):(0,k.jsx)("div",{ref:m,role:"presentation",children:fe(i,c).map((({first:i,nrItems:a},n)=>(0,k.jsx)(Ce,{...e,itemsInNode:a,firstIndex:d+i},n)))}):(0,k.jsx)("div",{ref:m,role:"presentation",children:n(`${y}px`)})},Fe=e=>{const i=(e=>{const i=be.find((i=>i.key===e))?.heights||{},a=(0,n.useCallback)((i=>{if(!e)return;const a=be.findIndex((i=>i.key===e));-1===a?be.push({key:e,heights:i}):(be[a].heights=i,be.push(be.splice(a,1)[0])),be.length>10&&be.shift()}),[e]),t=(0,n.useRef)({...i});return(0,n.useEffect)((()=>()=>{a(t.current)}),[a]),t.current})(e.persistanceKey);return(0,k.jsx)(Ce,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:i,nrInitialInView:e.nrInitialInView})};var Te=a(66514),je=a(3853),Ae=a(64464),Ie=a(82187),Re=a.n(Ie),Ee=a(40688),De=a(6370),Le=a(32394),Pe=a(6936),_e=a(99838),we=a(20580),Ue=a(91023),Ve=a(60046),Me=a(5542),Oe=a(69053),Be=a(3319),Ze=a(22496),Ke=a(41194),We=a(93246),ze=a(65019),Qe=a(23769);var He=a(77861),Je=a(78706),qe=a(44724);const Ge="JgxVj0lHUDTf9MS1jJpk",Ye="m5NcxNs6qkNbc9Wdxed7",Xe=({isExplicit:e,children:i})=>(0,k.jsxs)("div",{className:Ge,children:[e&&(0,k.jsx)(qe.N,{}),(0,k.jsx)(s.x,{variant:"bodySmall",className:Ye,children:i})]});var $e=a(16601),ei=a(61058);const ii="small",ai="ci11tAmTK1LnxThQkXPy",ni="_2sJPwAAp1wY1Ftke6iFe",ti="yuNzasMLs7hvemHI4d8Q",li="abYR6tZoE7BdzThmWTb0",si="GOcKQxqNMhGzbGiAXBig",ri="yFQjuDAhri_egM1pwn70",di=(0,n.memo)((function(e){const{breakpoint:i,className:a,showSeparator:n,...t}=e;return(0,k.jsx)($e.w,{className:Re()(a,ai,{[ri]:n}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:i===ii?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:i===ii?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...t})}));var oi=a(77366),ci=a(29390);const mi=({description:e,children:i})=>(0,k.jsxs)("div",{className:li,children:[e&&(0,k.jsx)(oi.o,{lineClamp:2,as:"div",dir:"auto",children:(0,k.jsx)(ci.w,{asTextContent:!0,html:e})}),i]});var ui=a(61027);const ki=({isPlaying:e,onClickPlay:i,name:a,authorName:n,isLocked:t,children:l})=>(0,k.jsxs)("div",{className:si,children:[(0,k.jsx)("div",{className:ni,children:l}),(0,k.jsx)(ui.f,{size:"small",version:ui.u.secondary,onClick:i,isPlaying:e,ariaPlayLabel:c.ag.get("tracklist.a11y.play",a,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",a,n),locked:t})]});var pi=a(93421),vi=a(11401),yi=a(1134);const Si=({images:e,breakpoint:i,type:a,name:n})=>{const t=(0,yi.TJ)();return(0,k.jsx)(pi.O,{fadeIn:!0,images:t(e,48),shape:pi.K.ROUNDED_CORNERS,size:i===ii?vi.m$.SIZE_64:vi.m$.SIZE_112,iconSize:i===ii?"medium":"xlarge",type:a,title:n,loadingMode:"eager"})};var gi=a(97345);const hi=({children:e})=>(0,k.jsx)(gi.g,{lineClamp:2,as:"div",dir:"auto",children:e});var Ni=a(38338),xi=a(71251),bi=a(97013),fi=a(4576);const Ci="WdYB8aMUe06dOu4TmYik",Fi="b1X4Ya4bp35IsN6tPGZw",Ti="aCdPMQVcvScaa22utIJM",ji=(0,n.memo)((function({book:e,contextUri:i,featureIdentifier:a,sharingInfo:t,uid:r,rating:d,isRecommendation:m=!1,canRemove:u=!1,showSeparator:p=!1,...v}){const{name:y,description:S,isLocked:g,isExplicit:h,images:N,type:x,uri:f,authorName:C,consumptionCapExplanation:F,durationMs:T,topics:j=[],signifierText:A}=e,I=(0,ve.$P)(),{spec:R}=(0,ve.fU)(_e.F,{data:{position:0,uri:f}}),{isPlaying:E,isActive:D,togglePlay:L}=(0,re.n)({uri:f},{featureIdentifier:a}),P=(0,l.s0)(),_=(0,o.EC)(f).toURLPath(!0),{addItems:w}=(0,de.Yv)(i),U=(0,ei.jh)()===ei.Uo.SMALL?"small":"large",V=(e=>{const i=(0,We.z)(),a=(0,Ze.NL)(),t=(0,n.useRef)(null),l=(0,n.useRef)(0),s=(0,ze.Y)((i=>i?.context.uri===e?i?.item?.uri??null:null)),[r]=(0,Qe.z)(1e4,(e=>e?.item?.uri===s)),{data:d}=(0,Ke.a)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=i.getShowPlayedState(e);return l.current=r,a},refetchOnWindowFocus:!1});return(0,n.useEffect)((()=>{t.current&&s!==t.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),t.current=s}),[s,a,e]),(0,n.useMemo)((()=>d&&i.capabilities.canGetShowPlayedState?{state:d.state,playPositionMilliseconds:d.playPositionMilliseconds+r-l.current}:null),[d,i,r])})(f),[M,O]=(0,b.Z)(f),B=(0,Be._)(f),Z=U===ii?"small":"medium",K=(0,n.useCallback)((()=>{I.logInteraction(R.addButtonFactory().hitAddToPlaylist({playlist:i,itemToBeAdded:f})),w([f],{after:"end"})}),[I,R,i,f,w]),W=(0,n.useCallback)((()=>{if(g&&!F)P(_);else{const e=(0,ne.aK)({isPlaying:E,isActive:D,spec:R.playButtonFactory(),logger:I,uri:f});L({loggingParams:e})}}),[F,D,g,E,I,P,R,L,f,_]),z=(0,n.useCallback)((()=>{I.logInteraction(R.genreLinkFactory({uri:j[0].uri??""}).hitUiNavigate({destination:j[0].uri??""}))}),[I,R,j]),Q=(0,k.jsx)(hi,{children:y}),H=(0,k.jsx)(mi,{description:S,children:(0,k.jsxs)(Xe,{isExplicit:!!h,children:[!0===d?.showAverage&&void 0!==d.average&&(0,k.jsxs)("span",{children:[(0,k.jsx)(Ee.u,{size:"xsmall",className:Ci}),c.ag.formatNumber(d.average,{maximumFractionDigits:1})]}),j.at(0)?.title&&(0,k.jsx)(Ve.Link,{className:Fi,to:j[0].uri??"",onClick:z,children:j[0].title}),T&&(0,k.jsx)(Je.E,{isPlaying:!1,fullyPlayed:V?.state===He._N.Completed,durationMs:T,position:V?.playPositionMilliseconds})]})}),J=(0,k.jsx)(Ue.X,{uri:f,uid:r,contextUri:i,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:u}),q=!g&&!!!F,G=m?null:(0,k.jsxs)(ki,{isPlaying:E,onClickPlay:W,isLocked:g&&!F,name:y,authorName:C,children:[(0,k.jsx)(Ni.H,{className:Re()({[ti]:M}),isAdded:M,onClick:()=>{M?I.logInteraction(R.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:f})):I.logInteraction(R.saveToLibraryButtonFactory().hitLike({itemToBeLiked:f})),O(!M)},size:Z,isAudiobook:!0,condensedAll:!0}),(0,k.jsx)(xi.j,{className:Re()({[ti]:(0,Oe.y)(B)}),uri:f,onClick:(e,i)=>{i===Me.mc.ADD&&I.logInteraction(R.downloadButtonFactory().hitDownload({itemToDownload:f}))},size:Z,canDownload:q,condensedAll:!0}),(0,k.jsx)(fi.T,{uri:f,sharingInfo:t??null,interactionData:{intent:"share",type:"click"},size:Z,onClick:()=>{I.logInteraction(R.shareButtonFactory().hitShare({entityToBeShared:f,shareId:t?.shareId??""}))},condensedAll:!0}),(0,k.jsx)(we.yj,{menu:J,children:(0,k.jsx)(bi.z,{label:c.ag.get("more.label.context",y),size:Z,onClick:()=>{I.logInteraction(R.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Y=(0,k.jsx)(Si,{images:N,name:y,type:x,breakpoint:U}),X=A?(0,k.jsx)(s.x,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:A}):null,$=m?(0,k.jsx)(De.P,{size:"small",onClick:K,children:c.ag.get("playlist.extender.button.add")}):null,ee=(0,k.jsxs)(Le.l,{hasTextSeparator:!0,children:[(0,k.jsxs)(k.Fragment,{children:[m&&g&&(0,k.jsx)(Pe.Z,{semanticColor:"textSubdued",title:c.ag.get("mwp.header.content.unavailable"),size:"xsmall",className:Ti}),c.ag.get("card.tag.audiobook")]}),C]});return(0,k.jsx)(we._P,{menu:J,onShow:()=>{I.logInteraction(R.secondaryHitUiReveal())},children:(0,k.jsx)(di,{breakpoint:U,id:`book-${f}`,media:Y,pretitle:X,title:Q,body:H,subtitle:ee,footer:G,trailing:$,onClick:()=>{I.logInteraction(R.hitUiNavigate({destination:f})),P(_)},showSeparator:p,...v})})}));var Ai=a(78734),Ii=a(36199);const Ri=(0,n.createContext)({getReference:()=>null,setReference:()=>{}}),Ei=({children:e})=>{const i=(0,n.useRef)(null),a=(0,n.useCallback)((()=>i.current),[]),t=(0,n.useCallback)((e=>{i.current=e}),[]);return(0,k.jsx)(Ri.Provider,{value:{getReference:a,setReference:t},children:e})};const Di=(e,i,a)=>{const{name:l,uri:s,uid:r}=e,{sortState:d}=(0,n.useContext)(R.Gb),o=d.order!==Ii.kn.NONE,c=(0,_.O)({itemIds:[r],itemUris:[s],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:l,contextUri:i}),{setReference:u,getReference:k}=(0,n.useContext)(Ri),p=(0,n.useCallback)((e=>{u({uri:s,uid:r}),c(e)}),[c,u,r,s]),v=(0,t.I0)(),y=(0,n.useContext)(de.ZF),S=(0,n.useCallback)(((e,a)=>{const n=e[Ai.RN.AUDIOBOOKS];if(!n)return;const t=k();t?a===Ae.Pw.BEFORE?y.move(i,[t],{before:{uri:s,uid:r}}):y.move(i,[t],{after:{uri:s,uid:r}}):a===Ae.Pw.BEFORE?v((0,m.jV)(i,n,{before:{uri:s,uid:r}})):v((0,m.jV)(i,n,{after:{uri:s,uid:r}})),u(null)}),[i,v,k,y,u,r,s]),g=a&&!o?[Ai.RN.AUDIOBOOKS]:[];return{...(0,Ae.WB)({uri:s,id:r,allowedMimeTypesByDropPosition:{[Ae.Pw.BEFORE]:g,[Ae.Pw.AFTER]:g},onDrop:S}),onDragStart:p}},Li="bg5inM_sdkHpYWiFf7Id",Pi="DyW2LAm9YDcCkcdM0eeP",_i=()=>(0,k.jsx)("div",{className:Pi}),wi=(0,n.memo)((function({item:e,contextUri:i,canEdit:a=!1,canRemove:n=!1,index:t}){const{className:l,dropPosition:s,...r}=Di(e,i,a);return(0,k.jsxs)(Ne.B,{className:l,"aria-posinset":t,reRunOnDOMUpdate:!0,children:[s===Ae.Pw.BEFORE&&(0,k.jsx)(_i,{}),(0,k.jsx)(ji,{book:e,contextUri:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:n,className:l,draggable:!0,showSeparator:0!==t,...r}),s===Ae.Pw.AFTER&&(0,k.jsx)(_i,{})]})}));var Ui=a(85987);const Vi=({contextUri:e,initialItems:i,nrItems:a,canEdit:t,canRemove:s,ariaLabel:r})=>{const d=(0,n.useContext)(de.ZF),o=(0,te.Mi)(),{filter:c}=(0,n.useContext)(I.fo),{sortState:m}=(0,n.useContext)(R.Gb),{contentsOptions:u}=(0,Ui.d)(m,c),[,p]=(0,E.d4)(),v=(0,n.useCallback)((async(i,a)=>{const n=await d.getContents(e,{...u,offset:i,limit:a}),t=n.items.map((e=>null===e?null:(0,je.yD)(e)?e:null));return{...n,items:t}}),[d,u,e]),{getItem:y,nrValidItems:S,invalidateCache:g}=(0,Te.Q)({nrItems:a,fetch:v,limit:50,initialItems:i});(0,n.useLayoutEffect)((()=>{p(S)}),[S,p]),(0,de.rZ)(e,g);const h=(0,n.useCallback)((e=>(0,k.jsx)("div",{style:{height:e}})),[]),N=(0,n.useCallback)(((i,a)=>{const n=y(i);return n?(0,k.jsx)(wi,{contextUri:e,item:n,canEdit:t,canRemove:s,index:i},n.uri):h(`${a}px`)}),[t,s,e,y,h]),x="POP"===(0,l.ur)()?0:10;return(0,k.jsx)("div",{className:Li,children:(0,k.jsx)(Ne.l,{firstInteractiveIsWrapper:!0,"aria-label":r,"aria-rowcount":S,"aria-colcount":6,children:(0,k.jsx)(Ei,{children:(0,k.jsx)(Fe,{totalCount:S,estimatedHeight:200,renderItem:N,renderPlaceholder:h,scrollNodeRef:o,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:x})})})})};var Mi=a(87236),Oi=a(13926),Bi=a(45438),Zi=a(92419),Ki=a(58912);const Wi={column:null,order:Ii.kn.NONE},zi=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,scrollToUid:t,usePlayContextItem:l,tracklistDomRef:s,sortableColumns:r,isCompactMode:d=!1}){const o=(0,n.useContext)(de.ZF),{filter:c,setFilter:m}=(0,n.useContext)(I.fo),u=(0,n.useRef)(null),p=(0,n.useCallback)((()=>{u.current&&u.current.update()}),[]);(0,Zi.r)(a,p);const{sortState:v,setSortState:y}=(0,n.useContext)(R.Gb),S=(0,n.useCallback)((e=>{y((0,A.VK)(e,v))}),[v,y]);(0,n.useEffect)((()=>{y(Wi),m("")}),[a,m,y]),(0,n.useEffect)((()=>{u.current&&t&&u.current.scrollToItem({uid:t})}),[t]);const g=(0,n.useCallback)((async(e,i)=>{const n=await o.getContents(a,{offset:e,limit:i,sort:(0,A._j)(v),filter:c,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,o,v,c]),h=(0,n.useCallback)(((e,i)=>{const n=(0,Ki.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(Ii.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:l,isCompactMode:d},i+e.uri)}),[a,l,d]),N=(0,Mi.v)(),x=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,k.jsx)(Bi.JL,{value:"chart-tracklist",children:(0,k.jsx)(Ii.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:r,sortState:v,onSort:S,renderRow:h,resolveItem:x,nrTracks:i,fetchTracks:g,limit:100,canFetchAllTracks:o.getCapabilities().canFetchAllTracks,outerRef:u,outerDomRef:s,columnPersistenceKey:"chart-tracklist",isCompactMode:d,className:Oi.Z.chartTrackList},a)})}));var Qi=a(15842),Hi=a(66205),Ji=a(57562),qi=a(40235),Gi=a(33981),Yi=a(6395),Xi=a(80683),$i=a(57986),ea=a(67408),ia=a(25230),aa=a(66819),na=a(68007),ta=a(31734),la=a(12618),sa=a(27782),ra=a(91731),da=a(39276);const oa={bottomEnd:da.LR.topStart,top:da.LR.bottom},ca=({visible:e,onHide:i,placement:a,children:n,label:t})=>{const l=(0,r.W6)(ye.y);return(0,k.jsx)(sa.x,{placement:a,withPortal:!0,overlay:e&&(0,k.jsx)("div",{className:Re()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":l}),children:(0,k.jsx)(ra.J,{arrow:oa[a],colorSet:"announcement",onClose:i,children:t})}),children:n})};var ma=a(93400),ua=a(24918);let ka=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const pa=({uri:e,label:i,onClick:a,size:n=ka.md})=>{const{onCopyLink:t}=(0,ua.l)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:l,setToggleActivationVisible:s}=(0,ma.I)();return(0,k.jsx)(ca,{visible:l,onHide:()=>s(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(la.ws,{label:i,children:(0,k.jsx)(na.o,{onClick:e=>{a?.(e),t?.()},iconOnly:ta.V,size:n,"aria-hidden":"true","aria-label":i,condensed:!0})})})};var va=a(51837),ya=a(8824),Sa=a(55538);const ga=n.memo((({metadata:e,tracklistDomRef:i,sortableColumns:a})=>{const{hasSpotifyAudiobooks:t}=e,l=t||!1,{spec:s,logger:r}=(0,ve.fU)(va.createDesktopSearchBarEventFactory,{}),d=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().keyStrokeFilter())}),[r,s]),o=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().hitClearFilter())}),[r,s]);return(0,k.jsxs)("div",{className:j.Z.searchBoxContainer,children:[(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(ya.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:d,onClear:o,clearOnEscapeInElementRef:i})}),(0,k.jsx)(Sa.l,{columns:[...a],isBooklist:l})]})}));var ha=a(21705),Na=a(40703),xa=a(97324),ba=a(7863),fa=a(5784),Ca=a(28619),Fa=a(60702);const Ta="Uw4gqTFuHRLn4VKga_bJ",ja="SdECNwBCnmkKl0Q0mJff",Aa="HLkGXLclDq_7guCiD1Xq",Ia="vWR6alsFpTlgXUckErqF",Ra="EbHQLci0cfLjHmS0AKp2",Ea="HzYFPEbZdd6fQW4jfcz4",Da="SQEgwtR2aj51qFj6cMNZ",La="aaNtMSjjJ4cClWoe6K0k",Pa="BhtBJTnsM9AotmyN0MPr",_a="FwoyMQocCMLEafLlvAk5",wa="xcn0geYcJliTHbvcds12",Ua="KptBBI16DBjQBjvPQtlH";function Va(e){const i=(0,n.useRef)(null);return(0,k.jsx)(Na.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(xa.l,{className:Ta,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:Pa,children:[(0,k.jsx)(na.o,{size:"medium","aria-label":"IconX",iconOnly:ba.k,onClick:e.onClose,className:wa}),(0,k.jsx)(na.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Ca.D,className:_a}),(0,k.jsx)("div",{className:ja,children:(0,k.jsxs)("div",{className:Aa,children:[(0,k.jsx)("div",{className:Ra,children:(0,k.jsxs)("div",{className:Ea,children:[(0,k.jsx)(ha.E,{className:Da,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:La,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:Ia,children:[(0,k.jsxs)(s.x,{as:"p",variant:"marginalBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.x,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Ra,children:(0,k.jsx)(Fa.V,{size:"xlarge"})})]})}),(0,k.jsx)("div",{className:Ua,children:(0,k.jsx)(x.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const Ma="nTTPGZGk721M6gfldG43",Oa="BFYSUcA4ifYvgDzOQX5Q",Ba="el9_37CCpYKxCRKDDyww",Za="FB376b7R1M_0YQZ_SahS",Ka="srPBn9_CV0NzQEEzW9f6",Wa="te8Z8OuKxZx1gbjb7_ua",za=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)(Va,{onClose:()=>{a(!1)}}),(0,k.jsx)(Na.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(xa.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.x,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:Ma,children:[(0,k.jsxs)("div",{className:Ba,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(ha.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.x,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:Oa,children:[(0,k.jsx)(na.o,{iconOnly:ba.k,onClick:()=>e(!1),className:Ka}),(0,k.jsx)(na.o,{iconOnly:fa.o,className:Wa,onClick:()=>{a(!0)}})]}),(0,k.jsx)("div",{className:Za,children:(0,k.jsx)(s.x,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Qa="__97AKHEfxNtqFsLai1b",Ha="pzFwHV7jvPlWTI6cG5TV",Ja="iZu1aH8cr2cw98gqmTeo",qa="JRvbfJh7eAZ_1FrQukej";function Ga(){const[e,i]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(za,{setuserView:i}),(0,k.jsxs)("button",{className:Qa,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:Ha,children:[(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:qa,children:[(0,k.jsx)(s.x,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Ya=a(1390),Xa=a(72417);const $a=n.memo((function({playlist:e,capabilities:i,spec:a,isPlaying:t,isActive:l,togglePlay:s,isBooklist:d,isConcert:o=!1,backgroundColor:m,tracklistDomRef:u,sortableColumns:p}){const{metadata:{uri:v,name:y,unfilteredTotalLength:S,isOwnedBySelf:g,canPlay:h,isPublished:N,totalLength:x}}=e,f=(0,W.k)(),C=(0,ve.$P)(),F=(0,n.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),T=i.canFilter&&S>0,A=i.canSort&&S>0,I=S>0,R=(0,r.W6)(Y.v8$),E=(0,r.W6)(Y.MF8,{loadingValue:!1}),D=(0,Xa.Q)(),[L,P]=(0,b.Z)(v),_=(0,K.o)(),w=(0,n.useCallback)((async()=>{_({targetUri:v,intent:L?"unsave":"save",type:"click"});try{await P(!L)}catch{}}),[L,_,P,v]),U=(0,n.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:v,shareId:""});C.logInteraction(e)}),[a,C,v]),V=(0,n.useCallback)((()=>{let e;const i=a.heartButtonFactory();e=L?i.hitUnfollow({itemToBeUnfollowed:v}):i.hitFollow({itemToBeFollowed:v}),C.logInteraction(e),w()}),[a,w,L,C,v]),M=(0,aa.j)(),O=T&&A;return(0,k.jsxs)(Qi.o,{backgroundColor:m,children:[(0,k.jsxs)(Hi.F,{children:[h&&!d?(0,k.jsx)($i.$,{onClick:s,isPlaying:t,size:M,uri:v,ariaPlayLabel:c.ag.get("playlist.a11y.play",y),ariaPauseLabel:c.ag.get("playlist.a11y.pause",y)}):null,D&&x>0&&!d&&(0,k.jsx)(ve.Nh,{spec:F,children:(0,k.jsx)(ia.K,{shuffleContext:Ya.W.playlistActionBar,entityName:y,contextUri:v,isActive:l,activationPlacement:"bottomEnd",size:M})}),g?null:(0,k.jsx)(Yi.r,{children:(0,k.jsx)(Ni.H,{isAdded:!!L,onClick:V,size:M})}),!d&&(0,k.jsx)(Ji.o,{uri:v,isFollowing:!!L,canDownload:I,onClick:(e,i)=>(0,ne.l7)(i,a.downloadButtonFactory(),C,v),onFollow:w,size:M}),(0,k.jsx)(Xi.F,{property:Y.bMb,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&f&&(!d||E)?(0,k.jsx)(pa,{onClick:U,label:c.ag.get("permissions.invite-collaborators",y),uri:v,size:M}):null}),(o||d)&&(0,k.jsx)(fi.T,{uri:v,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:U,size:M}),(0,k.jsx)(qi.y,{onShow:()=>(0,ne.qq)(a,C),menu:(0,k.jsx)(Gi.X,{uri:v,isPublished:N}),children:(0,k.jsx)(bi.z,{label:c.ag.get("more.label.context",y),size:M})}),O?(0,k.jsx)(ve.Nh,{spec:a,children:(0,k.jsx)(ga,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:p})}):(0,k.jsx)("div",{className:j.Z.leadingSlot,children:(0,k.jsx)(Xi.F,{property:Y.FMs,renderNewExperience:()=>(0,k.jsx)(ea.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),R&&(0,k.jsx)(Ga,{})]})}));var en=a(66197);const an=e=>{const i=(0,ve.$P)(),a=(0,n.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),t=(0,ve.Wi)(a);return(0,k.jsxs)("div",{className:j.Z.concertsFooter,children:[(0,k.jsx)(Ve.default,{to:"/concerts",className:j.Z.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});i.logInteraction(e)},children:(0,k.jsxs)("div",{className:j.Z.promoRow,ref:t,children:[(0,k.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:j.Z.promoTitle,children:c.ag.get("concerts.find_more")}),(0,k.jsx)(en.A,{as:"span",selected:!0,children:c.ag.get("concerts.find_nearby")}),(0,k.jsx)("img",{className:j.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,k.jsx)("div",{className:j.Z.disclaimerContainer,children:(0,k.jsx)(s.x,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:c.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var nn=a(57370),tn=a(21523),ln=a(85357);const sn="multiUserAttributionDisplayNamesV2";function rn(e){return(0,je.MW)(e)||(0,je.JF)(e)}function dn(e){return(0,je.MW)(e)||(0,je.JF)(e)||(0,je.yD)(e)}const on=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isMixedMedia:s,isLive:d,isBlend:u,isConcert:p,isBooklist:v,canEdit:y,scrollToUid:S,feedbackPath:g,deleteFeedbackPath:h,usePlayContextItem:N,tracklistRef:x,tracklistDomRef:b,canRemove:f,spec:C,initialItems:F,isCompactMode:T=!1,sortableColumns:j,hasSpotifyAudiobooks:D}){const L=(0,ve.$P)(),P=(0,r.W6)(Y.Kpm),_=(0,n.useContext)(de.ZF),{filter:w}=(0,n.useContext)(I.fo),{sortState:U,setSortState:V}=(0,n.useContext)(R.Gb),M=(0,n.useRef)((()=>{})),[O,B]=(0,n.useState)([]),Z=(0,t.I0)(),K=(0,Mi.v)(),W=(0,n.useCallback)((()=>{x?.current&&x.current.update()}),[x]);(0,de.rZ)(a,W);const z=(0,n.useCallback)(((e,i)=>{V((0,A.VK)(e,U)),L.logInteraction(C.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[V,U,L,C]),Q=(0,n.useCallback)((e=>{M.current(),_.remove(a,e)}),[_,a]),H=(0,n.useCallback)(((e,i,a=!1)=>{f&&(M.current=i,e.length>1&&!a?B(e):Q(e))}),[f,Q]);(0,n.useEffect)((()=>{x?.current&&S&&x.current.scrollToItem({uid:S})}),[S,x]);const J=(0,n.useCallback)((async(e,i)=>{const n=await _.getContents(a,{offset:e,limit:i,sort:(0,A._j)(U),filter:w,decorateFormatListData:!!g||d||u});return{items:n.items,totalLength:n.totalLength}}),[a,_,U,w,g,d,u]),q=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragSort()),n===ln.W.Before?_.move(a,e,{before:t}):_.move(a,e,{after:t}))}),[x,L,C,_,a]),G=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===ln.W.Before?Z((0,m.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):Z((0,m.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[x,L,C,a,Z]),X=(0,n.useCallback)((()=>{_.resync(a)}),[_,a]),$=(0,n.useCallback)(((e,i)=>{let n,t=null;(0,je.JF)(e)?(t=e.show,n=e.images.concat(e.show?.images||[])):(0,je.MW)(e)?(t=e.album,n=e.album?.images):(0,je.yD)(e)&&(n=e.images);const r=(0,Ki.X)(n,{desiredSize:40,desiredLabel:"small"});let d=[];y&&U.order===Ii.kn.NONE&&(d=v?[Ai.RN.AUDIOBOOKS]:[Ai.RN.TRACKS,Ai.RN.LOCAL_TRACKS,Ai.RN.EPISODES,...D?[Ai.RN.AUDIOBOOKS]:[]]);const c="1"===e?.formatListAttributes?.["dislike-feedback-selected"],m=!!(0,je.JF)(e)&&e.podcastSubscription.isUserSubscribed;let S=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled&&!m?S=!0:rn(e)?S=e.isPlayable&&!c:(0,je.yD)(e)&&(S=!0);let x=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled?x=!0:(0,je.yD)(e)&&(x=e.isLocked&&!e.isOutOfMarket);const b=u&&((e,i)=>{const a=[];if(!i)return a;const n=i[sn]?sn:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],d=t.length;for(let e=0;e<d;e++){const i=s[e],n=i&&(0,o.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(c=l[e],c.length>1?[{url:c}]:[]),recsplanation:r[e]})}var c;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;rn(e)?C=e.duration.milliseconds:(0,je.yD)(e)&&(C=e.durationMs||0);let F="";return dn(e)&&(F=e.name),(0,k.jsx)(Ii.dx,{isCompactMode:T,index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:S,duration_ms:C,isPaywalled:x,isUserSubscribed:m,name:F,artists:(0,je.MW)(e)?e.artists:void 0,albumOrShow:t,isExplicit:(dn(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,je.MW)(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:s,isLocal:(0,je.MW)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:_.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,je.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,je.MW)(e)||(0,je.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:q,onInsert:G,usePlayContextItem:N,allowedDropTypes:d,feedbackPath:g,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:h,isDisliked:c,isBlend:u,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:f,onFeedbackClick:X,playlistName:l,isConcert:p,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,je.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,je.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,je.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:y},i+e.uri)}),[y,v,U.order,u,T,a,P,s,_,q,G,N,g,h,f,X,l,p,D]),ee=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ie]=(0,E.d4)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Bi.JL,{value:"playlist-tracklist",children:(0,k.jsx)(Ii.Pv,{isCompactMode:T,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:K,sortableColumns:j,sortState:U,onSort:z,onRemove:H,renderRow:$,resolveItem:ee,nrTracks:i,fetchTracks:J,limit:100,canFetchAllTracks:_.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:b,tracks:F,isConcertPlaylist:p,onNrValidItemsChange:ie,columnPersistenceKey:"playlist-tracklist"},a)}),(0,k.jsx)(tn.h,{title:c.ag.get("playlist.remove_from_playlist",l),isOpen:O.length>0,tracks:O,onClose:e=>{e.stopPropagation(),B([])},onRemove:Q})]})}));var cn=a(30089),mn=a(94260),un=a(92075),kn=a(44246),pn=a(65441);const vn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobookMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescriptionPlain"}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shortName"}},{kind:"Field",name:{kind:"Name",value:"destinationUri"}},{kind:"Field",name:{kind:"Name",value:"contextualName"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"ctaUrl"}},{kind:"Field",name:{kind:"Name",value:"dismiss"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"signifier"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]},yn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAudiobooksMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcasts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}},...vn.definitions]},Sn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},gn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...Sn.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},hn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2Booklists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}}]}}]}}]}}]}}]}},...vn.definitions]},Nn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...Sn.definitions]},xn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...Sn.definitions]};var bn=a(52559);function fn(e){return{type:M.p.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(c.ag.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,bn.P2)(e.accessInfo),isExplicit:e.contentRating?.label===He.KS.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var Cn=a(73928),Fn=a(8696),Tn=a(91054),jn=a(70526);function An(e){return{type:M.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Fn.NS)(e.coverArt)}}function In(e){if("Album"!==e.data.__typename)return null;return An(e.data)}function Rn(e){const i=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(i??[]).map((e=>In(e))).filter(Tn.K)||[]}function En(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:M.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,Fn.NS)(i.visuals.avatarImage)}}function Dn(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:M.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,Fn.NS)(i.coverArt),isExplicit:i.contentRating?.label===Cn.KS.Explicit,is19PlusOnly:i.contentRating?.label===Cn.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function Ln(e){const i=(0,Fn.NS)(e.albumOfTrack?.coverArt||null);return{type:M.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===Cn.KS.Explicit,is19PlusOnly:e.contentRating?.label===Cn.KS.NineteenPlus}}function Pn(e){if("Track"!==e.data.__typename)return null;return Ln(e.data)}function _n(e){return(e?.itemsV2??[]).map((e=>{const i=(0,Fn.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return In(i);case"ArtistResponseWrapper":return En(i);case"EpisodeResponseWrapper":return Dn(i);case"TrackResponseWrapper":return Pn(i);default:return(0,jn._)(i),null}})).filter(Tn.K)||[]}function wn(e){return(e?.itemsV2??[]).map((e=>{const i=(0,Fn.U2)(e,"item");return"AudiobookResponseWrapper"===i.__typename&&"Audiobook"===i.data.__typename?fn(i.data):null})).filter(Tn.K)||[]}const Un=async(e,i,a,n=0,t=10,l=10)=>{const s={term:i,offset:n,limit:t,numberOfTopResults:l};if(a){const a=await e(hn,s),n=a?.data?.searchV2;return n?(r=i,{albums:[],artists:[],episodes:[],tracks:[],topResults:wn(n.topResultsV2)??[],query:r}):null}var r;const d=await e(gn,s),o=d?.data?.searchV2;return o?function(e,i){return{albums:Rn(e.albumsV2)??[],artists:(t=e.artists,((t?.items??[]).map((e=>En(e))).filter(Tn.K)||[])??[]),episodes:(n=e.episodes,((n?.items??[]).map((e=>Dn(e))).filter(Tn.K)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>Pn(e.item))).filter(Tn.K)||[])??[]),topResults:_n(e.topResultsV2)??[],query:i};var a,n,t}(o,i):null},Vn=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Nn,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>Ln(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn._)(i),null}}(s):null},Mn=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(xn,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>An(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>Ln(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn._)(i),null}}(s):null};var On=a(49857),Bn=a(45540);const Zn="playlist-inlineSearchBox-filterInputContainer",Kn="playlist-inlineSearchBox-filterInput",Wn="playlist-inlineSearchBox-overlay",zn="playlist-inlineSearchBox-searchIconContainer",Qn="playlist-inlineSearchBox-searchIcon",Hn="playlist-inlineSearchBox-clearButton",Jn=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),r=(0,n.useRef)(null),d=(0,On.y1)((e=>{i(e)}),200),o=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),d(i)}),[l,d]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,k.jsxs)("div",{className:Zn,role:"search",children:[(0,k.jsx)(s.x,{as:"input",variant:"bodySmall",ref:r,className:Re()(Kn),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:o,onKeyDown:u,onFocus:a,value:t}),(0,k.jsxs)("div",{className:Wn,children:[(0,k.jsx)("span",{className:zn,children:(0,k.jsx)(Bn.j,{size:"small",className:Qn,"aria-hidden":"true"})}),t&&(0,k.jsx)("button",{className:Hn,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(ba.k,{size:"small"})})]})]})})),qn=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Gn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),Yn=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===M.p.TRACK)),n=i.filter((e=>e.type===M.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})]})},Xn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),$n=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),et=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]});var it=a(61815);const at="G2t3w2AAeb5OXp0_GeWs",nt="saVjTFMyWYUz975_tkQm",tt="thi8fNCkEhutRkDC90c0",lt="pHVlkChuJpEnBQyU3ADv",st="ENWs3JxcqtD98_8fbPz2",rt="L8IUKEJL6JiTyE_qUVCc",dt="XcyjdXgsNX0DBt72tfiD",ot="VhJnuS7UcUPfIlzD8dlU",ct="He29vQ5anFj_bJ5iEaI2",mt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:ct,onClick:n,children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==t?(0,k.jsx)("img",{className:tt,src:t,alt:e.name}):null,(0,k.jsxs)("div",{className:dt,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})})};var ut=a(6958);const kt=({size:e})=>(0,k.jsx)("div",{className:nt,children:(0,k.jsx)(ut.a,{size:e})}),pt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:ct,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==t?(0,k.jsx)("img",{className:at,src:t,alt:e.name}):(0,k.jsx)(kt,{size:"small"}),(0,k.jsxs)("div",{className:dt,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})})},vt=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ii.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),yt=({label:e,index:i,isRTL:a,onClick:n})=>(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":e,className:ct,onClick:n,children:[(0,k.jsx)(it.id,{columnIndex:0,className:rt,children:(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e})}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})}),St=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ii.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let gt=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const ht=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:gt.SEARCH,term:i.term,title:""}]}),e),Nt=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:r,term:d,isBooklist:m})=>{let u=e;const p=(e=>e.map((e=>{if(e.type===M.p.TRACK||e.type===M.p.EPISODE){const{uri:i,id:a}=e;return{type:(0,o.wj)(i)?M.p.TRACK:M.p.EPISODE,uri:i,uid:a,provider:null}}return null})).filter(Tn.K))(e),v=(0,_.O)(),{usePlayContextItem:y}=(0,re.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(d)}:${i?.navType??0}`,pages:[{items:p}]},{featureIdentifier:"search"}),S=(0,n.useCallback)(((e,i)=>(0,k.jsx)(yt,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:d,title:e.label})}},e.uri)),[a,l,d]),g=(0,n.useCallback)(((e,i)=>e.type===M.p.ARTIST?(0,k.jsx)(pt,{isRTL:a,index:i,searchResult:e,onClick:()=>{r({navType:gt.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===M.p.EPISODE?(0,k.jsx)(vt,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.TRACK?(0,k.jsx)(St,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.ALBUM?(0,k.jsx)(mt,{index:i,isRTL:a,searchResult:e,onClick:()=>{r({navType:gt.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,k.jsx)(ji,{book:e,featureIdentifier:"playlist_recommendations",contextUri:t,isRecommendation:!0,showSeparator:0!==i},e.uri)),[a,r,t,y]);if(""===d)return(0,k.jsx)("div",{className:j.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,k.jsxs)("div",{className:j.Z.emptyStateContainer,children:[(0,k.jsx)(s.x,{as:"h1",variant:"titleSmall",children:c.ag.get("search.empty-results-title",d)}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("search.empty-results-text")})]});if(i?.navType===gt.SEARCH){const i=[{type:gt.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:gt.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:gt.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return u=e,m?(0,k.jsx)(k.Fragment,{children:u.map(((e,i)=>e&&e.type===M.p.AUDIOBOOK?(0,k.jsx)(ji,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:i=>{v(i,{itemUris:[e.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==i},i):null))}):(0,k.jsx)(qn,{renderRow:g,searchResults:u,renderSeeAllRow:S,seeAllXList:i})}return i?.navType===gt.ALBUM?(0,k.jsx)(Gn,{renderRow:g,searchResults:u}):i?.navType===gt.ARTIST?(0,k.jsx)(Yn,{renderRow:g,searchResults:u}):i?.navType===gt.ALBUMRESULTS?(0,k.jsx)(Xn,{renderRow:g,searchResults:u}):i?.navType===gt.TRACKRESULTS?(0,k.jsx)($n,{renderRow:g,searchResults:u}):i?.navType===gt.ARTISTRESULTS?(0,k.jsx)(et,{renderRow:g,searchResults:u}):null},xt=({playlistUri:e,onCurationModeChange:i,isBooklist:a})=>{const[t,l]=(0,n.useState)([]),[r,d]=(0,n.useState)(),o=(0,kn.S)(),{level:m,changeTerm:u,goBack:p,navToEntity:v,navToResults:y,term:S}=(()=>{const[e,i]=(0,n.useReducer)(ht,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:g}=(0,n.useContext)(pn.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(m)switch(m.navType){case gt.SEARCH:try{if(!r||r.query!==S&&""!==S){const i=await Un(g,S,a);e&&d(i)}else""===S&&l([])}catch{l([])}r&&l(r.topResults);break;case gt.ARTISTRESULTS:r&&l(r?.artists);break;case gt.ALBUMRESULTS:r&&l(r?.albums);break;case gt.TRACKRESULTS:r&&l(r?.tracks);break;case gt.EPISODERESULTS:r&&l(r?.episodes);break;case gt.ALBUM:try{const i=await Vn(g,m.uri,100,0);e&&i&&l(i.tracks)}catch{l([])}break;case gt.ARTIST:try{const i=await Mn(g,m.uri,100,0);e&&i&&l([...i.albums,...i.tracks])}catch{l([])}}})(),()=>{e=!1}}),[m,S,r,g,a]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:j.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:j.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.x,{as:"h1",className:j.Z.playlistInlineCurationTitle,variant:"titleSmall",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Jn,{placeholder:a?c.ag.get("playlist.curation.search_placeholder-booklists"):c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{u(e)}})})]}),(0,k.jsx)("button",{className:j.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,k.jsx)(ba.k,{"aria-label":c.ag.get("close")})})]}),null!==m&&m.navType!==gt.SEARCH?(0,k.jsxs)("button",{className:j.Z.playlistInlineCurationBackButton,onClick:()=>p(),children:[o?(0,k.jsx)(mn.V,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}):(0,k.jsx)(un.e,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",children:m.title})]}):null,(0,k.jsx)("div",{className:j.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(Nt,{playlistUri:e,term:S,level:m,resultList:t,navToEntity:v,navToResults:y,isRTL:o,isBooklist:a})})]})};var bt=a(38965),ft=(a(54487),a(42738)),Ct=a(32167),Ft=a(78024),Tt=a(79096);const jt=3e5;function At(e,i){return["list-extender",e,i]}const It=(e,i,a=10,t)=>{const l=2*a,s=3*a,r=(0,Ze.NL)(),o=(0,n.useRef)(0),[c,m]=(0,n.useState)(e),[u,k]=(0,n.useState)((()=>r.getQueriesData({queryKey:At(e,i),stale:!1}).at(0)?.[1]??[])),p=(0,n.useRef)(u.map((e=>e.uri??""))),{spec:v,logger:y}=(0,ve.fU)(d.T,{data:{uri:e}}),S=(0,n.useMemo)((()=>v.recommendedFactory()),[v]);(0,Tt.F)(Ft.XL.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===Ft.If.ADD?k((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===Ft.If.REMOVE&&k((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))),a.operation!==Ft.If.ADD&&a.operation!==Ft.If.REMOVE||r.invalidateQueries({queryKey:At(e,i)}))}));const g=(0,n.useRef)(!0);(0,n.useEffect)((()=>(g.current||(k([]),m(e),p.current=[],o.current=o.current+1),g.current=!0,()=>{o.current=o.current+1})),[e]),(0,n.useEffect)((()=>{if(u.length<l){const e=Math.min(l,s-u.length),a=o.current,n=At(c,i),d=g.current&&0===p.current.length;(d?r.fetchQuery({queryKey:n,queryFn:()=>t(c,[],e),staleTime:jt,gcTime:jt}):t(c,p.current,e)).then((i=>{if(a!==o.current||!i)return;const t=i.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));i.length<e&&p.current.length?p.current=[]:p.current=[...p.current,...t],k((e=>[...e,...i])),d&&r.setQueryData(n,i)}))}g.current=!1}),[l,s,c,u.length,r,t,i]);const h=(0,n.useCallback)((()=>{if(v){const e=S.refreshButtonFactory().hitRefreshContent();y.logInteraction(e)}k((e=>e.slice(a)))}),[y,S,v,a]);return{recommendations:u.slice(0,a),_bufferedRecommendations:u.slice(a),refresh:h}},Rt=n.memo((function({uri:e}){const{recommendations:i,refresh:a}=((e,i=10)=>{const a=(0,n.useContext)(ft.Z),{request:t}=(0,n.useContext)(pn.Ax),l=(0,n.useCallback)((async(e,i,n)=>{const l=await a.getRecommendedBookUris(e,i,n),s=await t(yn,{uris:l});return s?.data?.podcasts.map((e=>"Audiobook"===e.__typename?fn(e):null)).filter(Tn.K)??[]}),[a,t]);return It(e,"book",i,l)})(e),t=(0,_.O)(),l=(0,bt.s)();return l?i?.length&&i.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,k.jsxs)(k.Fragment,{children:[i.map(((i,a)=>i?(0,k.jsx)(ji,{contextUri:e,featureIdentifier:"playlist_recommendations",book:i,sharingInfo:i.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:e=>{t(e,{itemUris:[i.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:i.name})},showSeparator:0!==a},a):null)),(0,k.jsx)(na.o,{className:j.Z.refreshButton,onClick:a,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Et=n.memo((function({playlistUri:e,canEdit:i,tracks:a}){const{usePlayContextItem:t}=(0,re.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:M.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,n.useCallback)(((a,n)=>{const l=a.duration;return(0,k.jsx)(Ii.cp,{index:n,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!a.isMOGEFRestricted,name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:t,durationMs:l,shouldRenderDuration:!i,internalLink:!0},`${n}-${a.uri}`)}),[e,t,i]),s=(0,n.useMemo)((()=>[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADDED_AT,Ii.QD.ADD]),[]),r=(0,n.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),d=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ii.hU,tracks:d,renderRow:l,resolveItem:r,columns:s},`${e}-recommended`)})),Dt=n.memo((function({playlistUri:e,playlistLength:i,canEdit:a}){const{recommendations:t,refresh:l}=((e,i=10)=>{const a=(0,n.useContext)(ft.Z),t=(0,n.useCallback)((async(e,i,n)=>{const t=i.map((e=>Ct.o.from(e).id??""));return a.getRecommendedTracks(e,t,n)}),[a]);return It(e,"track",i,t)})(e),r=!i||0===i,d=(0,bt.s)(),o=`${e}|${m=t,m?m.map((e=>e.uri)):[]}`;var m;ee({context:o,shouldFire:!!t.length});const u=r?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist");return d?t.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:u})]})}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Et,{playlistUri:e,canEdit:a,tracks:t}),(0,k.jsx)(na.o,{className:j.Z.refreshButton,onClick:l,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Lt=n.lazy((()=>a.e(7427).then(a.bind(a,23737)))),Pt=n.lazy((()=>Promise.resolve().then(a.bind(a,28133)))),_t=n.lazy((()=>a.e(1021).then(a.bind(a,73205)))),wt=n.lazy((()=>a.e(5457).then(a.bind(a,43776)))),Ut=new Set([]),Vt=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:u,images:p,totalLength:v,unfilteredTotalLength:y,isOwnedBySelf:N,hasEpisodes:x,canAdd:b,canRemove:f,formatListData:C,hasDateAdded:F,collaborators:T,isPublished:V,hasSpotifyAudiobooks:M,hasSpotifyTracks:O},contents:{items:z}}=e,{spec:Q,logger:H,UBIFragment:J}=(0,ve.fU)(d.T,{data:{uri:a}}),q=(0,W.k)(),G=(0,r.W6)(ye.OC,{loadingValue:!1}),X=(0,r.W6)(ye.MF,{loadingValue:!1}),le=(0,r.W6)(Y.OBF,{loadingValue:!1}),{isCompactMode:ue}=(0,P.mJ)(),Ne=n.useMemo((()=>Q.headerFactory()),[Q]),xe=n.useMemo((()=>Q.tracklistFactory()),[Q]),be=n.useMemo((()=>Q.actionBarFactory()),[Q]),fe="chart"===C?.type,Ce="concerts-near-you"===C?.type&&G,Fe="live-streams"===C?.type,Te=["blend","celebrity-blend","friends-mix"].indexOf(C?.type||"")>-1,je=[O,x,M].filter(Boolean).length>1,Ae=!je&&!!M&&(0,cn.V)(z),Ie="artistsets"===C?.type||"this-is"===C?.attributes["editorial.series"],Re=C?.attributes||{},Ee=Re.header_image_url_desktop||Re.image_url||null,De=b&&f,{inlineCurationModeIsOn:Le,handleInlineCurationModeChange:Pe}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(te.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(De&&(!Ae||X&&le),y),{productState:_e}=(0,t.v9)($.Gg),we=!!_e&&parseInt(_e.ads,10)>0,Ue="spotify"===e.metadata.owner.username,Ve=(0,t.I0)(),Me=(0,l.ur)(),Oe=(0,l.TH)(),Be=(0,r.W6)(Y.XPU,{loadingValue:!1}),Ze=(0,r.W6)(Y.wAP,{loadingValue:!1}),Ke=(0,r.W6)(Y.bys,{loadingValue:!1}),We=(0,L.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*se.y,enabled:Ie}).data?.playlistV2,ze="Playlist"===We?.__typename?We.artistsOnTour?.[0]:null,Qe=Ke&&"Playlist"===We?.__typename?We.concerts?.items.map((e=>e.data)):null,He=Qe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const i=[e.location.name,e.location.city].join(c.ag.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:i,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),Je="POP"!==Me?new URLSearchParams(Oe.search).get("uid"):null,qe=(0,K.o)(),{filter:Ge}=(0,n.useContext)(I.fo),{sortState:Ye}=(0,n.useContext)(R.Gb),Xe=(0,n.useContext)(de.ZF),$e=(0,n.useRef)(null),ei=(0,n.useRef)(null),[ii]=p,ai=(0,ie.Z)(null!==Ee?Ee:ii?.url||null),{isPlaying:ni,isActive:ti,togglePlay:li,usePlayContextItem:si}=(0,re.n)(function(e,i,a){const n={uri:e};return(0,oe.R)(n,i),(0,ce.I)(n,(0,me.cj)(a)),n}(a,(0,A._j)(Ye),Ge),{featureIdentifier:"playlist"}),ri=(0,n.useCallback)((()=>{const e=(0,ne.aK)({isPlaying:ni,isActive:ti,spec:be.playButtonFactory(),logger:H,uri:a});li({loggingParams:e})}),[ni,ti,li,be,H,a]),di=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,o.EC)(e))).filter((e=>null!==e&&((0,o.wj)(e)||(0,o.hn)(e)||(0,o.dB)(e))));if(i.length>0&&b){const e=i.map((e=>e.toURI())),n=$e.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Ve((0,m.jV)(a,e,t))}}),[b,Ve,a]);(0,ae.aw)(di);const oi=(0,n.useCallback)(((e,i)=>{const n=[...i[_.a[o.JM.TRACK]]||[],...i[_.a[o.JM.LOCAL_TRACK]]||[],...i[_.a[o.JM.EPISODE]]||[],...i[_.a[o.JM.ALBUM]]||[]];n.length>0&&b&&(H.logInteraction(Q.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Ve((0,m.jV)(a,n)),qe({targetUri:a,intent:"add",type:"drop"}))}),[b,H,Q,a,Ve,qe]),ci=(0,ke.vI)(Se.k.RichPlaylistPages,Oe),mi=(0,o.EC)(a)?.id;(e=>{const i=(0,t.I0)(),a=(0,w.E)(),l=(0,t.v9)(B);(0,n.useEffect)((()=>{a&&e!==l&&i((0,U.jZ)(e))}),[e,l,i,a])})(a);const ui=(0,t.v9)(Z),ki=(({treatment:e,entityId:i,experimentId:a,treatmentVariation:n})=>{if(e&&e[i]){const t=e[i].find((e=>e.experimentId===a));return t?.treatment===n}return!1})({treatment:ui||{},entityId:mi||"",experimentId:ge.RPP,treatmentVariation:he.VARIANT});const pi=!Ue&&(ci||ki)&&0!==y,vi=!Ae&&q&&(De&&!Le||pi),yi=Ae&&X&&le&&q&&(De&&!Le||pi),Si=(!Ae||X&&le)&&N&&q;ee({context:a,shouldFire:!vi});const gi=T?.count??1,[hi]=(0,E.d4)(),Ni="plays"===Re.rank_type,xi=(0,n.useMemo)((()=>(0,A.RG)({isMixedMedia:je,hasEpisodes:x,hasSpotifyAudiobooks:M,hasDateAdded:F,isLive:Fe,isConcert:Ce,isBlend:Te,nrCollaborators:gi,isBooklist:Ae,isCompactMode:ue,isChart:fe,showPlayCount:Ni})),[je,x,M,F,Fe,Ce,Te,gi,Ae,ue,fe,Ni]),bi=(0,n.useMemo)((()=>{let e;return e=Xe.getCapabilities().canSort?Ae?new Set(R.i1):new Set((0,A.yj)(xi)):Ut,e}),[xi,Ae,Xe]),fi=le&&Ae&&!ue;return(0,k.jsxs)(n.Suspense,{fallback:null,children:[(0,k.jsx)(h.$,{children:(0,pe.T5)({playlistName:u,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Ue})}),(0,k.jsx)(g.Z,{types:b&&!Ae?[_.a[o.JM.TRACK],_.a[o.JM.LOCAL_TRACK],_.a[o.JM.EPISODE],_.a[o.JM.ALBUM]]:[],onDrop:oi,children:(0,k.jsxs)("section",{role:"presentation",className:j.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,k.jsx)(nn.s,{metadata:e.metadata,isPlaying:ni,isPublished:V,totalItems:hi,togglePlay:ri,backgroundColor:ai,spec:Ne}),(0,k.jsxs)("div",{className:j.Z.playlistContent,children:[(0,k.jsx)($a,{playlist:e,capabilities:i,spec:be,isPlaying:ni,isActive:ti,togglePlay:ri,isBooklist:Ae,backgroundColor:ai,tracklistDomRef:ei,isConcert:Ce,sortableColumns:bi}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Lt,{formatListData:e.metadata.formatListData})}),!Ke&&ze?.upcomingEventsCount?(0,k.jsx)(Pt,{artistConcertsUri:ze.uri||"",artistImageUrl:ze.imageUrl||"",artistName:ze.title||"",spec:Q}):null,Ke&&!!ze&&He&&He.length>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(_t,{liveEvents:He,artistConcertsUri:ze.uri||"",artistName:ze.title||"",spec:Q})}),(0,k.jsxs)("div",{className:"contentSpacing",children:[we?(0,k.jsx)(S,{playlistUri:a}):null,Be&&we&&Ue?(0,k.jsx)(wt,{uri:a,playlistName:u}):null,e.metadata.hasSpotifyAudiobooks&&Ze&&(0,k.jsxs)("div",{className:j.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),v>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:fi?(0,k.jsx)(Vi,{initialItems:z,contextUri:a,nrItems:v,canEdit:De,canRemove:f,ariaLabel:u}):(0,k.jsx)(J,{spec:xe,children:(0,k.jsx)(D.a,{columns:xi,children:fe?(0,k.jsx)(zi,{ariaLabel:u,nrTracks:v,playlistUri:a,scrollToUid:Je,usePlayContextItem:si,tracklistDomRef:ei,sortableColumns:bi,isCompactMode:ue},a):(0,k.jsx)(on,{ariaLabel:u,nrTracks:v,playlistUri:a,playlistName:u,isMixedMedia:je,isLive:Fe,isConcert:Ce,isBlend:Te,isBooklist:Ae,canEdit:De,scrollToUid:Je,feedbackPath:Re["dislike-endpoint"],deleteFeedbackPath:Re["delete-endpoint"],usePlayContextItem:si,tracklistRef:$e,tracklistDomRef:ei,canRemove:f,spec:xe,initialItems:z,isCompactMode:ue,sortableColumns:bi,hasSpotifyAudiobooks:M??!1},a)})})}),Si&&(0,k.jsx)(n.Suspense,{fallback:null,children:Le?(0,k.jsx)(xt,{playlistUri:a,onCurationModeChange:Pe,isBooklist:Ae}):(0,k.jsx)("button",{className:j.Z.seeMore,onClick:()=>{Pe(!0)},children:(0,k.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:c.ag.get("playlist.curation.find_more")})})}),vi?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(Dt,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:De})}):null,yi?(0,k.jsx)(Rt,{uri:a}):null]})]}),Ce&&(0,k.jsx)(an,{spec:Q.footerSectionFactory()})]})})]})})),Mt=n.memo((function({uri:e}){const i=(0,n.useContext)(de.ZF).getCapabilities(),{filter:a}=(0,n.useContext)(I.fo),{sortState:t}=(0,n.useContext)(R.Gb),{metadataOptions:l,contentsOptions:s}=(0,Ui.d)(t,a),{data:r,isLoading:d,isError:o}=(0,ue.Z)(e,l,s);return!r||d?(0,k.jsx)(T.h,{hasError:o,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline}):r.metadata.permissions&&!r.metadata.permissions.canView?(0,k.jsx)(F,{uri:e}):(0,k.jsx)(Vt,{playlist:r,capabilities:i})})),Ot=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,o.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(le.fd,{surface:le.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(R.kz,{uri:i,children:(0,k.jsx)(I.hz,{uri:i,children:(0,k.jsx)(E.Y4,{children:(0,k.jsx)(Mt,{uri:i})})})})})}},39600:(e,i,a)=>{a.d(i,{vI:()=>n});a(86277);const n=(e,i)=>{const a=i?new URLSearchParams(i.search):void 0;return"1"===a?.get(e)}},40234:(e,i,a)=>{a.d(i,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})},97607:(e,i,a)=>{a.d(i,{Z:()=>n});const n={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map