"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7521],{81952:(e,t,i)=>{i.d(t,{I:()=>A});var s=i(80552),n=i(50959),a=i(85648),r=(i(46758),i(53321),i(45205),i(27082),i(86277),i(2836),i(82187)),l=i.n(r),u=i(75802),o=i(69736),c=i(87025),d=i(80859),m=i(20580),x=i(49857),h=i(2800),p=i(76981);var g=i(6807),y=i(14892);const f="main-topBar-contentArea",j="queue-tabBar-headerIsCentered",b="queue-tabBar-headerItem",v="queue-tabBar-moreButton",k="queue-tabBar-moreButtonActive",C="yxf_6IsQEmHjijEBUMTP",N="queue-tabBar-active",I="queue-tabBar-headerItemLink",w="queue-tabBar-header",P="queue-tabBar-chevron";var S=i(11527);const U=({items:e,activeItemId:t})=>(0,S.jsx)(g.v,{children:e.map((e=>e.disabled?(0,S.jsx)(y.s,{disabled:!0,role:"menuitemradio",className:C,onClick:e.handleClick,children:e.title},e.uri):(0,S.jsx)(y.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>l()(C,{[N]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var E=i(64634);const q=(0,n.memo)((function({isCentered:e,links:t,landmarkLabel:i,className:s}){const r=(0,n.useRef)(null),[g,y]=(0,n.useState)([]),[C,q]=(0,n.useState)(0),[O,F]=(0,n.useState)([]),R=function(){const[e,t]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:i}=(0,n.useContext)(h.VX),s=(0,x.y1)((e=>{e?.width&&t(e.width)}),250);return(0,p.y)({refOrElement:i,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:L}=(0,u.TH)(),Q=t.find((e=>e.to===L));return(0,n.useEffect)((()=>{r.current&&q(r.current.clientWidth)}),[R]),(0,n.useEffect)((()=>{if(!r.current)return;const e=Array.from(r.current.children).map((e=>e.clientWidth));y(e)}),[t]),(0,n.useEffect)((()=>{if(!r.current)return;if(g.slice(0,-1).reduce(((e,t)=>e+t),0)<=C)return void F([]);const e=g.reduce(((e,t)=>e>t?e:t),0),t=[];let i=e;g.forEach(((e,s)=>{C>=i+e?i+=e:t.push(s)})),F(t)}),[C,g]),(0,S.jsx)("nav",{className:l()(s,f),"aria-label":i,children:(0,S.jsxs)("ul",{className:e?j:w,ref:r,children:[t.filter(((e,t)=>!O.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,S.jsx)(n.Fragment,{children:t((0,S.jsx)("li",{className:b,children:e.disabled?(0,S.jsx)("div",{className:I,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})}):(0,S.jsx)(E.O,{end:!0,className:({isActive:e})=>l()(I,{[N]:e}),to:e.to,onClick:e.handleClick,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),O.length||0===g.length?(0,S.jsx)("li",{className:b,children:(0,S.jsx)(m.xV,{renderInline:!0,menu:(0,S.jsx)(U,{items:t.filter(((e,t)=>O.includes(t))),activeItemId:Q?.itemId}),children:(e,t,i)=>(0,S.jsxs)("button",{className:l()(v,{[k]:Q}),type:"button",onClick:t,ref:i,children:[(0,S.jsx)(o.x,{variant:"bodySmallBold",children:Q?Q.title:a.ag.get("more")}),e?(0,S.jsx)(c.U,{size:"small",className:P,"aria-hidden":"true"}):(0,S.jsx)(d.i,{size:"small",className:P,"aria-hidden":"true"})]})})}):null]})})}));var O=i(8885),F=i(64847),R=i(98271);const L="queue-tabBar-nav",Q=()=>{const e=(0,R.Y)(),t=(0,n.useCallback)((e=>(0,S.jsx)(F.v,{placement:"bottomEnd",arrow:"topStart",title:a.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),i=(0,n.useMemo)((()=>[{title:a.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:t,disabled:e},{title:a.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,t]);return(0,S.jsx)(O.w,{children:(0,S.jsx)(q,{className:L,links:i})})},A=({children:e})=>{const t=(0,s.nF)();return(0,S.jsxs)("section",{className:"contentSpacing",children:[e,t&&(0,S.jsx)(Q,{})]})}},73040:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var s=i(50959),n=i(82187),a=i.n(n),r=i(69736),l=i(15304),u=i(75095),o=i(85648),c=i(41038),d=i(60046),m=i(37523),x=i(45438),h=i(8570),p=i(22527),g=i(80626),y=i(6370),f=i(11527);const j=({onClick:e})=>(0,f.jsx)(y.P,{onClick:e,size:"small",children:o.ag.get("queue.clear-queue")});var b=i(16626),v=i(94853),k=i(91295),C=i(36199),N=i(39131),I=i(13734),w=i(17162),P=i(98692),S=i(82857),U=i(58912),E=i(84573);const q=s.memo((function({tracks:e,ariaLabel:t,contextUri:i,currentlyPlayingContextUri:n=i,rowNumberOffset:a=0,section:r,usePlayContextItem:l}){const u=(0,I.o)(),c=(0,h.g)(),d=(0,s.useCallback)(((e,t)=>{u({intent:"remove-from-queue",type:"click"}),c.removeFromQueue(e).then(t)}),[c,u]),m=(0,s.useCallback)(((e,t)=>{if((0,P.iw)(e)){const s=(0,U.X)(e.show?.images,{desiredSize:40});return(0,f.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.EPISODE,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,P.G7)(e)){const s=(0,U.X)(e.images||void 0,{desiredSize:40});return(0,f.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.CHAPTER,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,P.k6)(e)){const s=(0,U.X)(e.images||void 0,{desiredSize:40});return(0,f.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??o.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.AD,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${t}${a}${e.uid}`)}if((0,P.G_)(e)||(0,P.RB)(e)){const s=(0,U.X)(e?.album?.images,{desiredSize:40}),u=e.type===S.p.TRACK?e:null;return(0,f.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:u?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:u?.is19PlusOnly??!1,type:u?.isLocal?E.j.LOCAL:E.j.TRACK,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,N.$)(e),trackContextUri:e.metadata?.context_uri??n},`${t}${a}${e.uid}`)}return(0,f.jsx)(C.Lb,{height:`${C.dN}px`})}),[a,i,n,r,l]),x=(0,s.useMemo)((()=>[C.QD.INDEX,C.QD.TITLE_AND_ARTIST,C.QD.ALBUM,C.QD.DURATION]),[]),p=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,f.jsx)(C.Pv,{ariaLabel:t,tracks:e,nrTracks:e.length,onRemove:d,renderRow:m,resolveItem:p,columns:x})}));var O=i(25598);const F="queue-queuePage-queuePage",R="queue-queuePage-header",L="queue-queuePage-subHeader",Q="queue-queuePage-nextFrom",A="queue-queuePage-nextInQueue",D=()=>{const{uri:e,description:t,current:i,nextUp:n,queued:y,isEmpty:C,hasQueuedTracks:N,hasNextTracks:I}=(0,O.y)(),{spec:w,logger:P,UBIFragment:S}=(0,g.fU)(l.z,{data:{identifier:u.Wg.NOWPLAYING_QUEUE,uri:e??""}}),U=(0,s.useMemo)((()=>w.nowPlayingSectionFactory()),[w]),E=(0,s.useMemo)((()=>w.nextInQueueSectionFactory()),[w]),D=(0,s.useMemo)((()=>w.nextFromSectionFactory()),[w]),M=(0,h.g)(),[$,T]=(0,s.useState)(!1),B=(0,s.useCallback)((()=>{T(!1)}),[T]),_=(0,s.useCallback)((()=>{M.clearQueue(),T(!1)}),[M]),G=(0,s.useCallback)((()=>{let e;const t=E.clearQueueButtonFactory();y.length>0&&(e=t.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:y.length}),P.logInteraction(e))}),[P,E,y.length]),z=(0,s.useCallback)((async()=>{G(),T(!0)}),[G]),{usePlayContextItem:H}=(0,p.n)({uri:e??""},{featureIdentifier:"queue"}),W=(0,s.useCallback)((async()=>{if(!I)return;const t=w.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});P.logInteraction(t)}),[I,P,w,e]);return C?(0,f.jsx)(v.Q,{}):(0,f.jsxs)("div",{className:F,children:[(0,f.jsx)(c.$,{children:o.ag.get("queue.page-title")}),(0,f.jsx)(S,{spec:w,children:(0,f.jsx)(m.A,{className:R,emptyStateComponent:(0,f.jsx)(r.x,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:R,children:o.ag.get("playback-control.queue")})})}),i&&e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:L,children:o.ag.get("queue.now-playing")}),(0,f.jsx)(S,{spec:U,children:(0,f.jsx)(x.JL,{value:"now-playing",children:(0,f.jsx)(q,{ariaLabel:o.ag.get("queue.now-playing"),tracks:[i],contextUri:e,section:k.h.NowPlaying,usePlayContextItem:H})})})]}),N&&e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:a()(A,L),children:[(0,f.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:o.ag.get("queue.next-in-queue")}),N&&(0,f.jsx)(j,{onClick:z})]}),(0,f.jsx)(S,{spec:E,children:(0,f.jsx)(x.JL,{value:"next-in-queue",children:(0,f.jsx)(q,{ariaLabel:o.ag.get("queue.next-in-queue"),tracks:y,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:k.h.NextInQueue,usePlayContextItem:H})})})]}),I&&e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:L,children:t&&!(0,O.X)(i)?(0,f.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[o.ag.get("queue.next-from"),"Â ",(0,f.jsx)(d.Link,{className:Q,to:e,onClick:W,children:t})]}):o.ag.get("queue.next-up")}),(0,f.jsx)(S,{spec:D,children:(0,f.jsx)(x.JL,{value:"next-up",children:(0,f.jsx)(q,{ariaLabel:o.ag.get("queue.next-up"),tracks:n,rowNumberOffset:1+(y?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:k.h.NextUp,usePlayContextItem:H})})})]}),(0,f.jsx)(b.$,{itemCount:y?.length||0,isOpen:$,onClose:B,onConfirm:_})]})};var M=i(81952),$=i(98271),T=i(96989);const B=()=>(0,$.Y)()?(0,f.jsx)(T.InstrumentedRedirect,{to:"/history"}):(0,f.jsx)(M.I,{children:(0,f.jsx)(s.Suspense,{fallback:null,children:(0,f.jsx)(D,{})})})}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map