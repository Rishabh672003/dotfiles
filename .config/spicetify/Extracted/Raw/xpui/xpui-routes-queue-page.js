"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7790],{19816:(e,i,t)=>{t.d(i,{U:()=>$});var s=t(30758),a=t(11808),n=t(91204),r=t(97500),l=t.n(r),u=t(9183),o=t(12783),c=t(3869),d=t(96554),m=t(64981),x=t(14294),h=t(66416),p=t(83542);const g="main-topBar-contentArea",y="queue-tabBar-headerIsCentered",j="queue-tabBar-headerItem",b="queue-tabBar-moreButton",f="queue-tabBar-moreButtonActive",v="yxf_6IsQEmHjijEBUMTP",C="queue-tabBar-active",k="queue-tabBar-headerItemLink",N="queue-tabBar-header",P="queue-tabBar-chevron";var E=t(86070);const I=({items:e,activeItemId:i})=>(0,E.jsx)(h.W,{children:e.map((e=>e.disabled?(0,E.jsx)(p.D,{disabled:!0,role:"menuitemradio",className:v,onClick:e.handleClick,children:e.title},e.uri):(0,E.jsx)(p.D,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===i,className:({isActive:e})=>l()(v,{[C]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var R=t(8159),w=t(34629),U=t(26969);const A=(0,s.memo)((function({isCentered:e,links:i,landmarkLabel:t,className:n}){const r=(0,s.useRef)(null),[h,p]=(0,s.useState)([]),[v,A]=(0,s.useState)(0),[S,O]=(0,s.useState)([]),T=function(){const[e,i]=(0,s.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,s.useContext)(w.bi),a=(0,R.YQ)((e=>{e?.width&&i(e.width)}),250);return(0,U.w)({refOrElement:t,observeOnly:"width",onResize:a}),e}()??1/0,{pathname:q}=(0,u.zy)(),Q=i.find((e=>e.to===q));return(0,s.useEffect)((()=>{r.current&&A(r.current.clientWidth)}),[T]),(0,s.useEffect)((()=>{if(!r.current)return;const e=Array.from(r.current.children).map((e=>e.clientWidth));p(e)}),[i]),(0,s.useEffect)((()=>{if(!r.current)return;if(h.slice(0,-1).reduce(((e,i)=>e+i),0)<=v)return void O([]);const e=h.reduce(((e,i)=>e>i?e:i),0),i=[];let t=e;h.forEach(((e,s)=>{v>=t+e?t+=e:i.push(s)})),O(i)}),[v,h]),(0,E.jsx)("nav",{className:l()(n,g),"aria-label":t,children:(0,E.jsxs)("ul",{className:e?y:N,ref:r,children:[i.filter(((e,i)=>!S.includes(i))).map((e=>{const i=e?.render??(e=>e);return(0,E.jsx)(s.Fragment,{children:i((0,E.jsx)("li",{className:j,children:e.disabled?(0,E.jsx)("div",{className:k,children:(0,E.jsx)(o.E,{variant:"bodySmallBold",children:e.title})}):(0,E.jsx)(x.k,{end:!0,className:({isActive:e})=>l()(k,{[C]:e}),to:e.to,onClick:e.handleClick,children:(0,E.jsx)(o.E,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),S.length||0===h.length?(0,E.jsx)("li",{className:j,children:(0,E.jsx)(m.t,{renderInline:!0,menu:(0,E.jsx)(I,{items:i.filter(((e,i)=>S.includes(i))),activeItemId:Q?.itemId}),children:(e,i,t)=>(0,E.jsxs)("button",{className:l()(b,{[f]:Q}),type:"button",onClick:i,ref:t,children:[(0,E.jsx)(o.E,{variant:"bodySmallBold",children:Q?Q.title:a.Ru.get("more")}),e?(0,E.jsx)(c.J,{size:"small",className:P,"aria-hidden":"true"}):(0,E.jsx)(d.y,{size:"small",className:P,"aria-hidden":"true"})]})})}):null]})})}));var S=t(41695),O=t(67848);const T="XfifUos51Clgs5a6nf2m",q=()=>{const e=(0,O.U)(),i=(0,s.useCallback)((e=>(0,E.jsx)(n.u,{placement:"bottomEnd",arrow:"topStart",title:a.Ru.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,s.useMemo)((()=>[{title:a.Ru.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:a.Ru.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,E.jsx)(S.g,{children:(0,E.jsx)(A,{className:T,links:t})})};var Q=t(68361);const $=({children:e})=>{const i=(0,Q.y)();return(0,E.jsxs)("section",{className:"contentSpacing",children:[e,i&&(0,E.jsx)(q,{})]})}},85596:(e,i,t)=>{t.r(i),t.d(i,{default:()=>qe});var s=t(30758),a=t(15891),n=t(97500),r=t.n(n),l=t(12783),u=t(52820),o=t(5800),c=t(11808),d=t(31685),m=t(59996),x=t(49217),h=t(86070);const p=({onClick:e})=>(0,h.jsx)(x.n,{onClick:e,size:"small",children:c.Ru.get("queue.clear-queue")});var g=t(3217),y=t(46353),j=t(96805),b=t(89661),f=t(45546),v=t(46288),C=t(39803),k=t(55665),N=t(61544),P=t(71588),E=t(99686),I=t(58345),R=t(49350),w=t(48100),U=t(39710),A=t(84401),S=t(15739),O=t(9813),T=t(71801),q=t(17930),Q=t(84075),$=t(41609),F=t(72445),L=t(84537),M=t(96849),B=t(6941),D=t(40009),z=t(69905),_=t(92421),G=t(81783),K=t(98912),W=t(12274),Z=t(5159),H=t(471),X=t(30270),Y=t(14627),J=t(48200),V=t(59355),ee=t(58237),ie=t(78074),te=t(95302),se=t(16972),ae=t(99744),ne=t(85993),re=t(17869),le=t(79303),ue=t(72091),oe=t(94672),ce=t(76748);let de=function(e){return e.TRACK="track",e.EPISODE="episode",e.CHAPTER="chapter",e.LOCAL="local",e.AD="ad",e}({});const me=s.memo((function({uri:e,uid:i,contextUri:t,name:a,duration_ms:n,artists:r,index:l,rowNumberOffset:u,imgUrl:o,isExplicit:d,isPlayable:m,isMOGEFRestricted:x,album:p,type:g,section:y,usePlayContextItem:b,isAutoPlay:f=!1,isEnhanced:v,queueSpec:me,trackContextUri:xe}){const he=(0,le.s)(),pe=(0,ae.z)(),{triggerPlay:ge,togglePlay:ye}=b({uid:i,uri:e,index:l}),{spec:je}=(0,ue.r)(k.i,{data:{position:l,reason:"",uri:e}}),{isActive:be,isPlaying:fe}=(0,ne.te)(e),ve=(0,s.useCallback)(((t,s)=>{i?ge({loggingParams:s},(()=>pe.skipToNext({uri:e,uid:i}))):ge({loggingParams:s})}),[pe,ge,e,i]),Ce=(0,s.useCallback)((t=>{i?ye({loggingParams:t},(()=>be?fe?pe.pause():pe.resume():pe.skipToNext({uri:e,uid:i}))):ye({loggingParams:t})}),[pe,ye,e,i,be,fe]),ke=g===de.TRACK,Ne=g===de.EPISODE,Pe=g===de.CHAPTER,Ee=Ne&&"video"===p?.mediaType,Ie=g===de.LOCAL,Re=g===de.AD,we=r?.map((e=>e.name)).join(c.Ru.getSeparator())||"",Ue=(0,se.T)(e),Ae=(0,J.g)(e,m,(0,N.Pk)(e)),{badges:Se,hasBadges:Oe}=(0,oe.b)({downloadAvailability:Ue,isExplicit:d,isMOGEFRestricted:x,isEnhanced:v}),Te=(0,H.X)();let qe;qe=Ne?(0,h.jsx)(I.b,{uri:e,uid:f?void 0:i,showUri:p.uri,contextUri:t}):Pe?(0,h.jsx)(E.r,{uri:e,removeFromQueueData:{uid:f?void 0:i,contextUri:t}}):Ie?(0,h.jsx)(R.A,{uri:e,uid:f?void 0:i,contextUri:t}):Re?null:(0,h.jsx)(w.P,{uri:e,uid:f?void 0:i,albumUri:p.uri,artists:r,contextUri:t,entityContextUri:xe,isSmartRecommendation:v});const Qe=(0,s.useCallback)(((t,s)=>{const{meta:a,uris:n}=t,r=n.map((e=>({uri:e,uid:null})));let l;l=s===K.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},a.section===j.$.NowPlaying?pe.addToQueue(r):a.origin===j.$.NowPlaying?pe.insertIntoQueue(r,l):pe.reorderQueue(r,l)}),[pe,i,e]),$e=(0,s.useCallback)(((t,s)=>{const{items:a}=t;let n;n=s===K.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},pe.reorderQueue(a,n)}),[pe,i,e]),Fe=f?[]:[Y.O[N.NQ.TRACK],Y.O[N.NQ.EPISODE]],{trackPageEnhancedEnabled:Le,trackPageLinksNoLyricsEnabled:Me}=(0,X.Zo)(),Be=ke&&(Le||Me);return(0,h.jsx)(te.pZ,{value:"row",index:l,children:(0,h.jsx)(P.h,{menu:qe,children:(0,h.jsxs)(K.w,{uri:e,contextUri:t,index:l,onTriggerPlay:ve,isActive:y===j.$.NowPlaying&&be,ariaRowIndex:l,isPlayable:Ae,ageRestricted:x,spec:je,dragMetadata:{name:a,createdBy:we,sectionId:y},onInsert:(i,t,s,a,n)=>{Qe({uris:i,dropIndex:t,meta:n},s),me&&he.logInteraction(me.dragAddItemToQueue({itemToAddToQueue:e}))},onMove:(e,i,t,s)=>{$e({items:e,dropIndex:i,meta:s},t),me&&he.logInteraction(me.dragSort())},allowedDropTypes:Fe,children:[(0,h.jsx)(B.y,{ariaColIndex:0,children:(0,h.jsx)($.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",a,we),isPlaying:y===j.$.NowPlaying&&fe,isActive:y===j.$.NowPlaying&&be,spec:je,onClick:(e,i)=>{Ce(i)},children:(0,h.jsx)(L.a,{children:l+u+1})})}),(0,h.jsxs)(D.U,{ariaColIndex:1,children:[(0,h.jsx)(q.e,{src:o,isVideo:Ee,isEpisode:Ne||Pe}),(0,h.jsxs)(Q.l,{children:[(0,h.jsx)(U.R,{enabled:Be,uri:e,children:(0,h.jsx)(G.p,{titleText:a,children:a})}),Oe&&(0,h.jsxs)(O.P,{children:[Se.enhanced&&(0,h.jsx)(C.R,{size:"small",className:ce.A.enhanced,title:c.Ru.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":c.Ru.get("web-player.smart-shuffle.icon-hover-label")}),Se.download&&(0,h.jsx)(V._,{}),Se.explicit&&(0,h.jsx)(ee.g,{}),Se.nineteen&&(0,h.jsx)(ie.q,{className:ce.A.nineteen,size:16})]}),(0,h.jsxs)(_.p,{children:[ke&&(0,h.jsx)(S.l,{artists:r,spec:je}),(Ne||Ie)&&!Ee&&we]})]})]}),(0,h.jsx)(z.o,{ariaColIndex:2,children:(0,h.jsx)(A.g,{nonInteractive:Ie,uri:p.uri,name:p.name,creatorUri:r?.[0]?.uri,spec:je,children:p.name})}),(0,h.jsxs)(M.l,{ariaColIndex:3,children:[v&&Te&&(0,h.jsx)(re.r,{spec:je,children:(0,h.jsx)(Z.o,{className:ce.A.rowFeedback,contextUri:xe,id:i??void 0,uri:e,isActive:y===j.$.NowPlaying&&be})}),!Pe&&!v&&(0,h.jsx)(W.d,{uri:e,type:g}),(0,h.jsx)(T.P,{duration:n}),(0,h.jsx)(F.Y,{menu:qe,label:c.Ru.get("more.label.track",a,we),spec:je})]})]})})})}),((e,i)=>e.uri===i.uri&&e.index===i.index&&e.name===i.name&&e.isEnhanced===i.isEnhanced));var xe=t(10115),he=t(45346),pe=t(1878),ge=t(63135),ye=t(82101),je=t(95421),be=t(95339),fe=t(46159),ve=t(71817),Ce=t(3554);const ke=s.memo((function({tracks:e,ariaLabel:i,contextUri:t,currentlyPlayingContextUri:a=t,rowNumberOffset:n=0,section:r,usePlayContextItem:l}){const u=(0,he.W)(),o=(0,ae.z)(),d=(0,s.useCallback)(((e,i)=>{u({intent:"remove-from-queue",type:"click"}),o.removeFromQueue(e).then(i)}),[o,u]),m=(0,s.useCallback)(((e,i)=>{if((0,je.p)(e)){const s=(0,Ce.g)(e.show?.images,{desiredSize:40});return(0,h.jsx)(me,{index:i,rowNumberOffset:n,imgUrl:s?.url||"",uri:(0,pe.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:de.EPISODE,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${n}${e.uid}`)}if((0,ye.d)(e)){const s=(0,Ce.g)(e.images||void 0,{desiredSize:40});return(0,h.jsx)(me,{index:i,rowNumberOffset:n,imgUrl:s?.url||"",uri:(0,pe.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:de.CHAPTER,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${n}${e.uid}`)}if((0,ge.N)(e)){const s=(0,Ce.g)(e.images||void 0,{desiredSize:40});return(0,h.jsx)(me,{index:i,rowNumberOffset:n,imgUrl:s?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??c.Ru.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:de.AD,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${i}${n}${e.uid}`)}if((0,be.v)(e)||(0,fe.v)(e)){const s=(0,Ce.g)(e?.album?.images,{desiredSize:40}),u=e.type===ve.c.TRACK?e:null;return(0,h.jsx)(me,{index:i,rowNumberOffset:n,imgUrl:s?.url||"",uri:(0,pe.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:u?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:u?.is19PlusOnly??!1,type:u?.isLocal?de.LOCAL:de.TRACK,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,xe.N)(e),trackContextUri:e.metadata?.context_uri??a},`${i}${n}${e.uid}`)}return(0,h.jsx)(b.nd,{height:`${f.FL}px`})}),[n,t,a,r,l]),x=(0,s.useMemo)((()=>[v.$.INDEX,v.$.TITLE_AND_ARTIST,v.$.ALBUM,v.$.DURATION]),[]),p=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,h.jsx)(f.S4,{ariaLabel:i,tracks:e,nrTracks:e.length,onRemove:d,renderRow:m,resolveItem:p,columns:x})}));var Ne=t(78737),Pe=t(54659),Ee=t(42582);const Ie="vLZJk3f3zoMmc3u9QMrc",Re="mP6tR7IgjiamGqpBW5ai",we="LIaQPESoX4ijscRRn3lz",Ue="OXu31j8D4EtomwaNzbsk",Ae="eJ2FGCSzEv3Bta0m2Haf",Se=()=>{const{uri:e,description:i,current:t,nextUp:a,queued:n,isEmpty:x,hasQueuedTracks:b,hasNextTracks:f}=(0,Ne.H)(),{spec:v,logger:C,UBIFragment:k}=(0,ue.r)(u.i,{data:{identifier:o.$h.NOWPLAYING_QUEUE,uri:e??""}}),N=(0,s.useMemo)((()=>v.nowPlayingSectionFactory()),[v]),P=(0,s.useMemo)((()=>v.nextInQueueSectionFactory()),[v]),E=(0,s.useMemo)((()=>v.nextFromSectionFactory()),[v]),I=(0,ae.z)(),[R,w]=(0,s.useState)(!1),U=(0,s.useCallback)((()=>{w(!1)}),[w]),A=(0,s.useCallback)((()=>{I.clearQueue(),w(!1)}),[I]),S=(0,s.useCallback)((()=>{let e;const i=P.clearQueueButtonFactory();n.length>0&&(e=i.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:n.length}),C.logInteraction(e))}),[C,P,n.length]),O=(0,s.useCallback)((async()=>{S(),w(!0)}),[S]),{usePlayContextItem:T}=(0,Ee.P)({uri:e??""},{featureIdentifier:"queue"}),q=(0,s.useCallback)((async()=>{if(!f)return;const i=v.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});C.logInteraction(i)}),[f,C,v,e]);return(0,X.oQ)(X.VW.QueuePage),x?(0,h.jsx)(y.K,{}):(0,h.jsxs)("div",{className:Ie,children:[(0,h.jsx)(d.Q,{children:c.Ru.get("queue.page-title")}),(0,h.jsx)(k,{spec:v,children:(0,h.jsx)(Pe.Z,{className:Re,emptyStateComponent:(0,h.jsx)(l.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:Re,children:c.Ru.get("playback-control.queue")})})}),t&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:we,children:c.Ru.get("queue.now-playing")}),(0,h.jsx)(k,{spec:N,children:(0,h.jsx)(te.pZ,{value:"now-playing",children:(0,h.jsx)(ke,{ariaLabel:c.Ru.get("queue.now-playing"),tracks:[t],contextUri:e,section:j.$.NowPlaying,usePlayContextItem:T})})})]}),b&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:r()(Ae,we),children:[(0,h.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:c.Ru.get("queue.next-in-queue")}),b&&(0,h.jsx)(p,{onClick:O})]}),(0,h.jsx)(k,{spec:P,children:(0,h.jsx)(te.pZ,{value:"next-in-queue",children:(0,h.jsx)(ke,{ariaLabel:c.Ru.get("queue.next-in-queue"),tracks:n,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:j.$.NextInQueue,usePlayContextItem:T})})})]}),f&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:we,children:i&&!(0,Ne.K)(t)?(0,h.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[c.Ru.get("queue.next-from"),"Â ",(0,h.jsx)(m.N,{className:Ue,to:e,onClick:q,children:i})]}):c.Ru.get("queue.next-up")}),(0,h.jsx)(k,{spec:E,children:(0,h.jsx)(te.pZ,{value:"next-up",children:(0,h.jsx)(ke,{ariaLabel:c.Ru.get("queue.next-up"),tracks:a,rowNumberOffset:1+(n?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:j.$.NextUp,usePlayContextItem:T})})})]}),(0,h.jsx)(g.p,{itemCount:n?.length||0,isOpen:R,onClose:U,onConfirm:A})]})};var Oe=t(19816),Te=t(67848);const qe=()=>(0,Te.U)()?(0,h.jsx)(a.$,{to:"/history"}):(0,h.jsx)(Oe.U,{children:(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(Se,{})})})},1878:(e,i,t)=>{t.d(i,{a:()=>s});const s=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map