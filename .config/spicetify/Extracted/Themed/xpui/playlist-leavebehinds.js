"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5457],{65313:(e,s,t)=>{t.d(s,{j:()=>c});var a=t(83687),l=t(30534),r=t(85389),i=t(13803),n=t(60375),u=t(88514),d=t(4637);const c=({leavebehinds:e,surface:s,uri:t,pathname:c,state:o})=>{const h=(0,n.s4)(),f=`${i.ag.get("view.see-all")} (${e.length<=u.fz?i.ag.formatNumber(e.length):i.ag.formatNumber(u.fz)})`;return(0,d.jsx)(a.rU,{to:c,state:o,children:(0,d.jsx)(l.o,{"data-testid":"leavebehinds-see-all",buttonSize:"sm",onClick:()=>{h.send((0,r.a)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:s,uri:t}))},children:f})})}},39308:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(59496),l=t(55411),r=t(44666),i=t(46721),n=t(60375),u=t(47643),d=t(65313),c=t(81252),o=t(25398),h=t(21655);var f=t(18795),v=t(88514),b=t(44090),m=t(4637);const p=({uri:e,playlistName:s})=>{const t=(0,i.EC)(e)?.id,p=(0,l.v9)(b.N),_=p?.some((e=>e.playlistId===t)),g=(0,c.OO)(c.Tg.PLAYLIST),y=(0,l.I0)(),I=(0,n.s4)(),w=(0,l.v9)((e=>e.ads?.musicLeavebehinds?.playlistId)),A=(0,l.v9)((e=>e.ads.musicLeavebehinds.fetchingState)),N=(0,l.v9)(b.v),T=(0,v.eh)();(0,a.useEffect)((()=>{const a=async()=>{if(t&&!_){y((0,f.ZN)(t));try{const t=await(({uri:e,playlistName:s,url:t})=>h.adsCosmos.post(t,{surface:(0,c.OO)(c.Tg.PLAYLIST),uri:e,playlistTitle:s}))({uri:e,playlistName:s,url:T});y((0,f.Gr)((0,v.D7)({requestId:t.requestId,leavebehindAds:t.leavebehindAds},e)))}catch(e){y((0,f.tD)());const s=e;I.send((0,r.v)({error_type:"fetchAdsFailure",error_message:s.name,http_error_code:s.status,surface:g,request_url:T,request_type:"leavebehindAds",ad_content_origin:"music"}))}}};w!==t&&a()}),[y,I,_,w,A,t,s,e,g,T]);const j=(0,a.useMemo)((()=>N.slice(0,v.aV)),[N]);return A===o.I.FETCHED&&N.length>0&&t&&e===N[0].uri?(0,m.jsx)(u.w,{entityType:"music",surface:g,uri:e,leavebehinds:j,seeAllButton:N.length>v.aV?(0,m.jsx)(d.j,{leavebehinds:N,surface:g,pathname:`/playlist/${t}/see-all-ads`,state:{uri:e},uri:e}):null}):null}}}]);
//# sourceMappingURL=playlist-leavebehinds.js.map