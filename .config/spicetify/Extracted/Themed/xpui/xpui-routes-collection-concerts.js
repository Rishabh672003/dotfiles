"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{46913:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(59496),s=a(46721),o=a(13803),r=a(18235),i=a(46580),c=a(2988),l=a(7849),d=a(93058),m=a(28890),g=a(45520);const u="MUiWCNTfb6FcSwVPvQ1V",h="UAk3bMhekwJTV_wIyfsT",p="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",f="N0wgFMDDvCiby4QB5kLJ",x="nloNe2BLRHjz9dxlwfLU",j="FyD0hF1e2PKzRxQ6sYDQ",y="JzXND83mXvcEuntCNR34",N="GR08E4L_rOGljyQQX30R";var _=a(4637);const D=(0,n.memo)((e=>{const{uri:t,title:a,imageUrl:n,date:s,location:o,firstParty:r,onClick:i}=e,D=(0,g.CH)(s);return(0,_.jsxs)(d.Link,{to:t,className:u,"data-testid":"concert-card",onClick:i,children:[n&&(0,_.jsx)(m.Z,{children:(0,_.jsx)("div",{role:"img",className:N,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${n})`}})}),(0,_.jsx)("time",{className:h,dateTime:s,children:(0,_.jsx)(c.D,{as:"div",variant:"mestoBold",children:(0,g.jx)(D)})}),(0,_.jsxs)("div",{className:p,dir:"auto",children:[(0,_.jsx)(c.D,{as:"p",className:y,variant:"mesto",children:[(0,g.FO)(D),(0,g.hK)(D)].join(" • ")}),(0,_.jsx)(c.D,{as:"h2",variant:"cello",weight:"bold",className:v,children:a}),(0,_.jsxs)("div",{className:f,children:[r&&(0,_.jsx)("span",{className:j,children:(0,_.jsx)(l.V,{iconSize:16})}),(0,_.jsx)(c.D,{as:"span",className:x,variant:"mesto","data-testid":"location-name",children:o})]})]})]})})),b=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:c,location:l}=t,d=t.artists[0];return(0,_.jsx)(D,{uri:(0,s.g3)(t.id).toURI(),title:(0,i.ij)(t),imageUrl:d.imageUri,date:t.startDate.localDate,location:a?c:[c,l].join(o.ag.getSeparator()),firstParty:(0,r.$R)(t),onClick:n})}))},18235:(e,t,a)=>{a.d(t,{$R:()=>c,DF:()=>g,Vv:()=>d,ie:()=>u,k9:()=>i,pm:()=>m,sk:()=>l,yI:()=>o});var n=a(85487),s=a(67898);const o=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},r=10;function i(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,r),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,r);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},g=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.Z)(e.from,t.from)&&(0,n.Z)(e.to,t.to)),u=e=>(0,s.Z)(e,{representation:"date"})},51132:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Oa});var n=a(59496),s=a(55411),o=a(31752),r=a(83687),i=a(7962),c=a(78022),l=a(24623),d=a(39286),m=a(30534),g=a(92752),u=a(96131),h=a(97533),p=a(46808),v=a(13803),f=a(72916),x=a(70424),j=a(86857),y=a(92142),N=a(64111),_=a(30549),D=a(67855),b=a(85487),C=a(2988),w=a(72028),k=a(83262),I=a(51961),S=a(94190),L=a(86287),F=a(29360),E=a(22128),U=a(43926),P=a(70097),M=a(7849),O=a(90643),$=a(76937),A=a(25258),G=a(93058),R=a(18235),B=a(45520),W=a(46580);const z="cELOd04or4B6BbTbNWA7",H="CHJYbX33oDik9u4n4ohH",T="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",Q="UUTvdEOH2v_rejoXdl9Z",K="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var oe=a(4637);const re=(0,n.memo)((e=>{const{concert:t,position:a,modalSpec:s}=e,{id:o,venue:r,location:i}=t,c=t.startDate.localDate,l=(0,B.CH)(c),d="ONLINE"===t.category,m=(0,n.useMemo)((()=>s?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[s,a,t]),g=(0,_.$P)();return(0,oe.jsxs)(G.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,oe.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,oe.jsx)(C.D,{as:"div",variant:"finaleBold",className:q,children:(0,B.jw)(l)}),(0,oe.jsx)(C.D,{as:"div",variant:"cello",className:Y,children:(0,B.wf)(l)})]}),(0,oe.jsxs)("div",{className:ee,children:[(0,oe.jsx)(C.D,{as:"div",variant:"violaBold",className:te,"data-testid":"event-title",children:(0,W.Yl)(t)}),(0,oe.jsx)(P.T,{children:(0,B.jx)(l)}),(0,oe.jsxs)(C.D,{as:"div",variant:"viola",className:ae,children:[(0,B.FO)(l)," • ",(0,B.hK)(l)]}),(0,oe.jsx)("span",{className:se,children:(0,R.$R)(t)&&(0,oe.jsx)(M.V,{iconSize:16})}),(0,oe.jsx)(C.D,{as:"div",variant:"viola",className:ne,"data-testid":"event-venue",children:d?r:[r,i].join(v.ag.getSeparator())})]})]},t.id)})),ie=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:o}=e,r=t?.concerts[0]?.concert,i=r?.artists[0],c=(0,n.useMemo)((()=>o?.groupedEventModalFactory({uri:i?.uri||""})),[o,i]),l=(0,_.$P)(),d=(0,_.Wi)(c);if(!t||!r||!i)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,oe.jsx)(A.Z,{contentLabel:v.ag.get("live_events.label"),isOpen:!0,className:z,onRequestClose:m,children:(0,oe.jsxs)("section",{className:H,ref:d,children:[(0,oe.jsx)("div",{className:T,children:(0,oe.jsx)(ce,{"aria-label":v.ag.get("close"),iconOnly:O.k,buttonSize:"sm",onClick:m})}),(0,oe.jsxs)("div",{className:V,children:[(0,oe.jsx)($.E,{height:"48",width:"48",className:Q,src:i.imageUri}),(0,oe.jsxs)("div",{className:K,children:[(0,oe.jsx)(C.D,{as:"h3",variant:"cello",className:Z,"data-testid":"event-venue",children:i.name}),(0,oe.jsx)(C.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${v.ag.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,oe.jsx)(re,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ce=(0,U.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(9102),de=a(48702),me=a(70949);const ge=async()=>(await(0,me.rD)(de.b.getInstance())).body,ue=e=>{const[,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.$0)(de.b.getInstance(),e)).body)(t)},he=e=>{const[,,t]=e.queryKey;return(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,me.ij)(de.b.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(e.pageParam,t)},pe=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.YA)(de.b.getInstance(),void 0,e)).body)(t)},ve=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.wr)(de.b.getInstance(),e)).body)(t)},fe=6e5,xe=/^(\d+)/,je=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},ye=e=>{const t=(()=>{const{location:e}=(0,o.UO)(),[,t]=e?.match(xe)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,r.lr)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:"first_party"===n?{type:"first_party",geonameId:t}:{type:"foryou",geonameId:t}};var Ne=a(77259),_e=a(51009);const De="MVPegsivznZB6gdkcnkH",be="MlK79hskRbFrN2OBjMkl",Ce="VxaXFH9Uq1NU0LtsVhIu",we="UDVDNa40iTSPS9uHCG7Q",ke="vktIWsUczavLRrl4SkRt",Ie="Y1JeRPqrmHKXI1KcstYN",Se="ofURwIKv0qEXJGTraIis",Le="fN_lJHkYih9H3j9YSEzS",Fe="LOJZO2MnGW5dCIawF767",Ee="tyc7QRlEJigVFIAeLGOB",Ue="PoljWhTLU3MKqIx2gSPY",Pe="ajxCNAuBJSgYfKUUBWBT",Me="WR2h2Li5XTrBn_Rdme_k",Oe="WNhsvOyu4doInF525pLE",$e="qSR4imCvzdznIQ4F2kBO",Ae="BCDMgFFqzEyzC1UqkW3t",Ge="jFxUCv1gagc6erXmpgYw",Re="XOS1JS9iDK8dgeF3GeL5",Be="LNAJMvRlTPqWsmZvV7Kg",We="jP10ZUl0Jn2Ijue3fZux",ze="ncN9bwTgIRk6xruAt5T8",He="hKG8XDR5S00bjBAibgbI",Te="XMhrCtHCVSPsNW67vM1m",Ve=(0,n.memo)((e=>{const{geonameId:t,locationName:a,spec:s}=e,[o,r]=(0,n.useState)(!1),i=(0,_.Wi)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{r(!0)},t=()=>{r(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=c,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[c]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)("div",{className:He,ref:i,children:[o&&(0,oe.jsx)($.E,{src:c,className:Te,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(C.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_find_tickets",a)}),(0,oe.jsx)(C.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_view_details")})]})]})})}));var Qe=a(37364),Ke=(a(9722),a(43030)),Ze=a(35385);const Je="eFIu3aQJuKmf6H4Lb18K",Xe="LPNL3DZ89Iisp8TMArD3",qe="moVCbo9Ao5YJ5PsH4Qdz",Ye="URXDMjhb8pQWIDaBrCPC",et="a3oYct1knu9af60A0v6g",tt="qbIrubbolsixlgVkhO5r",at="xHihsEV_0W6kpm0wHsXA",nt="T8po_YH39Q9dhAsLAhec",st={formatCaption:e=>v.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>v.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>v.ag.formatDate(e,{weekday:"short"})},ot=(0,n.memo)((e=>{const{onDone:t,onClose:a,spec:s}=e,[o,r]=(0,n.useState)(e.dateRange),i=(0,Ze.S)(),c=(0,_.Wi)(s),l=(0,_.$P)(),d=new Date,g=(0,R.Vv)(d),u=(0,R.pm)(d),h=(0,R.DF)(o,g),p=(0,R.DF)(o,u);return(0,oe.jsx)("div",{ref:c,children:(0,oe.jsx)(A.Z,{isOpen:!0,children:(0,oe.jsxs)("section",{className:Je,children:[(0,oe.jsx)(m.o,{className:Xe,iconOnly:O.k,size:"small",onClick:a,"aria-label":v.ag.get("close_button_action")}),(0,oe.jsxs)("div",{className:qe,children:[(0,oe.jsx)(C.D,{as:"h3",variant:"cello",children:v.ag.get("live_events.date_picker_dialog_title")}),(0,oe.jsxs)("div",{className:Ye,children:[(0,oe.jsx)(I.A,{className:et,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{r(h?void 0:g),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:et,size:"md",selectedColorSet:"brightAccent",selected:p,onClick:()=>{r(p?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:v.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Qe._W,{mode:"range",selected:o,onSelect:r,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:st,dir:i?"rtl":"ltr",modifiersClassNames:{today:tt}}),(0,oe.jsxs)("div",{className:at,children:[(0,oe.jsx)(m.o,{className:nt,size:"small",onClick:()=>{r(void 0)},disabled:!o?.from,children:v.ag.get("live_events.date_picker_dialog_clear")}),(0,oe.jsx)(Ke.D,{size:"small",onClick:()=>{if(o?.from){const{from:e,to:a}=o;t({from:e,to:a||e})}else t()},children:v.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var rt=a(46721),it=a(46913),ct=a(28890);const lt="pU4WoqT8T6PmtjPbFtK0",dt="FC5Y_KFJ9rJyTpydqtOW",mt="AAYLcavkBdCuebn9AQxT",gt="lYHCmxpdReachiOORWGo",ut="JtKEdtTtcK7s6EpGecaC",ht="XuH9DoZCf0aVJ2BxQkTB",pt="myHDa69cI5CHC8fhIhkG",vt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,B.CH)(t.openingDate),r=(0,B.CH)(t.closingDate),i=t.concerts[0].concert,c=i.artists[0];return(0,oe.jsxs)(m.o,{onClick:s,className:lt,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,oe.jsx)(ct.Z,{children:(0,oe.jsx)("div",{role:"img",className:pt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,oe.jsx)("time",{className:dt,dateTime:o.toISOString(),children:(0,oe.jsx)(C.D,{as:"p",variant:"mestoBold",children:(0,B.Bc)(o,r)})}),(0,oe.jsxs)("div",{className:mt,dir:"auto",children:[(0,oe.jsx)(C.D,{as:"h2",variant:"cello",weight:"bold",className:gt,children:(0,W.ij)(i)}),(0,oe.jsxs)("div",{className:ut,children:[(0,R.sk)(t)&&(0,oe.jsx)("span",{className:ht,children:(0,oe.jsx)(M.V,{iconSize:16})}),(0,oe.jsx)(C.D,{as:"span",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})]})]})]})})),ft=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,rt.g3)(r.id).toURI(),l=(0,_.$P)(),d=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),m=(0,_.Wi)(d),g=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(vt,{event:t,onClick:g})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(it.Z,{concert:r,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),xt="yLIDHkmBrjsAVNMCcFM_",jt="qr_9NXyk7D0t6wclM5R0",yt="mDxkFuOd3TBAQI2gXatq",Nt="AQ8ZFs5U45GPiyJnqEvt",_t="E8DcbdVmmoGfC8R8S1Vw",Dt="wzS5PwxEhferQEdjumt0",bt="E0zwnbwA3HzqNi2BV4eq",Ct=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,B.CH)(t.openingDate),r=(0,B.CH)(t.closingDate),i=t.concerts[0].concert,c=i.artists[0];return(0,oe.jsxs)("div",{className:Dt,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,oe.jsx)($.E,{src:c?.imageUri,alt:"",role:"presentation",className:xt}),(0,oe.jsxs)("div",{className:jt,children:[(0,oe.jsx)(C.D.span,{variant:"cello",className:yt,"data-testid":"event-title",children:(0,W.ij)(i)}),(0,oe.jsx)(C.D.span,{variant:"ballad",className:Nt,children:(0,B.Bc)(o,r)}),(0,oe.jsxs)(C.D.span,{variant:"ballad",className:_t,"data-testid":"event-venue",children:[(0,R.sk)(t)&&(0,oe.jsx)(M.V,{iconSize:16,className:bt}),v.ag.get("concerts.count",t.concerts.length)]})]})]})})),wt=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:s,location:o}=t,r=t.artists[0],i=(0,B.CH)(t.startDate.localDate);return(0,oe.jsxs)(G.Link,{to:`/concert/${t?.id}`,className:Dt,"data-testid":"concert-row",onClick:n,children:[(0,oe.jsx)($.E,{src:r?.imageUri,alt:"",role:"presentation",className:xt}),(0,oe.jsxs)("div",{className:jt,children:[(0,oe.jsx)(C.D.span,{variant:"cello",className:yt,"data-testid":"event-title",children:(0,W.ij)(t)}),(0,oe.jsxs)(C.D.span,{variant:"ballad",className:Nt,children:[(0,B.xE)(i)," • ",(0,B.hK)(i)]}),(0,oe.jsxs)(C.D.span,{variant:"ballad",className:_t,"data-testid":"event-venue",children:[(0,R.$R)(t)&&(0,oe.jsx)(M.V,{iconSize:16,className:bt}),a?s:[s,o].join(v.ag.getSeparator())]})]})]})})),kt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,rt.g3)(r.id).toURI(),l=(0,_.$P)(),d=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),m=(0,_.Wi)(d),g=e=>{o(e)};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(Ct,{event:t,onClick:g})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(wt,{concert:r,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})})),It=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:o,onOpenGroupedEvent:r,layout:i}=e,c=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:1})),[o]),l=(0,_.Wi)(c);return s?(0,oe.jsx)(F.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,oe.jsx)(L.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,oe.jsx)("div",{ref:l,children:t.map((e=>(0,oe.jsxs)("div",{className:Oe,children:["grid"===i&&(0,oe.jsx)(E.P,{total:e.events.length,title:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(ft,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:r},a?.id)}))}),"list"===i&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(C.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:ke,children:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(kt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:r},a?.id)}))]})]},e.date)))}):null})),St={month:"short",day:"numeric"},Lt=e=>{if((0,b.Z)(e.from,e.to))return v.ag.formatDate(e.from,St);return`${v.ag.formatDate(e.from,St)} - ${v.ag.formatDate(e.to,St)}`},Ft=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:i}=e,c=(()=>{const[e]=(0,r.lr)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=je(t),s=je(a);return n&&s&&{from:n,to:s}})(),l=(0,o.s0)(),[,d]=(0,r.lr)(),[m]=(0,r.lr)(),[g,u]=(0,n.useState)(),[h,p]=(0,n.useState)(!1),f=(0,_e.o)(),x=(0,n.useMemo)((()=>a?.headerFactory()),[a]),j=(0,n.useMemo)((()=>a?.datePickerModalFactory()),[a]),y=(0,n.useMemo)((()=>a?.cityInfoFactory()),[a]),N=(0,_.$P)(),{data:D,isLoading:b,hasNextPage:L,isFetchingNextPage:F,fetchNextPage:E}=(U={geonameId:t,startDate:c&&(0,R.ie)(c.from),endDate:c&&(0,R.ie)(c.to)},(0,le.useInfiniteQuery)(["concerts","all",U],he,{staleTime:fe,keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}));var U;const P=(0,n.useMemo)((()=>(0,R.k9)(D?.pages??[])),[D?.pages]),M=D?.pages[0]?.userLocation;(0,n.useEffect)((()=>{M&&i?.(M)}),[M,i]);const O=M||v.ag.get("concerts.default_location"),$=(0,R.Vv)(new Date),A=(0,R.pm)(new Date),G=(0,n.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,R.ie)(e.from),t.endDate=(0,R.ie)(e.to),j)){const e=new URLSearchParams(t).toString();N.logInteraction(j.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}p(!1),d(t),j&&N.logInteraction(j.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[d,j,N]),B=(0,n.useCallback)((e=>{const t={filter:"all"};(0,R.DF)(c,e)||(t.startDate=(0,R.ie)(e.from),t.endDate=(0,R.ie)(e.to)),d(t)}),[c,d]);return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${O}`}),(0,oe.jsxs)("div",{className:Ge,children:[(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{f({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:(0,R.yI)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:O,headerSpec:x}),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(w.P,{className:Ae,iconLeading:k.a,onClick:()=>{p(!0),x&&N.logInteraction(x.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Lt(c):v.ag.get("live_events.date_picker_button_text")}),h&&(0,oe.jsx)(ot,{onClose:()=>{p(!1),j&&N.logInteraction(j.closeButtonFactory().hitUiHide())},onDone:G,dateRange:c,spec:j}),(0,oe.jsx)(I.A,{className:Re,size:"sm",selectedColorSet:"brightAccent",selected:(0,R.DF)(c,$),onClick:()=>{if(B($),x){const e={startDate:(0,R.ie)($.from),endDate:(0,R.ie)($.to)},t=new URLSearchParams(e).toString();N.logInteraction(x.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:Re,size:"sm",selectedColorSet:"brightAccent",selected:(0,R.DF)(c,A),onClick:()=>{if(B(A),x){const e={startDate:(0,R.ie)(A.from),endDate:(0,R.ie)(A.to)},t=new URLSearchParams(e).toString();N.logInteraction(x.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:v.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(It,{isLoading:b,locationName:O,eventGroups:P,onOpenGroupedEvent:e=>{u(e);const t=e.concerts[0]?.concert.artistUris[0];f({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:a,layout:s}),L&&(0,oe.jsx)("div",{className:$e,children:(0,oe.jsx)(w.P,{disabled:F,onClick:()=>{E()},children:v.ag.get("concerts.load_more")})}),(0,oe.jsx)(ie,{event:g,locationName:O,feedSpec:a,onClose:()=>u(void 0)}),(0,oe.jsx)(C.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),D&&D.pages[0]&&D.pages[0].userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:D.pages[0].userLocationGeonameId,locationName:O,spec:y})]})}));var Et=a(95416),Ut=a(1863),Pt=a(99714);const Mt=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:o,feedSpec:r,onOpenGroupedEvent:i,layout:c}=e,l=(0,n.useMemo)((()=>r?.eventSectionFactory({identifier:a,position:s})),[r,a,s]),d=(0,_.Wi)(l);return 0===o.length?null:(0,oe.jsxs)("div",{className:De,ref:d,children:["grid"===c&&(0,oe.jsx)(Pt.ZP,{value:"headered-grid",index:s,children:(0,oe.jsx)(E.P,{total:o.length,title:t,showAll:!0,children:o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(ft,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))})}),"list"===c&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(C.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:ke,children:t}),o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(kt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))]})]})})),Ot=(0,n.memo)((e=>{const{spec:t,layout:a,onLocationNameChange:s}=e,[i,c]=(0,n.useState)(),[l]=(0,r.lr)(),d=(m=e.geonameId,(0,le.useQuery)(["concerts","popular",{geonameId:m}],pe,{staleTime:fe,keepPreviousData:!0}));var m;const g=d.data?.userLocation||v.ag.get("concerts.default_location"),u=(0,n.useMemo)((()=>t?.headerFactory()),[t]),h=(0,o.s0)();return(0,n.useEffect)((()=>{d.data?.userLocation&&s?.(d.data.userLocation)}),[d.data?.userLocation,s]),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${g}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{(0,Et._)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&h({pathname:(0,R.yI)(e.geonameId,e.location),search:`?${l.toString()}`})},locationStr:g,headerSpec:u})}),(0,oe.jsxs)("div",{className:Be,children:[(0,oe.jsx)(C.D,{variant:"celloCanon",semanticColor:"textBase",children:v.ag.get("live_events.for_you_anonymous_heading")}),(0,oe.jsx)(C.D,{variant:"ballad",className:We,semanticColor:"textSubdued",children:v.ag.get("live_events.for_you_anonymous_subheading")}),(0,oe.jsx)(Ke.D,{colorSet:"invertedLight",className:ze,onClick:()=>(0,Ut.L6)(),children:v.ag.get("live_events.sign_up_free")})]}),d.data&&(0,oe.jsx)(Mt,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:0,events:d.data.events,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Et._)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,oe.jsx)(ie,{event:i,locationName:g,feedSpec:t,onClose:()=>c(void 0)}),(0,oe.jsx)(C.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),d.data&&d.data.userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:d.data.userLocationGeonameId,locationName:g})]})}));var $t=a(63558),At=a(1170),Gt=a(55506);const Rt=e=>24===e.length?new Date(e.substring(0,19)):22===e.length?new Date(e.substring(0,16)):new Date(e),Bt=e=>v.ag.formatDate(e,{month:"short",day:"numeric"}),Wt=e=>v.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),zt=(e,t)=>{if(e.toDateString()===t.toDateString())return(e=>v.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}))(e);if(e.getMonth()===t.getMonth()){return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric"})}`}return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric",month:"short"})}`};var Ht=a(79198),Tt=a(69303);const Vt="QYX01DsOaw_MzJWWRL2R",Qt="wpTjIgQz7QkLGlEM2SbD",Kt="nfOfj83N2J77AhkT4NNC",Zt="RVBcsEWqZBqE8LlyMmmT",Jt="M5l3yVBFFsTeGr0FCQ53",Xt="pYZtdiW_JXpCpEpUNBl3",qt="smnK8C6twajPDjNeIZpu",Yt="yEPFml56fHXdbEaxMRxQ",ea="VJN_K93zj5zcQWuKpudd",ta="YvO7J4oC8u1QqRMBY4pg",aa=(0,n.memo)((e=>{const{concert:t,isVirtual:a,spec:s,position:o}=e,r=t?.id,i=(0,rt.g3)(t.id).toURI(),{venue:c,location:l}=t,d=t.artists[0],m=Rt(t.startDate.localDate),g=(0,_.$P)(),u=(0,n.useMemo)((()=>(0,Ht.FV)(e.followers)),[e.followers]),h=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),p=(0,n.useMemo)((()=>(0,At.w)()),[]),f=(0,_.Wi)(h);return(0,oe.jsxs)(G.Link,{to:`/concert/${t.id}`,className:Vt,onClick:()=>{g.logInteraction(h.hitUiNavigate({destination:i}))},ref:f,children:[d.imageUri&&(0,oe.jsx)(ct.Z,{children:(0,oe.jsx)("div",{role:"img",className:Yt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${d.imageUri})`}})}),(0,oe.jsx)("time",{className:Qt,dateTime:t.startDate.localDate,children:(0,oe.jsx)(C.D,{as:"h5",variant:"mestoBold",children:Bt(m)})}),(0,oe.jsxs)("div",{className:Kt,dir:"auto",children:[(0,oe.jsxs)(C.D,{as:"h2",className:qt,variant:"mesto",children:[(0,Gt.FO)(m)," • ",Wt(m)]}),(0,oe.jsx)(C.D,{as:"h2",variant:"cello",weight:"bold",className:Zt,children:(0,Ht.ij)(t)}),(0,oe.jsx)("div",{className:Jt,children:(0,oe.jsx)(C.D,{as:"h2",className:Xt,variant:"mesto","data-testid":"location-name",children:a?c:[c,l].join(v.ag.getSeparator())})})]}),(0,oe.jsxs)("div",{className:ea,onClick:()=>{g.logInteraction(p.hitNoAction())},children:[(0,oe.jsx)(Tt.D,{followers:e.followers,spec:p}),(0,oe.jsx)(C.D,{as:"p",variant:"mesto",className:ta,children:u})]})]})})),na=(0,n.memo)((e=>{const{event:t,onClick:a,spec:s,position:o}=e,r=t.concerts[0].concert?.id,i=(0,rt.g3)(r).toURI(),c=(0,_.$P)(),l=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),d=(0,n.useMemo)((()=>(0,At.w)()),[]),m=(0,n.useCallback)((()=>{c.logInteraction(l.hitUiReveal()),a(t)}),[t,a,l,c]),g=(0,_.Wi)(l),u=Rt(t.openingDate),h=Rt(t.closingDate),p=t.concerts[0].concert,f=p.artists[0],x=(0,n.useMemo)((()=>(0,Ht.FV)(e.followers)),[e.followers]),j=(0,n.useCallback)((()=>{c.logInteraction(d.hitNoAction())}),[c,d]);return(0,oe.jsxs)("div",{onClick:m,className:Vt,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&m()},ref:g,children:[f.imageUri&&(0,oe.jsx)(ct.Z,{children:(0,oe.jsx)("div",{role:"img",className:Yt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${f.imageUri})`}})}),(0,oe.jsx)("time",{className:Qt,dateTime:u.toISOString(),children:(0,oe.jsx)(C.D,{as:"h5",variant:"mestoBold",children:zt(u,h)})}),(0,oe.jsxs)("div",{className:Kt,dir:"auto",children:[(0,oe.jsx)(C.D,{as:"h2",variant:"cello",weight:"bold",className:Zt,children:(0,Ht.ij)(p)}),(0,oe.jsx)("div",{className:Jt,children:(0,oe.jsx)(C.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})})]}),(0,oe.jsxs)("div",{className:ea,onClick:j,children:[(0,oe.jsx)(Tt.D,{followers:e.followers,spec:d}),(0,oe.jsx)(C.D,{as:"p",variant:"mesto",className:ta,children:x})]})]})}));var sa=a(84875),oa=a.n(sa);const ra="LN9pdza5hvbdl1QB8dKo",ia="P6SpMz_j_hH6lfVNSO2w",ca="axY_3UzUiQCQ2Asp0mQt",la="CVhxc8GXvAXDO7De7zal",da="IXXvh3b5U_b8xjeKorvb",ma=n.memo((function({headline:e,className:t,spec:a}){const n=(0,_.Wi)(a.welcomeCardFactory()),s=(0,_.$P)();return(0,oe.jsx)("div",{className:oa()(ra,t),ref:n,onClick:()=>{s.logInteraction(a.welcomeCardFactory().hitNoAction())},children:(0,oe.jsx)("div",{className:oa()(da),children:(0,oe.jsx)(C.D,{as:"p",variant:"cello",className:oa()(la),children:e})})})})),ga=({spec:e})=>(0,oe.jsx)(ma,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-family"),className:ia}),ua=({spec:e})=>(0,oe.jsx)(ma,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-duo"),className:ca});var ha=a(7213),pa=a(99789),va=a(81648),fa=a(5830),xa=a(69860);const ja="pSD8FAzxnwWRFeP817di",ya=n.memo(n.forwardRef((function(e,t){const{className:a,render:s,numberOfElements:o}=e,r=(0,n.useRef)(null),[i,c]=(0,n.useState)({columnCount:-1});(0,n.useImperativeHandle)(t,(()=>r.current));const l=(0,n.useCallback)((()=>{const e=r.current;if(!e||!e.parentElement)return;const t=((e,t)=>{const a=e;return a/t<196?Math.floor((a-24)/196):t})(e.parentElement.offsetWidth,o);c({columnCount:t})}),[o]);(0,xa.y)({refOrElement:r,observeOnly:"width",onResize:()=>{l()}}),(0,n.useLayoutEffect)((()=>{l()}),[l]);const d={"--column-count":`${i.columnCount}`,"--responsive-column-count":""+(i.columnCount-1)};return(0,oe.jsx)("div",{ref:r,className:oa()(ja,a),style:d,children:s(i)})})));ya.displayName="GridContainer";const Na="J16VxLN1EwiAF59N0j9C",_a="_1F6U2s5XM0jZxxOSpm4f",Da="Nafv5vKVkay8bxmKRw05",ba=n.memo((function({title:e,children:t,seeAllUri:a,className:s="",testId:o="component",seeAllLabel:r,onClickShelfTitle:i,onClickShelfSeeAll:c,elementRef:l}){const d=(0,n.useCallback)((({columnCount:e})=>{if(!Array.isArray(t))return(0,oe.jsx)(oe.Fragment,{});const a=n.Children.toArray(t);return(0,oe.jsx)(oe.Fragment,{children:a.filter(((t,a)=>a<e))})}),[t]);return Array.isArray(t)&&0===t.length?null:(0,oe.jsxs)("section",{ref:l,className:oa()(s,Na),"data-testid":`${o}-shelf`,"aria-label":e,children:[(0,oe.jsx)("div",{className:_a,children:(0,oe.jsx)(va.r,{title:e,seeAllUri:a,seeAllLabel:r,onClickTitle:i,onClickSeeAll:c})}),(0,oe.jsx)(ya,{className:oa()(Da),render:d,numberOfElements:n.Children.count(t)})]})}));ba.displayName="BaseShelf";const Ca=e=>(0,oe.jsx)(pa.L,{onError:e=>{(0,fa.vK)(e,"Shelf")},children:(0,oe.jsx)(ba,{...e})});const wa=e=>{const{spec:t}=(0,ha.f)($t.u,{}),a=(0,n.useMemo)((()=>t.concertsShelfContainerFactory({position:e.position})),[t,e.position]),s=(0,_.Wi)(a);return(0,oe.jsx)("div",{"data-testid":"family-duo-concerts-shelf",ref:s,children:(0,oe.jsxs)(Ca,{title:"family"===e.shelfData.planType?v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-family"):v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-duo"),children:["family"===e.shelfData.planType?(0,oe.jsx)(ga,{spec:a}):(0,oe.jsx)(ua,{spec:a}),e.shelfData.concerts.map(((n,s)=>function(e,t,a,n,s){const{concert:o,members:r}=e;return 1===o.concerts.length?(0,oe.jsx)(_.Nh,{spec:n,children:(0,oe.jsx)(aa,{concert:o.concerts[0].concert,followers:r,spec:a,position:s},`concert-card-${o.concerts[0].concert.id}`)}):(0,oe.jsx)(_.Nh,{spec:n,children:(0,oe.jsx)(na,{event:o,onClick:t,followers:r,spec:a,position:s},`concert-grouped-card-${o.location}-${o.artists.join()}`)})}(n,e.onOpenGroupedEvent,a,t,s)))]})})},ka=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:o,onOpenGroupedEvent:r,familyDuoShelfData:i}=e;if(t)return(0,oe.jsx)(F.h,{hasError:!1,errorMessage:""});if(0===a.length)return(0,oe.jsx)(L.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const c=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,oe.jsxs)(oe.Fragment,{children:[i&&(0,oe.jsx)(wa,{shelfData:i,onOpenGroupedEvent:r,position:0}),(0,oe.jsx)(Mt,{title:v.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:i?1:0,events:c.online,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Mt,{title:v.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:i?2:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Mt,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:i?3:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:s,layout:o})]})}));var Ia=a(71619),Sa=a(54940);const La=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:r}=e,i=(0,o.s0)(),[c,l]=(0,n.useState)(),d=(0,_e.o)(),m=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:g,isLoading:u}=(e=>{const t=(0,le.useQueryClient)();return(0,le.useQuery)(["concerts",e],ue,{staleTime:fe,keepPreviousData:!0,onSuccess(a){if(e.geonameId||!a.userLocationGeonameId)return;const n=parseInt(a.userLocationGeonameId,10),s=["concerts",{...e,geonameId:n}];t.setQueryData(s,(()=>a))}})})({geonameId:t});(0,n.useEffect)((()=>{g?.userLocation&&r?.(g.userLocation)}),[g?.userLocation,r]);const p=g?.userLocation||v.ag.get("concerts.default_location");((e={})=>{(0,le.useQuery)(["family-duo-concert-recommendations-aa-test",e],Ia.P,{enabled:(0,h.W6)(Sa.hjm)})})({geonameId:e.geonameId});const{data:f,isFetched:x,isLoading:j}=((e={})=>(0,le.useQuery)(["family-duo-concert-recommendations",e],Ia.P,{enabled:(0,h.W6)(Sa.YCf),retry:!1}))({geonameId:e.geonameId}),y=f&&x,N=(f?.concerts??[]).length>0;return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${p}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&i((0,R.yI)(e.geonameId,e.location))},locationStr:p,headerSpec:m})}),(0,oe.jsx)(ka,{isLoading:u||j,familyDuoShelfData:y&&N?f:void 0,events:g?.events||[],locationName:p,spec:a,onOpenGroupedEvent:e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:c,locationName:p,feedSpec:a,onClose:()=>l(void 0)}),(0,oe.jsx)(C.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),g&&g.userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:g.userLocationGeonameId,locationName:p})]})})),Fa=(0,n.memo)((e=>{const{spec:t,layout:a}=e,n=(0,le.useQuery)("savedConcerts",ge,{keepPreviousData:!1});return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),n.data?.events.length?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Mt,{title:v.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:n.data?.events,feedSpec:t,onOpenGroupedEvent:()=>{},layout:a})}):(0,oe.jsxs)("div",{className:Fe,children:[(0,oe.jsx)(C.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:v.ag.get("concerts_interested_in_live_events")}),(0,oe.jsx)(C.D,{as:"p",className:Me,children:v.ag.get("concerts_no_events_description")}),(0,oe.jsx)(G.default,{to:"/concerts",className:Ee,children:(0,oe.jsx)(w.P,{as:"span",className:Ue,children:v.ag.get("concerts_browse_more_events")})})]}),(0,oe.jsx)(C.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")})]})})),Ea=(0,n.memo)((e=>{const{spec:t,isLoading:a,data:n,onOpenGroupedEvent:s,layout:o}=e;if(a)return(0,oe.jsx)(F.h,{hasError:!1,errorMessage:""});if(!n||0===n.events.length)return(0,oe.jsxs)("div",{className:Fe,children:[(0,oe.jsx)(C.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:v.ag.get("concerts.no_spotify_results_title")}),(0,oe.jsx)(C.D,{as:"p",className:Me,children:v.ag.get("concerts.no_spotify_results_description")})]});const r=(e=>{const t={near:[],other:[]};return e.forEach((e=>{switch(e.source){case"near_first_party":t.near.push(e);break;case"other_first_party":t.other.push(e)}})),t})(n.events);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Mt,{title:v.ag.get("concerts.header.near"),identifier:"spotify_near",position:0,events:r.near,feedSpec:t,onOpenGroupedEvent:s,layout:o}),(0,oe.jsx)(Mt,{title:v.ag.get("concerts.header.other"),identifier:"spotify_other",position:1,events:r.other,feedSpec:t,onOpenGroupedEvent:s,layout:o})]})})),Ua=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:i}=e,c=(0,o.s0)(),[l]=(0,r.lr)(),d=(0,_e.o)(),{data:m,isLoading:g}=(e=>(0,le.useQuery)(["concerts","spotify",{geonameId:e}],ve,{staleTime:fe,keepPreviousData:!0}))(t),[u,h]=(0,n.useState)(),p=(0,n.useMemo)((()=>a.headerFactory()),[a]);(0,n.useEffect)((()=>{m?.userLocation&&i?.(m.userLocation)}),[m?.userLocation,i]);const f=m?.userLocation||v.ag.get("concerts.default_location");return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c({pathname:(0,R.yI)(e.geonameId,e.location),search:`?${l}`})},locationStr:f,headerSpec:p})}),(0,oe.jsx)(Ea,{spec:a,data:m,isLoading:g,onOpenGroupedEvent:e=>{h(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:u,locationName:f,feedSpec:a,onClose:()=>h(void 0)}),(0,oe.jsx)(C.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),m&&m.userLocationGeonameId&&(0,oe.jsx)(Ve,{geonameId:m.userLocationGeonameId,locationName:f})]})})),Pa=i.vI0,Ma={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},Oa=()=>{const{isAnonymous:e}=(0,s.v9)(N.Gg),t=(0,o.TH)(),a=t.pathname+t.search,i=(0,_.$P)(),b=(0,h.W6)(D.tp),[C,w]=(0,n.useState)("grid"),{spec:k}=(0,_.fU)(p.y,{}),I=ye({isAnonymous:e,isInterestedEnabled:b}),S=(0,n.useMemo)((()=>k.headerFactory().liveEventsNavbarFactory({uri:a,reason:I.type})),[k,I,a]),L=(0,_.Wi)(S),[F,E]=(0,n.useState)(),U=e=>{const a=`${t.pathname}?filter=${e}`,n=k.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});i.logInteraction(n)},P=()=>{const e=k.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:C,stateAfterToggle:"grid"===C?"list":"grid"});i.logInteraction(e),w("grid"===C?"list":"grid")},M=e&&F?v.ag.get("live_events.location_concert_tickets",F):v.ag.get("live_events.label");return(0,oe.jsxs)("section",{className:be,children:[(0,oe.jsxs)(x.gF,{size:x.fR.SMALL,backgroundColor:Pa,backgroundImages:[Ma],children:[(0,oe.jsx)(x.sP,{children:(0,oe.jsx)(x.xd,{children:M})}),(0,oe.jsx)(j.W,{children:(0,oe.jsx)(y.i,{text:M})})]}),(0,oe.jsxs)("div",{className:Ce,children:[(0,oe.jsx)(f.I,{backgroundColor:Pa}),(0,oe.jsxs)("div",{className:Se,ref:L,children:[(0,oe.jsx)(c.l,{list:(0,oe.jsx)("nav",{"aria-label":"live events navbar",children:(0,oe.jsxs)(l.F,{children:[(0,oe.jsx)(d.c,{id:"for_you_link",label:v.ag.get("live_events.for_you_tab"),active:"foryou"===I.type,className:Le,component:r.rU,onClick:()=>U("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,oe.jsx)(d.c,{id:"concerts_all_link",label:v.ag.get("live_events.all_events_tab"),active:"all"===I.type,className:Le,component:r.rU,onClick:()=>U("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),(0,oe.jsx)(d.c,{id:"concerts_first_party_link",label:v.ag.get("live_events.spotify_tab"),active:"first_party"===I.type,className:Le,component:r.rU,onClick:()=>U("first_party"),sentenceCase:!0,to:{search:"filter=first_party"}},"first_party"),!e&&b&&(0,oe.jsx)(d.c,{id:"concerts_interested_link",label:v.ag.get("concerts_interested"),active:"saved"===I.type,className:Le,component:r.rU,onClick:()=>U("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),"grid"===C&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_list_layout"),iconOnly:g.d,className:Ie,onClick:P,size:"small"}),"list"===C&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Ie,onClick:P,size:"small"})]}),(0,oe.jsxs)("div",{className:we,children:[e&&"foryou"===I.type&&(0,oe.jsx)(Ot,{geonameId:I.geonameId,spec:k,layout:C,onLocationNameChange:E}),!e&&"foryou"===I.type&&(0,oe.jsx)(La,{geonameId:I.geonameId,spec:k,layout:C,onLocationNameChange:E}),"all"===I.type&&(0,oe.jsx)(Ft,{geonameId:I.geonameId,spec:k,layout:C,onLocationNameChange:E}),"first_party"===I.type&&(0,oe.jsx)(Ua,{geonameId:I.geonameId,spec:k,layout:C,onLocationNameChange:E}),"saved"===I.type&&(0,oe.jsx)(Fa,{spec:k,layout:C})]})]})]})}},71619:(e,t,a)=>{a.d(t,{g:()=>r,P:()=>o});var n=a(48702),s=a(26011);const o=async e=>{const[t,{geonameId:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("GET").withHost(s.gH).withPath("/concerts/").withEndpointIdentifier("/cooper/concerts").withQueryParameters({...t&&{geonameId:t}}).withoutMarket().send())(n.b.getInstance(),a);return o.body},r=async e=>{const[t,{artists:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("POST").withHost(s.gH).withPath("/followers/").withEndpointIdentifier("/cooper/followers").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({artists:t})).withoutMarket().send())(n.b.getInstance(),a);return o.body}},69303:(e,t,a)=>{a.d(t,{D:()=>d});var n=a(59496),s=a(30549);const o="g4AhdK8faqTe7v8VqC3x";var r=a(4637);const i=(0,n.memo)((({alt:e})=>(0,r.jsxs)("svg",{height:8,width:8,"aria-hidden":"true",viewBox:"-8 -8 32 32",className:o,children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("path",{d:"M6.233.371a4.388 4.388 0 0 1 5.002 1.052c.421.459.713.992.904 1.554.143.421.263 1.173.22 1.894-.078 1.322-.638 2.408-1.399 3.316l-.127.152a.75.75 0 0 0 .201 1.13l2.209 1.275a4.75 4.75 0 0 1 2.375 4.114V16H.382v-1.143a4.75 4.75 0 0 1 2.375-4.113l2.209-1.275a.75.75 0 0 0 .201-1.13l-.126-.152c-.761-.908-1.322-1.994-1.4-3.316-.043-.721.077-1.473.22-1.894a4.346 4.346 0 0 1 .904-1.554c.411-.448.91-.807 1.468-1.052zM8 1.5a2.888 2.888 0 0 0-2.13.937 2.85 2.85 0 0 0-.588 1.022c-.077.226-.175.783-.143 1.323.054.921.44 1.712 1.051 2.442l.002.001.127.153a2.25 2.25 0 0 1-.603 3.39l-2.209 1.275A3.25 3.25 0 0 0 1.902 14.5h12.196a3.25 3.25 0 0 0-1.605-2.457l-2.209-1.275a2.25 2.25 0 0 1-.603-3.39l.127-.153.002-.001c.612-.73.997-1.52 1.052-2.442.032-.54-.067-1.097-.144-1.323a2.85 2.85 0 0 0-.588-1.022A2.888 2.888 0 0 0 8 1.5z"})]}))),c="WCQhjx2ZwtN1mwka_4wj",l=e=>{const t=(0,s.$P)(),a=`spotify:user:${e.follower.username}`;return(0,n.useEffect)((()=>{t.logImpression(e.spec.planMemberFactory({identifier:e.follower.memberId,uri:a}).impression())})),e.follower.profileImageUrl?(0,r.jsx)("img",{src:e.follower.profileImageUrl,alt:e.follower.displayName??e.follower.username},`follower-${e.follower.displayName??e.follower.username}`):(0,r.jsx)(i,{alt:e.follower.displayName},`follower-${e.follower.displayName}`)},d=(0,n.memo)((e=>(0,r.jsx)("div",{className:c,children:e.followers.map(((t,a)=>(0,r.jsx)(l,{follower:t,spec:e.spec},`follower-${a}`)))})))},79198:(e,t,a)=>{a.d(t,{FV:()=>r,a4:()=>i,ij:()=>o});var n=a(13803),s=a(4637);const o=e=>{if((e=>!!e.title&&(e.festival||!e.artists.length))(e))return e.title;const t=(e=>e.artists.map((e=>e.name)))(e);return 1===t.length?n.ag.get("concert.header.upcoming_concert_title_1",...t):2===t.length?n.ag.get("concert.header.upcoming_concert_title_2",...t):3===t.length?n.ag.get("concert.header.upcoming_concert_title_3",...t):4===t.length?n.ag.get("concert.header.upcoming_concert_title_4",...t):t.length>4?n.ag.get("concert.header.upcoming_concert_title_more",...t):""},r=e=>1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",e[0].displayName??e[0].username):n.ag.get("web-player.family-duo-concerts-shelf.X-of-your-family-follow",e.length),i=(e,t)=>{const a=e.map(((e,a)=>{const n=`spotify:user:${e.username}`;return(0,s.jsx)("a",{onClick:()=>t(n,e.memberId),href:n,children:e.displayName??e.username},`follower-name-${a}`)}));return 1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",a[0]):2===e.length?n.ag.get("web-player.family-duo-concerts-shelf.2-follow",...a):3===e.length?n.ag.get("web-player.family-duo-concerts-shelf.3-follow",...a):4===e.length?n.ag.get("web-player.family-duo-concerts-shelf.4-follow",...a):n.ag.get("web-player.family-duo-concerts-shelf.5-follow",...a)}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map