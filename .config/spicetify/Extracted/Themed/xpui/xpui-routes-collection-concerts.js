"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{36190:(e,n,t)=>{t.d(n,{Z:()=>N});var s=t(59496),a=t(39222),o=t(61742),c=t(33658),r=t(51114),i=t(20762),l=t(19462),d=t(24747);const m="MUiWCNTfb6FcSwVPvQ1V",g="UAk3bMhekwJTV_wIyfsT",v="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",h="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",x="JzXND83mXvcEuntCNR34",j="GR08E4L_rOGljyQQX30R";var f=t(4637);const N=(0,s.memo)((e=>{const{concert:n,isVirtual:t,onClick:s}=e,{venue:N,location:y}=n,b=n.artists[0],_=(0,l.CH)(n.startDate.localDate);return(0,f.jsxs)(c.Link,{to:`/concert/${n.id}`,className:m,onClick:s,children:[b.imageUri&&(0,f.jsx)(r.Z,{children:(0,f.jsx)("div",{role:"img",className:j,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${b.imageUri})`}})}),(0,f.jsx)("time",{className:g,dateTime:n.startDate.localDate,children:(0,f.jsx)(a.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(_)})}),(0,f.jsxs)("div",{className:v,dir:"auto",children:[(0,f.jsxs)(a.D,{as:"h2",className:x,variant:"mesto",children:[(0,i.FO)(_)," • ",(0,l.hK)(_)]}),(0,f.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:u,children:(0,d.ij)(n)}),(0,f.jsx)("div",{className:h,children:(0,f.jsx)(a.D,{as:"h2",className:p,variant:"mesto","data-testid":"location-name",children:t?N:[N,y].join(o.ag.getSeparator())})})]})]})}))},1311:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ve});var s=t(59496),a=t(84875),o=t.n(a),c=t(90641),r=t(92053),i=t(76229),l=t(21615),d=t(67745),m=t(12039),g=t(74424),v=t(39222),u=t(78087),h=t(94088),p=t(61742),x=t(57110),j=t(12757),f=t(20700),N=t(96223),y=t(1206),b=t(62554),_=t(72582),I=t(12791),k=t(6162),C=t(79953),S=t(94322),D=t(97200),F=t(39493),w=t(77310),O=t(56851),U=t(95813),L=t(43178),E=t(7441),G=t(33658),H=t(19462),M=t(24747);const P="cELOd04or4B6BbTbNWA7",W="CHJYbX33oDik9u4n4ohH",A="woQ0wEe6FL4lsGW05bsb",B="KTDREr8pDWjrmnzXzZ2z",T="UUTvdEOH2v_rejoXdl9Z",R="cBbTozR921ppaoNZP0Uh",$="SNyyQ0t_VvlWzzB9li7v",Z="lwO4iko6mhCUgZN1s9AW",z="akvZI06vqHOow1pOL29J",Q="WWZp3WM0maWJzl2qWEHE",J="YdkAHxbDekz9SiAxHG6M",K="AK37djOBJ2BuJOGuG1kQ",V="JfYURQbEA_ntMsMZV6tK",q="du0mOGaZfHg3hsHwRMIu",X="Rvzy4ltiiHIp9mvlxf0c";var Y=t(4637);const ee=(0,s.memo)((e=>{const{concert:n,position:t,modalSpec:a}=e,{id:o,venue:c,location:r}=n,i=n.startDate.localDate,l=(0,H.CH)(i),d="ONLINE"===n.category,m=(0,s.useMemo)((()=>a?.eventRowFactory({position:t,uri:`spotify:concert:${n.id}`})),[a,t,n]),g=(0,b.$P)();return(0,Y.jsxs)(G.Link,{to:`/concert/${n.id}`,className:Z,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,Y.jsxs)("div",{className:z,"aria-hidden":!0,children:[(0,Y.jsx)(v.D,{as:"h5",variant:"mestoBold",className:Q,children:(0,H.jw)(l)}),(0,Y.jsx)(v.D,{as:"h1",variant:"cello",className:J,children:(0,H.wf)(l)})]}),(0,Y.jsxs)("div",{className:K,children:[(0,Y.jsx)(v.D,{as:"div",variant:"violaBold",className:V,"data-testid":"event-title",children:(0,M.Yl)(n)}),(0,Y.jsx)(w.T,{children:(0,H.jx)(l)}),(0,Y.jsxs)(v.D,{as:"div",variant:"viola",className:q,children:[(0,H.FO)(l)," • ",(0,H.hK)(l)]}),(0,Y.jsx)(v.D,{as:"div",variant:"viola",className:X,"data-testid":"event-venue",children:d?c:[c,r].join(p.ag.getSeparator())})]})]},n.id)})),ne=(0,s.memo)((e=>{const{event:n,locationName:t,onClose:a,feedSpec:o}=e,c=n?.concerts[0]?.concert,r=c?.artists[0],i=(0,s.useMemo)((()=>o?.groupedEventModalFactory({uri:r?.uri||""})),[o,r]),l=(0,b.$P)(),d=(0,b.Wi)(i);if(!n||!c||!r)return null;const m=()=>{i&&l.logInteraction(i.closeButtonFactory().hitUiHide()),a()};return(0,Y.jsx)(E.Z,{contentLabel:p.ag.get("live_events.label"),isOpen:!0,className:P,onRequestClose:m,children:(0,Y.jsxs)("section",{className:W,ref:d,children:[(0,Y.jsx)("div",{className:A,children:(0,Y.jsx)(te,{"aria-label":p.ag.get("close"),iconOnly:O.k,buttonSize:"sm",onClick:m})}),(0,Y.jsxs)("div",{className:B,children:[(0,Y.jsx)(U.E,{height:"48",width:"48",className:T,src:r.imageUri}),(0,Y.jsxs)("div",{className:R,children:[(0,Y.jsx)(v.D,{as:"h3",variant:"cello",className:$,"data-testid":"event-venue",children:r.name}),(0,Y.jsx)(v.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${p.ag.get("concerts.count_near_location",n.concerts.length,t)}`})]})]}),n.concerts.map(((e,n)=>(0,Y.jsx)(ee,{concert:e.concert,position:n,modalSpec:i},e.concert.id)))]})})}));var te=(0,F.ZP)(L.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),se=t(75387),ae=t(81598),oe=t(58450);const ce=async()=>(await(0,oe.getSavedConcertsHub)(ae.b.getInstance())).body,re=e=>{const[n,{isAnonymous:t,geonameId:s}]=e.queryKey;return(async(e,n)=>{const t=e?(0,oe.getConcertsHub)(ae.b.getInstance(),void 0,n):(0,oe.getConcertsForUser)(ae.b.getInstance(),n);return(await t).body})(t,s)},ie=e=>{const[,,{geonameId:n}]=e.queryKey;return(async(e=1,n)=>(await(0,oe.getAllConcerts)(ae.b.getInstance(),{page:e,geonameId:n})).body)(e.pageParam,n)},le=6e5,de=/^(\d+)/,me=(e,n)=>{const t=(()=>{const{location:e}=(0,r.UO)(),[,n]=e?.match(de)||[];if(n)try{return parseInt(n,10)}catch(e){return}})(),[s]=(0,i.lr)(),a=s.get("filter")?.trim();return e&&"all"===a?{type:"all",geonameId:t}:!e&&n&&"saved"===a?{type:"saved"}:{type:"recommended",geonameId:t}};var ge=t(45115),ve=t(49982),ue=t(65562),he=t(36190),pe=t(51114);const xe="pU4WoqT8T6PmtjPbFtK0",je="FC5Y_KFJ9rJyTpydqtOW",fe="AAYLcavkBdCuebn9AQxT",Ne="lYHCmxpdReachiOORWGo",ye="JtKEdtTtcK7s6EpGecaC",be="myHDa69cI5CHC8fhIhkG",_e=(0,s.memo)((e=>{const{event:n,onClick:t}=e,a=(0,s.useCallback)((()=>t(n)),[n,t]),o=(0,H.CH)(n.openingDate),c=(0,H.CH)(n.closingDate),r=n.concerts[0].concert,i=r.artists[0];return(0,Y.jsxs)(L.o,{onClick:a,className:xe,component:"div",role:"button",children:[i.imageUri&&(0,Y.jsx)(pe.Z,{children:(0,Y.jsx)("div",{role:"img",className:be,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${i.imageUri})`}})}),(0,Y.jsx)("time",{className:je,dateTime:o.toISOString(),children:(0,Y.jsx)(v.D,{as:"h5",variant:"mestoBold",children:(0,H.Bc)(o,c)})}),(0,Y.jsxs)("div",{className:fe,dir:"auto",children:[(0,Y.jsx)(v.D,{as:"h2",variant:"cello",weight:"bold",className:Ne,children:(0,M.ij)(r)}),(0,Y.jsx)("div",{className:ye,children:(0,Y.jsx)(v.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:p.ag.get("concerts.count",n.concerts.length)})})]})]})})),Ie=(0,s.memo)((e=>{const{event:n,position:t,sectionSpec:a,onOpenGroupedEvent:o}=e,c=n.concerts[0]?.concert,r=c?.id,i=c&&(0,ue.g3)(c.id).toURI(),l=(0,b.$P)(),d=(0,s.useMemo)((()=>a?.eventCardFactory({identifier:r??"",position:t,uri:i??""})),[a,r,i,t]),m=(0,b.Wi)(d),g=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(n.concerts.length>1)return(0,Y.jsx)("div",{ref:m,children:(0,Y.jsx)(_e,{event:n,onClick:g})});return(0,Y.jsx)("div",{ref:m,children:(0,Y.jsx)(he.Z,{concert:c,isVirtual:"online"===n.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:i}))}})})})),ke=(e,n)=>{if(!e)return"/concerts";const t=n?.normalize().replaceAll(/\W+/g,"-");return t?`/concerts/location/${e}-${t}`:`/concerts/location/${e}`},Ce=10;const Se="MVPegsivznZB6gdkcnkH",De="MlK79hskRbFrN2OBjMkl",Fe="VxaXFH9Uq1NU0LtsVhIu",we="UDVDNa40iTSPS9uHCG7Q",Oe="ofURwIKv0qEXJGTraIis",Ue="RLoSoo6mmRgHfwNfLxAj",Le="fN_lJHkYih9H3j9YSEzS",Ee="LOJZO2MnGW5dCIawF767",Ge="tyc7QRlEJigVFIAeLGOB",He="PoljWhTLU3MKqIx2gSPY",Me="ajxCNAuBJSgYfKUUBWBT",Pe="WR2h2Li5XTrBn_Rdme_k",We="WNhsvOyu4doInF525pLE",Ae="qSR4imCvzdznIQ4F2kBO",Be=(0,s.memo)((e=>{const{eventGroups:n,locationName:t,isLoading:a,feedSpec:o,onOpenGroupedEvent:c}=e,r=(0,s.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:0})),[o]),i=(0,b.Wi)(r);return a?(0,Y.jsx)(S.h,{hasError:!1,errorMessage:""}):n?0===n.length||0===n[0].events.length?(0,Y.jsx)(C.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",t),renderInline:!0}):(0,Y.jsx)("div",{ref:i,children:n.map((e=>(0,Y.jsx)("div",{className:We,children:(0,Y.jsx)(D.P,{total:e.events.length,title:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,children:e.events.map(((e,n)=>{const t=e.concerts[0]?.concert;return(0,Y.jsx)(Ie,{event:e,position:n,sectionSpec:r,onOpenGroupedEvent:c},t.id)}))})},e.date)))}):null})),Te=(0,s.memo)((e=>{const{geonameId:n,spec:t}=e,a=(0,r.s0)(),[o]=(0,i.lr)(),[c,l]=(0,s.useState)(),d=(0,ve.o)(),m=(0,s.useMemo)((()=>t?.headerFactory()),[t]),{data:g,isLoading:v,hasNextPage:u,isFetchingNextPage:h,fetchNextPage:x}=(e=>(0,se.useInfiniteQuery)(["concerts","all",{geonameId:e}],ie,{staleTime:le,keepPreviousData:!0,getNextPageParam:(e,n)=>{if(!(n.length>=50)&&0!==e.events.length)return n.length+1}}))(n),j=(0,s.useMemo)((()=>function(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const n=[];let t={date:e[0].events[0].openingDate.slice(0,Ce),events:[]};for(const s of e)for(const e of s.events){const s=e.openingDate.slice(0,Ce);t.date!==s&&(n.push(t),t={date:s,events:[]}),t.events.push(e)}return n.push(t),n}(g?.pages??[])),[g?.pages]),f=g?.pages[0]?.userLocation||p.ag.get("concerts.default_location");return(0,Y.jsxs)("div",{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("concerts_shows_in")} ${f}`}),(0,Y.jsx)("div",{className:Se,"data-testid":"location-selector",children:(0,Y.jsx)(ge.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&a({pathname:ke(e.geonameId,e.location),search:`?${o.toString()}`})},locationStr:f,headerSpec:m})}),(0,Y.jsx)(Be,{isLoading:v,locationName:f,eventGroups:j,onOpenGroupedEvent:e=>{l(e);const n=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:n})},feedSpec:t}),u&&(0,Y.jsx)("div",{className:Ae,children:(0,Y.jsx)(I.P,{disabled:h,onClick:()=>{x()},children:p.ag.get("concerts.load_more")})}),(0,Y.jsx)(ne,{event:c,locationName:f,feedSpec:t,onClose:()=>l(void 0)})]})}));var Re=t(68401);const $e=(0,s.memo)((e=>{const{title:n="",identifier:t,position:a,events:o,feedSpec:c,onOpenGroupedEvent:r}=e,i=(0,s.useMemo)((()=>c?.eventSectionFactory({identifier:t,position:a})),[c,t,a]),l=(0,b.Wi)(i);return 0===o.length?null:(0,Y.jsx)("div",{className:Se,ref:l,children:(0,Y.jsx)(Re.ZP,{value:"headered-grid",index:a,children:(0,Y.jsx)(D.P,{total:o.length,title:n,showAll:!0,children:o.map(((e,n)=>{const t=e.concerts[0]?.concert;return(0,Y.jsx)(Ie,{event:e,position:n,sectionSpec:i,onOpenGroupedEvent:r},t.id)}))})})})})),Ze=(0,s.memo)((e=>{const{enableInterestedFeature:n=!1,isLoading:t,events:s,locationName:a,spec:o,onOpenGroupedEvent:c}=e;if(t)return(0,Y.jsx)(S.h,{hasError:!1,errorMessage:""});if(0===s.length)return(0,Y.jsx)(C.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0});const r=(e=>{const n={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":n.recommended.push(e);break;case"popular":n.popular.push(e);break;case"online":n.online.push(e)}})),n})(s);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)($e,{title:p.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:r.online,onOpenGroupedEvent:c,feedSpec:o}),(0,Y.jsx)($e,{title:n?"":p.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:r.recommended,onOpenGroupedEvent:c,feedSpec:o}),(0,Y.jsx)($e,{title:p.ag.get("concerts_popular_near_you"),identifier:"popular",position:2,events:r.popular,onOpenGroupedEvent:c,feedSpec:o})]})})),ze=(0,s.memo)((e=>{const{enableInterestedFeature:n=!1,isAnonymous:t,geonameId:a,spec:o}=e,c=(0,r.s0)(),[i,l]=(0,s.useState)(),d=(0,ve.o)(),m=(0,s.useMemo)((()=>o.headerFactory()),[o]),{data:g,isLoading:v}=(e=>{const n=(0,se.useQueryClient)();return(0,se.useQuery)(["concerts",e],re,{staleTime:le,keepPreviousData:!0,onSuccess(t){if(e.geonameId||!t.userLocationGeonameId)return;const s=parseInt(t.userLocationGeonameId,10),a=["concerts",{...e,geonameId:s}];n.setQueryData(a,(()=>t))}})})({isAnonymous:t,geonameId:a}),u=g?.userLocation||p.ag.get("concerts.default_location");return(0,Y.jsxs)("div",{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("concerts_shows_in")} ${u}`}),(0,Y.jsx)("div",{className:Se,"data-testid":"location-selector",children:(0,Y.jsx)(ge.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c(ke(e.geonameId,e.location))},locationStr:u,headerSpec:m})}),(0,Y.jsx)(Ze,{enableInterestedFeature:n,isLoading:v,events:g?.events||[],locationName:u,spec:o,onOpenGroupedEvent:e=>{l(e);const n=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:n})}}),(0,Y.jsx)(ne,{event:i,locationName:u,feedSpec:o,onClose:()=>l(void 0)})]})})),Qe=(0,s.memo)((e=>{const{isAnonymous:n,spec:t}=e,s=(e=>(0,se.useQuery)("savedConcerts",ce,{enabled:!e,keepPreviousData:!1}))(n);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("live_events.label")}`}),s.data?.events.length?(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)($e,{title:p.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:s.data?.events,feedSpec:t,onOpenGroupedEvent:()=>{}})}):(0,Y.jsxs)("div",{className:Ee,children:[(0,Y.jsx)(v.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Me,children:p.ag.get("concerts_interested_in_live_events")}),(0,Y.jsx)(v.D,{as:"p",className:Pe,children:p.ag.get("concerts_no_events_description")}),(0,Y.jsx)(G.default,{to:"/concerts",className:Ge,children:(0,Y.jsx)(I.P,{as:"span",className:He,children:p.ag.get("concerts_browse_more_events")})})]})]})})),Je=l.vI0,Ke={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},Ve=()=>{const{isAnonymous:e}=(0,c.v9)(y.Gg),n=(0,r.TH)(),t=n.pathname+n.search,a=(0,b.$P)(),l=(0,u.W6)(_.tp),{spec:I}=(0,b.fU)(h.y,{}),k=me(e,l),C=(0,s.useMemo)((()=>I.headerFactory().liveEventsNavbarFactory({uri:t,reason:k.type})),[I,k,t]),S=(0,b.Wi)(C),D=(e,n)=>{const t=I.headerFactory().liveEventsNavbarFactory({uri:e,reason:n}).hitUiNavigate({destination:e});a.logInteraction(t)};return(0,Y.jsxs)("section",{className:De,children:[(0,Y.jsxs)(j.gF,{size:j.fR.SMALL,backgroundColor:Je,backgroundImages:[Ke],children:[(0,Y.jsx)(j.sP,{children:(0,Y.jsx)(j.xd,{children:p.ag.get("live_events.label")})}),(0,Y.jsx)(f.W,{children:(0,Y.jsx)(N.i,{text:p.ag.get("live_events.label")})})]}),(0,Y.jsxs)("div",{className:Fe,children:[(0,Y.jsx)(x.I,{backgroundColor:Je}),!e&&l&&(0,Y.jsx)("div",{className:Oe,ref:S,children:(0,Y.jsx)(d.l,{list:(0,Y.jsx)("nav",{"aria-label":"live events navbar",children:(0,Y.jsxs)(m.F,{children:[(0,Y.jsx)(g.c,{id:"recommended_for_you_link",label:p.ag.get("concerts_recommended_for_you"),active:"recommended"===k.type,className:o()(Le,{[Ue]:"recommended"===k.type}),component:i.rU,to:"/concerts",onClick:()=>D("/concerts","recommended"),sentenceCase:!0},0),(0,Y.jsx)(g.c,{id:"concerts_interested_link",label:p.ag.get("concerts_interested"),active:"saved"===k.type,className:o()(Le,{[Ue]:"saved"===k.type}),component:i.rU,to:"/concerts?filter=saved",onClick:()=>D("/concerts?filter=saved","saved"),sentenceCase:!0},1)]})})})}),(0,Y.jsxs)("div",{className:we,children:["recommended"===k.type&&(0,Y.jsx)(ze,{isAnonymous:e,geonameId:k.geonameId,spec:I,enableInterestedFeature:l}),"all"===k.type&&(0,Y.jsx)(Te,{geonameId:k.geonameId,spec:I}),"saved"===k.type&&(0,Y.jsx)(Qe,{isAnonymous:e,spec:I}),(0,Y.jsx)(v.D,{variant:"finale",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")})]})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map