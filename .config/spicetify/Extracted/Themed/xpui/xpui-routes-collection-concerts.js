"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{6382:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(30758),s=n(69725),i=n(12783),o=n(88497),r=n(59996),c=n(32912),l=n(56975);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",m="HYVIJaYYiCTgSCHie70L",g="SPbe_Q1wtiZQCmo0QKUy",v="TRp4tgG7_cymGIXDevIP",h="tC1Y_nwyyly7cpIGqF5K",p="l93AfoV_qHnMQSQBB5GK",f="DgDBmSR2sbwji2UfqxIf",x="EkGb0ZzhswreSvpZoioY";var j=n(86070);const y=(0,a.memo)((e=>{const{uri:t,title:n,imageUrl:a,date:y,subTitle:_,firstParty:C,onClick:k}=e,R=y?(0,c.l4)(y):void 0;return(0,j.jsx)(r.N,{to:t,className:d,"data-testid":"concert-card",onClick:k,children:(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)(l.b,{children:(0,j.jsx)("div",{role:"img",className:x,style:{backgroundImage:`url(${a})`},children:!a&&(0,j.jsx)(s.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),R&&(0,j.jsxs)("time",{className:m,dateTime:y,children:[(0,j.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(R)}),(0,j.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(R)})]}),(0,j.jsxs)("div",{className:g,dir:"auto",children:[(0,j.jsx)(i.E,{as:"h2",variant:"bodyMedium",className:v,children:n}),(0,j.jsxs)("div",{className:h,children:[C&&(0,j.jsx)("span",{className:f,children:(0,j.jsx)(o.D,{size:"small"})}),(0,j.jsx)(i.E,{as:"span",className:p,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:_})]})]})]})})}))},83059:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Kn});var a=n(30758),s=n(97500),i=n.n(s),o=n(41978),r=n(37985),c=n(71306),l=n(43830),d=n(30171),u=n(31307),m=n(50363),g=n(46524),v=n(33993),h=n(11808),p=n(38308),f=n(31685),x=n(82442),j=n(74793),y=n(59116),_=n(21752),C=n(55194),k=n(49217),R=n(94061),b=n(76792),S=n(73155),N=(n(81465),n(43178)),I=n(12783),D=n(67889),U=n(70043),F=n(67017),E=n(91985),w=n(3091),B=n(17176),A=n(6924),M=n(72653),T=n(94222),z=n(96644),P=n(87584),L=n(63514),H=n(16856),O=n(54869),K=n(96132),W=n(24808),V=n(47613),$=n(2283),Y=n(88593),G=n(56708),q=n(64416),Z=n(79494),Q=n(38408),X=n(62224),J=n(63240),ee=n(45523),te=n(10632),ne=n(54701),ae=n(80675),se=n(72861),ie=n(76804),oe=n(55128),re=n(53406),ce=n(15643),le=n(1467),de=n(24428),ue=n(48199),me=n(61845),ge=n(83536),ve=n(70756),he=n(63855),pe=n(1103),fe=n(96344),xe=n(38903),je=n(17530),ye=n(33140),_e=n(64741),Ce=n(71418),ke=n(44135),Re=n(6729),be=n(32409),Se=n(67031),Ne=n(98045),Ie=n(86111),De=n(11554),Ue=n(61753),Fe=n(87318),Ee=n(89949),we=n(22180),Be=n(85428);const Ae={af:U.af,am:F.c,ar:E.ar,arEG:w.m,arMA:B.E,arSA:A.G,az:M.az,bg:T.bg,bn:z.bn,bho:F.c,bs:P.bs,ca:L.ca,cs:H.cs,da:O.da,de:K.de,el:W.el,en:F.c,enGB:V.b,es419:$.es,es:$.es,esAR:$.es,esMX:$.es,et:Y.et,eu:G.eu,fa:q.$,fi:Z.fi,fil:F.c,frCA:Q.V,fr:X.fr,gl:J.gl,gu:ee.gu,he:te.he,hi:ne.hi,hr:ae.hr,hu:se.hu,id:ie.id,is:oe.is,it:re.it,ja:ce.ja,kn:le.kn,ko:de.ko,lt:ue.lt,lv:me.lv,mk:ge.mk,ml:F.c,mr:F.c,ms:ve.ms,nb:he.nb,ne:F.c,nl:pe.nl,or:F.c,paIN:F.c,paPK:F.c,pl:fe.pl,ptBR:xe.F,ptPT:je.pt,ro:ye.ro,ru:_e.ru,sk:Ce.sk,sl:ke.sl,sr:Re.sr,sv:be.sv,sw:F.c,ta:Se.ta,te:Ne.te,th:Ie.th,tr:De.tr,uk:Ue.uk,ur:F.c,vi:Fe.vi,zhCN:Ee.g,zhHK:we.a,zhTW:Be.G,zu:F.c},Me=e=>(e=>Object.keys(Ae).includes(e))(e)?Ae[e]:F.c;var Te=n(12058),ze=n(42534);const Pe=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},Le=e=>{const t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const a=new Date(n);return a.setDate(n.getDate()+2),{from:n,to:a}},He=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,Te.r)(e.from,t.from)&&(0,Te.r)(e.to,t.to)),Oe=e=>(0,ze.x)(e,{representation:"date"});var Ke=n(43396),We=n(79303),Ve=n(48905);const $e="C1USyigFSYyc22_BmsgB",Ye="Cwo5ZgH_QLzFbSjWjglf",Ge="iL7PRv0yTC9UFjHfDJDW",qe="oxBa3kaduGMhYxc9I_Uu",Ze="x0xbkRE3CyGK_i406MSX",Qe="zT6EzYpjnj9pMKhMFQB7",Xe="YOLVSXg5_gdh0VfL2oNl",Je="ynXemVsankd4H506x8D2";var et=n(86070);const tt={formatCaption:e=>h.Ru.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>h.Ru.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>h.Ru.formatDate(e,{weekday:"short"})},nt=(0,a.memo)((e=>{const{onDone:t,onClose:n,spec:s}=e,[i,o]=(0,a.useState)(e.dateRange),r=(0,Ke.W)(),c=(0,Ve.t)(s),u=(0,We.s)(),m=new Date,g=Pe(m),v=Le(m),p=He(i,g),f=He(i,v),x=new Date;return x.setFullYear(x.getFullYear()+1),(0,et.jsx)("div",{ref:c,children:(0,et.jsx)(D.A,{isOpen:!0,children:(0,et.jsxs)("section",{className:$e,children:[(0,et.jsx)(d.H,{className:Ye,iconOnly:N.M,size:"small",onClick:n,"aria-label":h.Ru.get("close_button_action")}),(0,et.jsxs)("div",{className:Ge,children:[(0,et.jsx)(I.E,{as:"h3",variant:"bodyMediumBold",children:h.Ru.get("live_events.date_picker_dialog_title")}),(0,et.jsxs)("div",{className:qe,children:[(0,et.jsx)(b.v,{className:Ze,size:"md",selectedColorSet:"brightAccent",selected:p,onClick:()=>{o(p?void 0:g),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:h.Ru.get("live_events.this_weekend_preset")}),(0,et.jsx)(b.v,{className:Ze,size:"md",selectedColorSet:"brightAccent",selected:f,onClick:()=>{o(f?void 0:v),s&&u.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:h.Ru.get("live_events.next_weekend_preset")})]})]}),(0,et.jsx)(S.hv,{mode:"range",selected:i,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,toDate:x,formatters:tt,dir:r?"rtl":"ltr",modifiersClassNames:{today:Qe},locale:Me(h.Ru.getLocaleForFormatting())}),(0,et.jsxs)("div",{className:Xe,children:[(0,et.jsx)(d.H,{className:Je,size:"small",onClick:()=>{o(void 0)},disabled:!i?.from,children:h.Ru.get("live_events.date_picker_dialog_clear")}),(0,et.jsx)(l.$,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:n}=i;t({from:e,to:n||e})}else t()},children:h.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),at=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,a,s]=t;return new Date(parseInt(n,10),parseInt(a,10)-1,parseInt(s,10))},st=()=>{const[e]=(0,r.ok)(),t=e.get("startDate")?.trim(),n=e.get("endDate")?.trim(),a=at(t),s=at(n);return a&&s&&{from:a,to:s}};var it=n(32912);const ot="WnIhxhr9MIQjVvkvUQTf",rt="ETRYfT8oEUJuUDLgOBUX",ct=e=>{const[t,n]=(0,a.useState)(!1),[,s]=(0,r.ok)(),i=(0,We.s)(),o=(0,a.useMemo)((()=>e.spec?.datePickerModalFactory()),[e.spec]),c=(0,a.useMemo)((()=>e.spec?.headerFactory()),[e.spec]),d=st(),u=Pe(new Date),m=Le(new Date),g=(0,a.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=Oe(e.from),t.endDate=Oe(e.to),o)){const e=new URLSearchParams(t).toString();i.logInteraction(o.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}n(!1),s(t),o&&i.logInteraction(o.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[s,o,i]),v=(0,a.useCallback)((e=>{const t={filter:"all"};He(d,e)||(t.startDate=Oe(e.from),t.endDate=Oe(e.to)),s(t)}),[d,s]),p=d?l.$:k.n;return(0,et.jsxs)("div",{className:ot,children:[(0,et.jsx)("div",{children:(0,et.jsx)(p,{className:rt,iconLeading:R.R,onClick:()=>{n(!0),c&&i.logInteraction(c.datePickerButtonFactory().hitUiReveal())},size:"small",children:d?(0,it.tX)(d):h.Ru.get("live_events.date_picker_button_text")})}),t&&(0,et.jsx)(nt,{onClose:()=>{n(!1),o&&i.logInteraction(o.closeButtonFactory().hitUiHide())},onDone:g,dateRange:d,spec:o}),(0,et.jsxs)("div",{children:[(0,et.jsx)(b.v,{size:"sm",selectedColorSet:"brightAccent",selected:He(d,u),onClick:()=>{if(v(u),c){const e={startDate:Oe(u.from),endDate:Oe(u.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},className:rt,children:h.Ru.get("live_events.this_weekend_preset")}),(0,et.jsx)(b.v,{size:"sm",selectedColorSet:"brightAccent",selected:He(d,m),onClick:()=>{if(v(m),c){const e={startDate:Oe(m.from),endDate:Oe(m.to)},t=new URLSearchParams(e).toString();i.logInteraction(c.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},className:rt,children:h.Ru.get("live_events.next_weekend_preset")})]})]})};var lt=n(59996),dt=n(60386),ut=n(88482),mt=n(59623),gt=n(61544);const vt="Ig5vKQ7dYBd1EvrAFxNe",ht="h_q319q68ujja24YIoXY",pt="dFTQKQt3imsoOza3VE4G",ft="M8LA1p3y53Qnge37zUmz",xt="HZi6Ziy6mVJMFZsPf4wk",jt="KNX0R2c0r90zNTPYZm6X",yt="JI0woT5IN6EnNKnilhcg",_t="kAi1CfiOMYDExKkXuw44",Ct="Zwr6T4ceJI7KfyNxa4tS",kt="mW3O8RnDMDY6MfRJKqd5",Rt="raQK_4Eaqa5Zj06_aBm7",bt="AOuYgrCnrYvPKsyzxqVy",St="P1dra4DUpn36RnCkuwa_",Nt="zBCfaF04WlTsiUcov2oJ",It="JxTPZX9AoptKanJg0zIw",Dt=(0,a.memo)((e=>{const{concert:t,position:n,modalSpec:s}=e,i=(0,it.l4)(e.concert.startDateIsoString),o=(0,gt.o_)(e.concert.uri),r=(0,a.useMemo)((()=>s?.eventRowFactory({position:n,uri:t.uri})),[s,n,t]),c=(0,We.s)();return(0,et.jsxs)(lt.N,{to:`/concert/${o?.id}`,className:_t,onClick:()=>{r&&c.logInteraction(r.hitUiNavigate({destination:`/concert/${o?.id}`}))},children:[(0,et.jsxs)("div",{className:Ct,"aria-hidden":!0,children:[(0,et.jsx)(I.E,{as:"div",variant:"marginalBold",className:kt,children:(0,it.tj)(i)}),(0,et.jsx)(I.E,{as:"div",variant:"bodyMediumBold",className:Rt,children:(0,it.Py)(i)})]}),(0,et.jsxs)("div",{className:bt,children:[(0,et.jsx)(I.E,{as:"div",variant:"bodySmallBold",className:St,"data-testid":"event-title",children:t.title}),(0,et.jsx)(mt.s,{children:(0,it.Fn)(i)}),(0,et.jsxs)(I.E,{as:"div",variant:"bodySmall",className:Nt,children:[(0,it.VJ)(i)," • ",(0,it.WB)(i)]}),(0,et.jsx)(I.E,{as:"div",variant:"bodySmall",className:It,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(h.Ru.getSeparator())})]})]},t.uri)})),Ut=e=>{const t=(0,a.useMemo)((()=>e.feedSpec?.groupedEventModalFactory({uri:e.artist.uri||""})),[e.feedSpec,e.artist]),n=(0,We.s)(),s=(0,Ve.t)(t),i=()=>{t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,et.jsx)(D.A,{contentLabel:h.Ru.get("live_events.label"),isOpen:!0,className:vt,onRequestClose:i,children:(0,et.jsxs)("section",{className:ht,ref:s,children:[(0,et.jsx)("div",{className:pt,children:(0,et.jsx)(Ft,{"aria-label":h.Ru.get("close"),iconOnly:N.M,size:"small",onClick:i})}),(0,et.jsxs)("div",{className:ft,children:[(0,et.jsx)(ut._,{height:"48",width:"48",className:xt,src:e.artist.imageUri}),(0,et.jsxs)("div",{className:jt,children:[(0,et.jsx)(I.E,{as:"h3",variant:"bodyMediumBold",className:yt,"data-testid":"event-venue",children:e.artist.name}),(0,et.jsx)(I.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:h.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map(((e,n)=>(0,et.jsx)(Dt,{concert:e,position:n,modalSpec:t},e.uri)))]})})};var Ft=(0,dt.Ay)(d.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const Et=(0,a.memo)((e=>{const{event:t,onClose:n,feedSpec:s}=e,i=t?.concerts[0]?.concert,o=i?.artists[0],r=(0,a.useMemo)((()=>s?.groupedEventModalFactory({uri:o?.uri||""})),[s,o]),c=(0,We.s)();if(!t||!i||!o)return null;return(0,et.jsx)(Ut,{artist:{imageUri:o.imageUri,name:o.name,uri:o.uri},location:{city:i.location,venue:i.venue},concerts:t.concerts.map((e=>({uri:`spotify:concert:${e.concert.id}`,title:e.concert.title,startDateIsoString:e.concert.date,location:{city:e.concert.location,venue:e.concert.venue}}))),onClose:()=>{r&&c.logInteraction(r.closeButtonFactory().hitUiHide()),n()}})}));var wt=n(57734),Bt=n(6382),At=n(80377),Mt=n(7722);const Tt=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0];return(0,et.jsx)(Bt.A,{uri:(0,gt.B4)(t.id).toURI(),title:(0,Mt.a9)(t),imageUrl:o.imageUri,date:t.startDate.localDate,subTitle:n?s:[s,i].join(h.Ru.getSeparator()),firstParty:(0,At.he)(t),onClick:a})})),zt=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,it.l4)(t.openingDate),o=(0,it.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,et.jsx)(Bt.A,{title:(0,Mt.a9)(r),subTitle:`${(0,it.WZ)(i,o)} • ${h.Ru.get("concerts.count",t.concerts.length)}`,onClick:s,imageUrl:c.imageUri,uri:(0,gt.B4)(r.id).toURI()})})),Pt=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,gt.B4)(o.id).toURI(),l=(0,We.s)(),d=(0,a.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,Ve.t)(d),m=e=>{i(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,et.jsx)("div",{ref:u,children:(0,et.jsx)(zt,{event:t,onClick:m})});return(0,et.jsx)("div",{ref:u,children:(0,et.jsx)(Tt,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})}));var Lt=n(76881);const Ht=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((e=>{e.preventDefault(),n(t)}),[t,n]),i=(0,it.l4)(t.openingDate),o=(0,it.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,et.jsx)(Lt.A,{image:c?.imageUri,title:(0,Mt.a9)(r),subTitle:h.Ru.get("concerts.count",t.concerts.length),dateRange:(0,it.WZ)(i,o),uri:r?.id,onClick:s})})),Ot=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:i}=t,o=t.artists[0],r=(0,it.l4)(t.startDate.localDate);return(0,et.jsx)(Lt.A,{date:t.startDate.localDate,image:o?.imageUri,title:(0,Mt.a9)(t),subTitle:n?s:[s,i].join(h.Ru.getSeparator()),dateRange:(0,it.Y)(r),uri:(0,gt.B4)(t.id).toURI(),onClick:a})})),Kt=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,gt.B4)(o.id).toURI(),l=(0,We.s)(),d=(0,a.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),u=(0,Ve.t)(d),m=e=>{i(e)};if(t.concerts.length>1)return(0,et.jsx)("div",{ref:u,children:(0,et.jsx)(Ht,{event:t,onClick:m})});return(0,et.jsx)("div",{ref:u,children:(0,et.jsx)(Ot,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})}));var Wt=n(95302);const Vt="MVPegsivznZB6gdkcnkH",$t="vktIWsUczavLRrl4SkRt",Yt="LOJZO2MnGW5dCIawF767",Gt="tyc7QRlEJigVFIAeLGOB",qt="PoljWhTLU3MKqIx2gSPY",Zt="ajxCNAuBJSgYfKUUBWBT",Qt="WR2h2Li5XTrBn_Rdme_k",Xt=(0,a.memo)((e=>{const{title:t="",identifier:n,position:s,events:i,feedSpec:o,onOpenGroupedEvent:r,layout:c}=e,l=(0,a.useMemo)((()=>o?.eventSectionFactory({identifier:n,position:s})),[o,n,s]),d=(0,Ve.t)(l);return 0===i.length?null:(0,et.jsxs)("div",{className:Vt,ref:d,children:["grid"===c&&(0,et.jsx)(Wt.pZ,{value:"headered-grid",index:s,children:(0,et.jsx)(wt.$,{total:i.length,title:t,showAll:!0,withEncoreCards:!1,children:i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,et.jsx)(Pt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))})}),"list"===c&&(0,et.jsxs)("div",{children:[(0,et.jsx)(I.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:$t,children:t}),i.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,et.jsx)(Kt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))]})]})}));var Jt=n(25639),en=n(40312),tn=n(32045);const nn=async()=>(await(0,tn.oF)(en.n.getInstance())).body;var an=n(45346);const sn=(0,a.memo)((e=>{const{spec:t,layout:n}=e,[s,i]=(0,a.useState)(),o=(0,Jt.I)({queryKey:["savedConcerts"],queryFn:nn}),r=(0,an.W)(),c=o.data?.userLocation,l=c||h.Ru.get("concerts.default_location");return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(f.Q,{children:`${h.Ru.get("live_events.label")}`}),o.data?.events.length?(0,et.jsx)(et.Fragment,{children:(0,et.jsx)(Xt,{title:h.Ru.get("concerts_upcoming"),identifier:"saved",position:0,events:o.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:n})}):(0,et.jsxs)("div",{className:Yt,children:[(0,et.jsx)(I.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Zt,children:h.Ru.get("concerts_interested_in_live_events")}),(0,et.jsx)(I.E,{as:"p",className:Qt,children:h.Ru.get("concerts_no_events_description")}),(0,et.jsx)(lt.N,{to:"/concerts",className:Gt,children:(0,et.jsx)(k.n,{as:"span",className:qt,children:h.Ru.get("concerts_browse_more_events")})})]}),(0,et.jsx)(I.E,{variant:"marginal",semanticColor:"textSubdued",children:h.Ru.get("live_events.disclaimer")}),(0,et.jsx)(Et,{event:s,locationName:l,feedSpec:t,onClose:()=>i(void 0)})]})}));var on=n(28754),rn=n(83028),cn=n(56232);const ln=e=>{const[t]=e;if(!("visuals"in t.data))return;const[n]=t.data.visuals.avatarImage?.sources??[];return n?.url},dn=e=>{const[t,n]=(0,a.useState)(!1),s=(0,a.useMemo)((()=>{if(!(0,cn.ys)(e))return;const[t]=e.concerts;if(!(0,cn.$V)(t))return;const n=(0,gt.o_)(t.data.uri);return e.spec?.eventCardFactory({identifier:n?.id,position:e.position,uri:t.data.uri})}),[e]),i=(0,We.s)(),o=(0,Ve.t)(s);if(!(0,cn.ys)(e))return;const[r]=e.concerts;if(!(0,cn.$V)(r))return;const[c]=r.data.artists.items,l=ln(r.data.artists.items),{startDate:d,endDate:u}=(0,it.Vi)(e.concerts);return{isModalOpen:t,handleClick:e=>{e.preventDefault(),n(!0),s&&i.logInteraction(s.hitUiReveal())},handleClose:()=>n(!1),concert:{uri:r.data.uri,title:r.data.title,imageUrl:l,dateRange:(0,it.WZ)(d,u),startDateIsoString:r.data.startDateIsoString},artist:{uri:"uri"in c.data?c.data.uri:"",name:"profile"in c.data?c.data.profile.name:"",imageUri:l??""},location:{city:r.data.location.city,venue:r.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((e=>(0,cn.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null)).filter(cn.se),ref:o}},un=e=>{const t=(0,We.s)(),n=(0,a.useMemo)((()=>{const t=(0,gt.o_)((0,cn.$V)(e)?e.data.uri:"");return e.spec?.eventCardFactory({identifier:t?.id,position:e.position,uri:t?.toURI()??""})}),[e]);if(!(0,cn.$V)(e))return;return{imageUrl:ln(e.data.artists.items)??"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(h.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,it.Y)(new Date(e.data.startDateIsoString)),handleClick:()=>n&&t.logInteraction(n.hitUiNavigate({destination:e.data.uri}))}},mn="V5SKycHF8ljKTRcTXM52",gn="CzWhnZA1N50SUeRTGNXg",vn="kA_2O3KDNrREQ60CWtsH",hn="eIRhBzZ6DVZOR5G3KjAQ",pn="o9A1xL55C2qn_cIvXSfJ",fn={ConcertGroup:e=>{const t=dn(e);return t?(0,et.jsxs)("div",{ref:t.ref,children:[(0,et.jsx)(Lt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,image:t.concert.imageUrl??"",subTitle:h.Ru.get("concerts.count",t.concerts.length),dateRange:t.concert.dateRange}),t.isModalOpen&&(0,et.jsx)(Ut,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=un(e);return t?(0,et.jsx)(Lt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},xn=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,Ve.t)(t);return 0===e.concerts.length?null:(0,et.jsxs)("div",{ref:n,className:pn,children:[(0,et.jsx)(I.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(fn).includes(a??""))return null;var a;const s=fn[e.__typename];return(0,et.jsx)(s,{position:n,spec:t,...e},n)})).filter(cn.se)]})},jn={ConcertGroup:e=>{const t=dn(e);return t?(0,et.jsxs)("div",{ref:t.ref,children:[(0,et.jsx)(Bt.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:`${t.concert.dateRange} • ${h.Ru.get("concerts.count",t.totalConcerts)}`}),t.isModalOpen&&(0,et.jsx)(Ut,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:e=>{const t=un(e);return t?(0,et.jsx)(Bt.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null}},yn=e=>{const t=(0,a.useMemo)((()=>e.spec?.eventSectionFactory({identifier:"all",position:e.position??0})),[e.spec,e.position]),n=(0,Ve.t)(t);return(0,et.jsx)("div",{ref:n,children:(0,et.jsx)(wt.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map(((e,n)=>{if(a=e.__typename,!Object.keys(jn).includes(a??""))return null;var a;const s=jn[e.__typename];return(0,et.jsx)(s,{position:n,spec:t,...e},n)})).filter(cn.se)})})},_n=e=>{const t={"recommended-events":h.Ru.get("concerts_recommended_for_you"),"popular-events":h.Ru.get("concerts_popular")};return e in t?t[e]:h.Ru.get("concerts")},Cn=e=>{if(!(0,cn.eO)(e.data))return null;const t="grid"===e.layout?yn:xn;return(0,et.jsx)(t,{title:_n(e.data.key),concerts:e.data.concerts,spec:e.spec})},kn="TsOt70CoNNJlItfzhvtF",Rn=e=>{if(!(0,cn.dR)(e.data))return null;const t="grid"===e.layout?yn:xn;return(0,et.jsxs)("div",{children:[e.data.sections.map(((n,a)=>{return(0,et.jsx)(t,{position:a,title:(s=n.key,s?.match(/^(\d{4})-(\d{2})-(\d{2})$/)?(0,it.Fn)(new Date(s)):h.Ru.get("live_events.all_events_tab")),concerts:n.concerts,spec:e.spec},a);var s})),e.data.paginationKey&&e.fetchNextPage&&(0,et.jsx)(k.n,{className:kn,onClick:()=>e.fetchNextPage&&e.fetchNextPage(),children:h.Ru.get("concerts.load_more")})]})};var bn=n(86534),Sn=n(15742),Nn=n(8385);const In=new Sn.l("concertFeed","query","2c9fb8f35175a8a3f0bd4cbe9de95c3298228db153577f0492e54251c2f813bb",null);var Dn=n(69916),Un=n(22253);const Fn=(e,t=bn.q)=>{const{request:n}=(0,a.useContext)(Dn.j),s=t({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange],queryFn:({pageParam:t})=>(0,Un.c)(n,In,{...e,paginationKey:""===t?null:t}),staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:e=>{if(!(0,cn.Bw)(e?.data?.liveEventsFeed))return"";const t=e.data.liveEventsFeed.sections.find((e=>"AllEvents"===e.__typename))??{};return(0,cn.dR)(t)?t.paginationKey:""}}),i=(e=>{const t=e?.reduce(((e,t)=>{const n=e?.liveEventsFeed,a=t?.data?.liveEventsFeed;if(!(0,cn.Bw)(a)||!(0,cn.Bw)(n))return e;const s=n.sections.find((e=>"AllEvents"===e.__typename))??{},i=(0,cn.dR)(s)?s.sections:[],o=a.sections.find((e=>"AllEvents"===e.__typename))??{},r=[...i,...(0,cn.dR)(o)?o.sections:[]].reduce(((e,t)=>{const n=e[t.key]??[];return(0,cn.ys)(t)?{...e,[t.key]:[...n,...t.concerts]}:e}),{}),c=Object.entries(r).map((([e,t])=>({key:e,concerts:t})));return{liveEventsFeed:{sections:a.sections.map((e=>"AllEvents"===e.__typename||(0,cn.dR)(e)?{sections:c,__typename:"AllEvents"}:e))}}}),{liveEventsFeed:{sections:[]}});return t})(s.data?.pages);return{...s,data:i}},En={AllEvents:Rn,LiveEventSection:Cn},wn=e=>{const{data:t,isLoading:n,error:a,fetchNextPage:s}=Fn({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:e.dateRange?.from&&e.dateRange?.to?{from:(0,At.bU)(e.dateRange?.from),to:(0,At.bU)(e.dateRange.to)}:null});return n?(0,et.jsx)(rn.A,{hasError:!1,errorMessage:""}):!(0,cn.Bw)(t?.liveEventsFeed)||0===t.liveEventsFeed.sections.length||a?(0,et.jsx)(on.p,{title:h.Ru.get("concerts.error.no_concerts_found_title"),message:h.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,et.jsx)("div",{children:t?.liveEventsFeed.sections.map(((t,n)=>{if(!(0,cn.w1)(t))return null;const a=En[t.__typename];return(0,et.jsx)(a,{layout:e.layout,spec:e.spec,fetchNextPage:s,data:t},n)})).filter(cn.se)})};var Bn=n(25391),An=n(9183);const Mn=new Sn.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null);var Tn=n(7939);const zn=e=>{if(!e||!("items"in e))return;const[t]=e.items;return t},Pn=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`},Ln=(e=An.g)=>{const t=(0,an.W)(),{isAnonymous:n}=(0,o.d4)(Tn.Ht),{location:s}=e(),[i]=(0,r.ok)(),c=(0,An.Zp)(),[,l]=s?.match(/^(\d+)/)??[],[d,u]=(0,a.useState)(l?{geonameId:Number(l)}:void 0),{data:m}=(g={geonameId:d?.geonameId?String(d?.geonameId):null,isAnonymous:n},(0,Nn.I)(Mn,g,v));var g,v;const h=e=>{u(e),t({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c({pathname:String(e.geonameId)===m?.me?.profile?.location?.geonameId?"/concerts":Pn(e.geonameId,e.location),search:new URLSearchParams(i).toString()})};if(d){const e=zn(m?.concertLocations);return{location:{geonameId:d.geonameId??Number(e?.geonameId),geohash:d.geohash??e?.geoHash,name:d.name??e?.name},onChangeLocation:h}}const p=m?.me?.profile?.location,f=zn(m?.concertLocations);return{location:p?.geoHash||f?.geonameId?{geohash:p?.geoHash??f?.geoHash,geonameId:Number(p?.geonameId??f?.geonameId),name:p?.name??f?.name}:void 0,onChangeLocation:h}};var Hn=n(16297),On=n(72091);const Kn=()=>{const{isAnonymous:e}=(0,o.d4)(Tn.Ht),[t,n]=(0,a.useState)("grid"),{location:s,onChangeLocation:k}=Ln(),R=st(),[b,S]=(0,r.ok)(),{spec:N}=(0,On.r)(v.s,{}),I=(0,a.useMemo)((()=>N.headerFactory()),[N]),D=(0,We.s)(),U=e&&s?.name?h.Ru.get("live_events.location_concert_tickets",s.name):h.Ru.get("live_events.label"),F=()=>{const e=I.layoutToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:"grid"===t?"list":"grid"});D.logInteraction(e),n("grid"===t?"list":"grid")},E="interested"===b.get("filter"),w=E?l.$:d.H;return(0,et.jsxs)("section",{children:[(0,et.jsx)(f.Q,{children:(0,Hn.zV)(s?.name)}),(0,et.jsxs)(x.z,{size:x.K.SMALL,backgroundColor:c.Hhe,children:[(0,et.jsx)(j.Y,{children:(0,et.jsx)(C.mm,{children:U})}),(0,et.jsx)(y.h,{children:(0,et.jsx)(_.X,{text:U})})]}),(0,et.jsxs)("div",{children:[(0,et.jsx)(p.K,{backgroundColor:c.Hhe}),(0,et.jsxs)("div",{className:i()(mn,"contentSpacing"),children:[(0,et.jsxs)("div",{className:gn,children:[E?(0,et.jsx)("div",{}):(0,et.jsxs)("div",{className:vn,children:[(0,et.jsx)(Bn.A,{headerSpec:I,locationStr:s?.name??"",handleLocationChange:k}),(0,et.jsx)(ct,{spec:N})]}),(0,et.jsxs)("div",{className:hn,children:["grid"===t&&(0,et.jsx)(d.H,{"aria-label":h.Ru.get("concerts.feed_list_layout"),iconOnly:u.N,onClick:F,size:"small"}),"list"===t&&(0,et.jsx)(d.H,{"aria-label":h.Ru.get("concerts.feed_grid_layout"),iconOnly:m.D,onClick:F,size:"small"}),(0,et.jsx)(w,{size:"small",iconLeading:g.E,onClick:()=>S({filter:E?"":"interested"}),children:h.Ru.get("concerts_interested")})]})]}),E?(0,et.jsx)(sn,{layout:t,spec:N}):(0,et.jsx)(wn,{spec:N,layout:t,location:{geoHash:s?.geohash,geonameId:s?.geonameId?String(s.geonameId):"",name:s?.name??""},dateRange:R})]})]})]})}},80377:(e,t,n)=>{n.d(t,{bU:()=>o,he:()=>i,nm:()=>s});var a=n(42534);const s=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`};const i=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),o=e=>(0,a.x)(e,{representation:"date"})}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map